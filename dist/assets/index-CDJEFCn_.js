var Yk=Object.defineProperty;var Xk=(t,e,n)=>e in t?Yk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var an=(t,e,n)=>Xk(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Nt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Zk(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var c0={exports:{}},Cu={},d0={exports:{}},V={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jo=Symbol.for("react.element"),eS=Symbol.for("react.portal"),tS=Symbol.for("react.fragment"),nS=Symbol.for("react.strict_mode"),rS=Symbol.for("react.profiler"),sS=Symbol.for("react.provider"),iS=Symbol.for("react.context"),oS=Symbol.for("react.forward_ref"),lS=Symbol.for("react.suspense"),aS=Symbol.for("react.memo"),uS=Symbol.for("react.lazy"),im=Symbol.iterator;function cS(t){return t===null||typeof t!="object"?null:(t=im&&t[im]||t["@@iterator"],typeof t=="function"?t:null)}var f0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h0=Object.assign,p0={};function mi(t,e,n){this.props=t,this.context=e,this.refs=p0,this.updater=n||f0}mi.prototype.isReactComponent={};mi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};mi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function m0(){}m0.prototype=mi.prototype;function mh(t,e,n){this.props=t,this.context=e,this.refs=p0,this.updater=n||f0}var gh=mh.prototype=new m0;gh.constructor=mh;h0(gh,mi.prototype);gh.isPureReactComponent=!0;var om=Array.isArray,g0=Object.prototype.hasOwnProperty,yh={current:null},y0={key:!0,ref:!0,__self:!0,__source:!0};function v0(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)g0.call(e,r)&&!y0.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];s.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Jo,type:t,key:i,ref:o,props:s,_owner:yh.current}}function dS(t,e){return{$$typeof:Jo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function vh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Jo}function fS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var lm=/\/+/g;function gc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?fS(""+t.key):e.toString(36)}function Hl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Jo:case eS:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+gc(o,0):r,om(s)?(n="",t!=null&&(n=t.replace(lm,"$&/")+"/"),Hl(s,e,n,"",function(u){return u})):s!=null&&(vh(s)&&(s=dS(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(lm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",om(t))for(var l=0;l<t.length;l++){i=t[l];var a=r+gc(i,l);o+=Hl(i,e,n,a,s)}else if(a=cS(t),typeof a=="function")for(t=a.call(t),l=0;!(i=t.next()).done;)i=i.value,a=r+gc(i,l++),o+=Hl(i,e,n,a,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ul(t,e,n){if(t==null)return t;var r=[],s=0;return Hl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function hS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ye={current:null},Vl={transition:null},pS={ReactCurrentDispatcher:Ye,ReactCurrentBatchConfig:Vl,ReactCurrentOwner:yh};function w0(){throw Error("act(...) is not supported in production builds of React.")}V.Children={map:ul,forEach:function(t,e,n){ul(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ul(t,function(){e++}),e},toArray:function(t){return ul(t,function(e){return e})||[]},only:function(t){if(!vh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};V.Component=mi;V.Fragment=tS;V.Profiler=rS;V.PureComponent=mh;V.StrictMode=nS;V.Suspense=lS;V.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pS;V.act=w0;V.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=h0({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=yh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)g0.call(e,a)&&!y0.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Jo,type:t.type,key:s,ref:i,props:r,_owner:o}};V.createContext=function(t){return t={$$typeof:iS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:sS,_context:t},t.Consumer=t};V.createElement=v0;V.createFactory=function(t){var e=v0.bind(null,t);return e.type=t,e};V.createRef=function(){return{current:null}};V.forwardRef=function(t){return{$$typeof:oS,render:t}};V.isValidElement=vh;V.lazy=function(t){return{$$typeof:uS,_payload:{_status:-1,_result:t},_init:hS}};V.memo=function(t,e){return{$$typeof:aS,type:t,compare:e===void 0?null:e}};V.startTransition=function(t){var e=Vl.transition;Vl.transition={};try{t()}finally{Vl.transition=e}};V.unstable_act=w0;V.useCallback=function(t,e){return Ye.current.useCallback(t,e)};V.useContext=function(t){return Ye.current.useContext(t)};V.useDebugValue=function(){};V.useDeferredValue=function(t){return Ye.current.useDeferredValue(t)};V.useEffect=function(t,e){return Ye.current.useEffect(t,e)};V.useId=function(){return Ye.current.useId()};V.useImperativeHandle=function(t,e,n){return Ye.current.useImperativeHandle(t,e,n)};V.useInsertionEffect=function(t,e){return Ye.current.useInsertionEffect(t,e)};V.useLayoutEffect=function(t,e){return Ye.current.useLayoutEffect(t,e)};V.useMemo=function(t,e){return Ye.current.useMemo(t,e)};V.useReducer=function(t,e,n){return Ye.current.useReducer(t,e,n)};V.useRef=function(t){return Ye.current.useRef(t)};V.useState=function(t){return Ye.current.useState(t)};V.useSyncExternalStore=function(t,e,n){return Ye.current.useSyncExternalStore(t,e,n)};V.useTransition=function(){return Ye.current.useTransition()};V.version="18.3.1";d0.exports=V;var k=d0.exports;const We=pi(k);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mS=k,gS=Symbol.for("react.element"),yS=Symbol.for("react.fragment"),vS=Object.prototype.hasOwnProperty,wS=mS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xS={key:!0,ref:!0,__self:!0,__source:!0};function x0(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)vS.call(e,r)&&!xS.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:gS,type:t,key:i,ref:o,props:s,_owner:wS.current}}Cu.Fragment=yS;Cu.jsx=x0;Cu.jsxs=x0;c0.exports=Cu;var g=c0.exports,k0={exports:{}},mt={},S0={exports:{}},b0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,z){var U=P.length;P.push(z);e:for(;0<U;){var de=U-1>>>1,Se=P[de];if(0<s(Se,z))P[de]=z,P[U]=Se,U=de;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var z=P[0],U=P.pop();if(U!==z){P[0]=U;e:for(var de=0,Se=P.length,ll=Se>>>1;de<ll;){var br=2*(de+1)-1,mc=P[br],Er=br+1,al=P[Er];if(0>s(mc,U))Er<Se&&0>s(al,mc)?(P[de]=al,P[Er]=U,de=Er):(P[de]=mc,P[br]=U,de=br);else if(Er<Se&&0>s(al,U))P[de]=al,P[Er]=U,de=Er;else break e}}return z}function s(P,z){var U=P.sortIndex-z.sortIndex;return U!==0?U:P.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],u=[],c=1,d=null,f=3,h=!1,p=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(P){for(var z=n(u);z!==null;){if(z.callback===null)r(u);else if(z.startTime<=P)r(u),z.sortIndex=z.expirationTime,e(a,z);else break;z=n(u)}}function S(P){if(y=!1,x(P),!p)if(n(a)!==null)p=!0,Jt(b);else{var z=n(u);z!==null&&ln(S,z.startTime-P)}}function b(P,z){p=!1,y&&(y=!1,m(T),T=-1),h=!0;var U=f;try{for(x(z),d=n(a);d!==null&&(!(d.expirationTime>z)||P&&!ve());){var de=d.callback;if(typeof de=="function"){d.callback=null,f=d.priorityLevel;var Se=de(d.expirationTime<=z);z=t.unstable_now(),typeof Se=="function"?d.callback=Se:d===n(a)&&r(a),x(z)}else r(a);d=n(a)}if(d!==null)var ll=!0;else{var br=n(u);br!==null&&ln(S,br.startTime-z),ll=!1}return ll}finally{d=null,f=U,h=!1}}var E=!1,C=null,T=-1,I=5,R=-1;function ve(){return!(t.unstable_now()-R<I)}function on(){if(C!==null){var P=t.unstable_now();R=P;var z=!0;try{z=C(!0,P)}finally{z?Pn():(E=!1,C=null)}}else E=!1}var Pn;if(typeof v=="function")Pn=function(){v(on)};else if(typeof MessageChannel<"u"){var fs=new MessageChannel,hs=fs.port2;fs.port1.onmessage=on,Pn=function(){hs.postMessage(null)}}else Pn=function(){w(on,0)};function Jt(P){C=P,E||(E=!0,Pn())}function ln(P,z){T=w(function(){P(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,Jt(b))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(P){switch(f){case 1:case 2:case 3:var z=3;break;default:z=f}var U=f;f=z;try{return P()}finally{f=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,z){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var U=f;f=P;try{return z()}finally{f=U}},t.unstable_scheduleCallback=function(P,z,U){var de=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?de+U:de):U=de,P){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=U+Se,P={id:c++,callback:z,priorityLevel:P,startTime:U,expirationTime:Se,sortIndex:-1},U>de?(P.sortIndex=U,e(u,P),n(a)===null&&P===n(u)&&(y?(m(T),T=-1):y=!0,ln(S,U-de))):(P.sortIndex=Se,e(a,P),p||h||(p=!0,Jt(b))),P},t.unstable_shouldYield=ve,t.unstable_wrapCallback=function(P){var z=f;return function(){var U=f;f=z;try{return P.apply(this,arguments)}finally{f=U}}}})(b0);S0.exports=b0;var kS=S0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SS=k,pt=kS;function O(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var E0=new Set,yo={};function ss(t,e){Zs(t,e),Zs(t+"Capture",e)}function Zs(t,e){for(yo[t]=e,t=0;t<e.length;t++)E0.add(e[t])}var Cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Od=Object.prototype.hasOwnProperty,bS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,am={},um={};function ES(t){return Od.call(um,t)?!0:Od.call(am,t)?!1:bS.test(t)?um[t]=!0:(am[t]=!0,!1)}function CS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function TS(t,e,n,r){if(e===null||typeof e>"u"||CS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Xe(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var De={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){De[t]=new Xe(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];De[e]=new Xe(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){De[t]=new Xe(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){De[t]=new Xe(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){De[t]=new Xe(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){De[t]=new Xe(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){De[t]=new Xe(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){De[t]=new Xe(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){De[t]=new Xe(t,5,!1,t.toLowerCase(),null,!1,!1)});var wh=/[\-:]([a-z])/g;function xh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(wh,xh);De[e]=new Xe(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(wh,xh);De[e]=new Xe(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(wh,xh);De[e]=new Xe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){De[t]=new Xe(t,1,!1,t.toLowerCase(),null,!1,!1)});De.xlinkHref=new Xe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){De[t]=new Xe(t,1,!1,t.toLowerCase(),null,!0,!0)});function kh(t,e,n,r){var s=De.hasOwnProperty(e)?De[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(TS(e,n,s,r)&&(n=null),r||s===null?ES(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Mn=SS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cl=Symbol.for("react.element"),Os=Symbol.for("react.portal"),Ms=Symbol.for("react.fragment"),Sh=Symbol.for("react.strict_mode"),Md=Symbol.for("react.profiler"),C0=Symbol.for("react.provider"),T0=Symbol.for("react.context"),bh=Symbol.for("react.forward_ref"),Ad=Symbol.for("react.suspense"),Pd=Symbol.for("react.suspense_list"),Eh=Symbol.for("react.memo"),zn=Symbol.for("react.lazy"),_0=Symbol.for("react.offscreen"),cm=Symbol.iterator;function Ci(t){return t===null||typeof t!="object"?null:(t=cm&&t[cm]||t["@@iterator"],typeof t=="function"?t:null)}var oe=Object.assign,yc;function zi(t){if(yc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);yc=e&&e[1]||""}return`
`+yc+t}var vc=!1;function wc(t,e){if(!t||vc)return"";vc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var a=`
`+s[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{vc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?zi(t):""}function _S(t){switch(t.tag){case 5:return zi(t.type);case 16:return zi("Lazy");case 13:return zi("Suspense");case 19:return zi("SuspenseList");case 0:case 2:case 15:return t=wc(t.type,!1),t;case 11:return t=wc(t.type.render,!1),t;case 1:return t=wc(t.type,!0),t;default:return""}}function Rd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ms:return"Fragment";case Os:return"Portal";case Md:return"Profiler";case Sh:return"StrictMode";case Ad:return"Suspense";case Pd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case T0:return(t.displayName||"Context")+".Consumer";case C0:return(t._context.displayName||"Context")+".Provider";case bh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Eh:return e=t.displayName||null,e!==null?e:Rd(t.type)||"Memo";case zn:e=t._payload,t=t._init;try{return Rd(t(e))}catch{}}return null}function NS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rd(e);case 8:return e===Sh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function N0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function OS(t){var e=N0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function dl(t){t._valueTracker||(t._valueTracker=OS(t))}function O0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=N0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ca(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Id(t,e){var n=e.checked;return oe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function dm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=fr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function M0(t,e){e=e.checked,e!=null&&kh(t,"checked",e,!1)}function jd(t,e){M0(t,e);var n=fr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Dd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Dd(t,e.type,fr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function fm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Dd(t,e,n){(e!=="number"||ca(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Bi=Array.isArray;function Us(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+fr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Ld(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(O(91));return oe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function hm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(O(92));if(Bi(n)){if(1<n.length)throw Error(O(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:fr(n)}}function A0(t,e){var n=fr(e.value),r=fr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function pm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function P0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $d(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?P0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var fl,R0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(fl=fl||document.createElement("div"),fl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=fl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function vo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ji={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},MS=["Webkit","ms","Moz","O"];Object.keys(Ji).forEach(function(t){MS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ji[e]=Ji[t]})});function I0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ji.hasOwnProperty(t)&&Ji[t]?(""+e).trim():e+"px"}function j0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=I0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var AS=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zd(t,e){if(e){if(AS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(O(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(O(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(O(61))}if(e.style!=null&&typeof e.style!="object")throw Error(O(62))}}function Bd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fd=null;function Ch(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ud=null,Hs=null,Vs=null;function mm(t){if(t=Yo(t)){if(typeof Ud!="function")throw Error(O(280));var e=t.stateNode;e&&(e=Mu(e),Ud(t.stateNode,t.type,e))}}function D0(t){Hs?Vs?Vs.push(t):Vs=[t]:Hs=t}function L0(){if(Hs){var t=Hs,e=Vs;if(Vs=Hs=null,mm(t),e)for(t=0;t<e.length;t++)mm(e[t])}}function $0(t,e){return t(e)}function z0(){}var xc=!1;function B0(t,e,n){if(xc)return t(e,n);xc=!0;try{return $0(t,e,n)}finally{xc=!1,(Hs!==null||Vs!==null)&&(z0(),L0())}}function wo(t,e){var n=t.stateNode;if(n===null)return null;var r=Mu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(O(231,e,typeof n));return n}var Hd=!1;if(Cn)try{var Ti={};Object.defineProperty(Ti,"passive",{get:function(){Hd=!0}}),window.addEventListener("test",Ti,Ti),window.removeEventListener("test",Ti,Ti)}catch{Hd=!1}function PS(t,e,n,r,s,i,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Gi=!1,da=null,fa=!1,Vd=null,RS={onError:function(t){Gi=!0,da=t}};function IS(t,e,n,r,s,i,o,l,a){Gi=!1,da=null,PS.apply(RS,arguments)}function jS(t,e,n,r,s,i,o,l,a){if(IS.apply(this,arguments),Gi){if(Gi){var u=da;Gi=!1,da=null}else throw Error(O(198));fa||(fa=!0,Vd=u)}}function is(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function F0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function gm(t){if(is(t)!==t)throw Error(O(188))}function DS(t){var e=t.alternate;if(!e){if(e=is(t),e===null)throw Error(O(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return gm(s),t;if(i===r)return gm(s),e;i=i.sibling}throw Error(O(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(O(189))}}if(n.alternate!==r)throw Error(O(190))}if(n.tag!==3)throw Error(O(188));return n.stateNode.current===n?t:e}function U0(t){return t=DS(t),t!==null?H0(t):null}function H0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=H0(t);if(e!==null)return e;t=t.sibling}return null}var V0=pt.unstable_scheduleCallback,ym=pt.unstable_cancelCallback,LS=pt.unstable_shouldYield,$S=pt.unstable_requestPaint,fe=pt.unstable_now,zS=pt.unstable_getCurrentPriorityLevel,Th=pt.unstable_ImmediatePriority,W0=pt.unstable_UserBlockingPriority,ha=pt.unstable_NormalPriority,BS=pt.unstable_LowPriority,K0=pt.unstable_IdlePriority,Tu=null,tn=null;function FS(t){if(tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(Tu,t,void 0,(t.current.flags&128)===128)}catch{}}var Bt=Math.clz32?Math.clz32:VS,US=Math.log,HS=Math.LN2;function VS(t){return t>>>=0,t===0?32:31-(US(t)/HS|0)|0}var hl=64,pl=4194304;function Fi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function pa(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Fi(l):(i&=o,i!==0&&(r=Fi(i)))}else o=n&~s,o!==0?r=Fi(o):i!==0&&(r=Fi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Bt(e),s=1<<n,r|=t[n],e&=~s;return r}function WS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function KS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Bt(i),l=1<<o,a=s[o];a===-1?(!(l&n)||l&r)&&(s[o]=WS(l,e)):a<=e&&(t.expiredLanes|=l),i&=~l}}function Wd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function q0(){var t=hl;return hl<<=1,!(hl&4194240)&&(hl=64),t}function kc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Go(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Bt(e),t[e]=n}function qS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Bt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function _h(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Bt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var q=0;function J0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var G0,Nh,Q0,Y0,X0,Kd=!1,ml=[],er=null,tr=null,nr=null,xo=new Map,ko=new Map,Vn=[],JS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vm(t,e){switch(t){case"focusin":case"focusout":er=null;break;case"dragenter":case"dragleave":tr=null;break;case"mouseover":case"mouseout":nr=null;break;case"pointerover":case"pointerout":xo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ko.delete(e.pointerId)}}function _i(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Yo(e),e!==null&&Nh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function GS(t,e,n,r,s){switch(e){case"focusin":return er=_i(er,t,e,n,r,s),!0;case"dragenter":return tr=_i(tr,t,e,n,r,s),!0;case"mouseover":return nr=_i(nr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return xo.set(i,_i(xo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ko.set(i,_i(ko.get(i)||null,t,e,n,r,s)),!0}return!1}function Z0(t){var e=Rr(t.target);if(e!==null){var n=is(e);if(n!==null){if(e=n.tag,e===13){if(e=F0(n),e!==null){t.blockedOn=e,X0(t.priority,function(){Q0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Wl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=qd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Fd=r,n.target.dispatchEvent(r),Fd=null}else return e=Yo(n),e!==null&&Nh(e),t.blockedOn=n,!1;e.shift()}return!0}function wm(t,e,n){Wl(t)&&n.delete(e)}function QS(){Kd=!1,er!==null&&Wl(er)&&(er=null),tr!==null&&Wl(tr)&&(tr=null),nr!==null&&Wl(nr)&&(nr=null),xo.forEach(wm),ko.forEach(wm)}function Ni(t,e){t.blockedOn===e&&(t.blockedOn=null,Kd||(Kd=!0,pt.unstable_scheduleCallback(pt.unstable_NormalPriority,QS)))}function So(t){function e(s){return Ni(s,t)}if(0<ml.length){Ni(ml[0],t);for(var n=1;n<ml.length;n++){var r=ml[n];r.blockedOn===t&&(r.blockedOn=null)}}for(er!==null&&Ni(er,t),tr!==null&&Ni(tr,t),nr!==null&&Ni(nr,t),xo.forEach(e),ko.forEach(e),n=0;n<Vn.length;n++)r=Vn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Vn.length&&(n=Vn[0],n.blockedOn===null);)Z0(n),n.blockedOn===null&&Vn.shift()}var Ws=Mn.ReactCurrentBatchConfig,ma=!0;function YS(t,e,n,r){var s=q,i=Ws.transition;Ws.transition=null;try{q=1,Oh(t,e,n,r)}finally{q=s,Ws.transition=i}}function XS(t,e,n,r){var s=q,i=Ws.transition;Ws.transition=null;try{q=4,Oh(t,e,n,r)}finally{q=s,Ws.transition=i}}function Oh(t,e,n,r){if(ma){var s=qd(t,e,n,r);if(s===null)Ac(t,e,r,ga,n),vm(t,r);else if(GS(s,t,e,n,r))r.stopPropagation();else if(vm(t,r),e&4&&-1<JS.indexOf(t)){for(;s!==null;){var i=Yo(s);if(i!==null&&G0(i),i=qd(t,e,n,r),i===null&&Ac(t,e,r,ga,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Ac(t,e,r,null,n)}}var ga=null;function qd(t,e,n,r){if(ga=null,t=Ch(r),t=Rr(t),t!==null)if(e=is(t),e===null)t=null;else if(n=e.tag,n===13){if(t=F0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ga=t,null}function ev(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zS()){case Th:return 1;case W0:return 4;case ha:case BS:return 16;case K0:return 536870912;default:return 16}default:return 16}}var Gn=null,Mh=null,Kl=null;function tv(){if(Kl)return Kl;var t,e=Mh,n=e.length,r,s="value"in Gn?Gn.value:Gn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Kl=s.slice(t,1<r?1-r:void 0)}function ql(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function gl(){return!0}function xm(){return!1}function gt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?gl:xm,this.isPropagationStopped=xm,this}return oe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=gl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=gl)},persist:function(){},isPersistent:gl}),e}var gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ah=gt(gi),Qo=oe({},gi,{view:0,detail:0}),ZS=gt(Qo),Sc,bc,Oi,_u=oe({},Qo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ph,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Oi&&(Oi&&t.type==="mousemove"?(Sc=t.screenX-Oi.screenX,bc=t.screenY-Oi.screenY):bc=Sc=0,Oi=t),Sc)},movementY:function(t){return"movementY"in t?t.movementY:bc}}),km=gt(_u),eb=oe({},_u,{dataTransfer:0}),tb=gt(eb),nb=oe({},Qo,{relatedTarget:0}),Ec=gt(nb),rb=oe({},gi,{animationName:0,elapsedTime:0,pseudoElement:0}),sb=gt(rb),ib=oe({},gi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ob=gt(ib),lb=oe({},gi,{data:0}),Sm=gt(lb),ab={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ub={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function db(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=cb[t])?!!e[t]:!1}function Ph(){return db}var fb=oe({},Qo,{key:function(t){if(t.key){var e=ab[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ql(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ub[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ph,charCode:function(t){return t.type==="keypress"?ql(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ql(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),hb=gt(fb),pb=oe({},_u,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bm=gt(pb),mb=oe({},Qo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ph}),gb=gt(mb),yb=oe({},gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),vb=gt(yb),wb=oe({},_u,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),xb=gt(wb),kb=[9,13,27,32],Rh=Cn&&"CompositionEvent"in window,Qi=null;Cn&&"documentMode"in document&&(Qi=document.documentMode);var Sb=Cn&&"TextEvent"in window&&!Qi,nv=Cn&&(!Rh||Qi&&8<Qi&&11>=Qi),Em=" ",Cm=!1;function rv(t,e){switch(t){case"keyup":return kb.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var As=!1;function bb(t,e){switch(t){case"compositionend":return sv(e);case"keypress":return e.which!==32?null:(Cm=!0,Em);case"textInput":return t=e.data,t===Em&&Cm?null:t;default:return null}}function Eb(t,e){if(As)return t==="compositionend"||!Rh&&rv(t,e)?(t=tv(),Kl=Mh=Gn=null,As=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return nv&&e.locale!=="ko"?null:e.data;default:return null}}var Cb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Cb[t.type]:e==="textarea"}function iv(t,e,n,r){D0(r),e=ya(e,"onChange"),0<e.length&&(n=new Ah("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Yi=null,bo=null;function Tb(t){gv(t,0)}function Nu(t){var e=Is(t);if(O0(e))return t}function _b(t,e){if(t==="change")return e}var ov=!1;if(Cn){var Cc;if(Cn){var Tc="oninput"in document;if(!Tc){var _m=document.createElement("div");_m.setAttribute("oninput","return;"),Tc=typeof _m.oninput=="function"}Cc=Tc}else Cc=!1;ov=Cc&&(!document.documentMode||9<document.documentMode)}function Nm(){Yi&&(Yi.detachEvent("onpropertychange",lv),bo=Yi=null)}function lv(t){if(t.propertyName==="value"&&Nu(bo)){var e=[];iv(e,bo,t,Ch(t)),B0(Tb,e)}}function Nb(t,e,n){t==="focusin"?(Nm(),Yi=e,bo=n,Yi.attachEvent("onpropertychange",lv)):t==="focusout"&&Nm()}function Ob(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Nu(bo)}function Mb(t,e){if(t==="click")return Nu(e)}function Ab(t,e){if(t==="input"||t==="change")return Nu(e)}function Pb(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ht=typeof Object.is=="function"?Object.is:Pb;function Eo(t,e){if(Ht(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Od.call(e,s)||!Ht(t[s],e[s]))return!1}return!0}function Om(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Mm(t,e){var n=Om(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Om(n)}}function av(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?av(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function uv(){for(var t=window,e=ca();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ca(t.document)}return e}function Ih(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Rb(t){var e=uv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&av(n.ownerDocument.documentElement,n)){if(r!==null&&Ih(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Mm(n,i);var o=Mm(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ib=Cn&&"documentMode"in document&&11>=document.documentMode,Ps=null,Jd=null,Xi=null,Gd=!1;function Am(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Gd||Ps==null||Ps!==ca(r)||(r=Ps,"selectionStart"in r&&Ih(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Xi&&Eo(Xi,r)||(Xi=r,r=ya(Jd,"onSelect"),0<r.length&&(e=new Ah("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ps)))}function yl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Rs={animationend:yl("Animation","AnimationEnd"),animationiteration:yl("Animation","AnimationIteration"),animationstart:yl("Animation","AnimationStart"),transitionend:yl("Transition","TransitionEnd")},_c={},cv={};Cn&&(cv=document.createElement("div").style,"AnimationEvent"in window||(delete Rs.animationend.animation,delete Rs.animationiteration.animation,delete Rs.animationstart.animation),"TransitionEvent"in window||delete Rs.transitionend.transition);function Ou(t){if(_c[t])return _c[t];if(!Rs[t])return t;var e=Rs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in cv)return _c[t]=e[n];return t}var dv=Ou("animationend"),fv=Ou("animationiteration"),hv=Ou("animationstart"),pv=Ou("transitionend"),mv=new Map,Pm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gr(t,e){mv.set(t,e),ss(e,[t])}for(var Nc=0;Nc<Pm.length;Nc++){var Oc=Pm[Nc],jb=Oc.toLowerCase(),Db=Oc[0].toUpperCase()+Oc.slice(1);gr(jb,"on"+Db)}gr(dv,"onAnimationEnd");gr(fv,"onAnimationIteration");gr(hv,"onAnimationStart");gr("dblclick","onDoubleClick");gr("focusin","onFocus");gr("focusout","onBlur");gr(pv,"onTransitionEnd");Zs("onMouseEnter",["mouseout","mouseover"]);Zs("onMouseLeave",["mouseout","mouseover"]);Zs("onPointerEnter",["pointerout","pointerover"]);Zs("onPointerLeave",["pointerout","pointerover"]);ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ss("onBeforeInput",["compositionend","keypress","textInput","paste"]);ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ui="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lb=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ui));function Rm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,jS(r,e,void 0,t),t.currentTarget=null}function gv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==i&&s.isPropagationStopped())break e;Rm(s,l,u),i=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==i&&s.isPropagationStopped())break e;Rm(s,l,u),i=a}}}if(fa)throw t=Vd,fa=!1,Vd=null,t}function X(t,e){var n=e[ef];n===void 0&&(n=e[ef]=new Set);var r=t+"__bubble";n.has(r)||(yv(e,t,2,!1),n.add(r))}function Mc(t,e,n){var r=0;e&&(r|=4),yv(n,t,r,e)}var vl="_reactListening"+Math.random().toString(36).slice(2);function Co(t){if(!t[vl]){t[vl]=!0,E0.forEach(function(n){n!=="selectionchange"&&(Lb.has(n)||Mc(n,!1,t),Mc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[vl]||(e[vl]=!0,Mc("selectionchange",!1,e))}}function yv(t,e,n,r){switch(ev(e)){case 1:var s=YS;break;case 4:s=XS;break;default:s=Oh}n=s.bind(null,e,n,t),s=void 0,!Hd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Ac(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===s||a.nodeType===8&&a.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Rr(l),o===null)return;if(a=o.tag,a===5||a===6){r=i=o;continue e}l=l.parentNode}}r=r.return}B0(function(){var u=i,c=Ch(n),d=[];e:{var f=mv.get(t);if(f!==void 0){var h=Ah,p=t;switch(t){case"keypress":if(ql(n)===0)break e;case"keydown":case"keyup":h=hb;break;case"focusin":p="focus",h=Ec;break;case"focusout":p="blur",h=Ec;break;case"beforeblur":case"afterblur":h=Ec;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=km;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=tb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=gb;break;case dv:case fv:case hv:h=sb;break;case pv:h=vb;break;case"scroll":h=ZS;break;case"wheel":h=xb;break;case"copy":case"cut":case"paste":h=ob;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=bm}var y=(e&4)!==0,w=!y&&t==="scroll",m=y?f!==null?f+"Capture":null:f;y=[];for(var v=u,x;v!==null;){x=v;var S=x.stateNode;if(x.tag===5&&S!==null&&(x=S,m!==null&&(S=wo(v,m),S!=null&&y.push(To(v,S,x)))),w)break;v=v.return}0<y.length&&(f=new h(f,p,null,n,c),d.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==Fd&&(p=n.relatedTarget||n.fromElement)&&(Rr(p)||p[Tn]))break e;if((h||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=u,p=p?Rr(p):null,p!==null&&(w=is(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=u),h!==p)){if(y=km,S="onMouseLeave",m="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(y=bm,S="onPointerLeave",m="onPointerEnter",v="pointer"),w=h==null?f:Is(h),x=p==null?f:Is(p),f=new y(S,v+"leave",h,n,c),f.target=w,f.relatedTarget=x,S=null,Rr(c)===u&&(y=new y(m,v+"enter",p,n,c),y.target=x,y.relatedTarget=w,S=y),w=S,h&&p)t:{for(y=h,m=p,v=0,x=y;x;x=ps(x))v++;for(x=0,S=m;S;S=ps(S))x++;for(;0<v-x;)y=ps(y),v--;for(;0<x-v;)m=ps(m),x--;for(;v--;){if(y===m||m!==null&&y===m.alternate)break t;y=ps(y),m=ps(m)}y=null}else y=null;h!==null&&Im(d,f,h,y,!1),p!==null&&w!==null&&Im(d,w,p,y,!0)}}e:{if(f=u?Is(u):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var b=_b;else if(Tm(f))if(ov)b=Ab;else{b=Ob;var E=Nb}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(b=Mb);if(b&&(b=b(t,u))){iv(d,b,n,c);break e}E&&E(t,f,u),t==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&Dd(f,"number",f.value)}switch(E=u?Is(u):window,t){case"focusin":(Tm(E)||E.contentEditable==="true")&&(Ps=E,Jd=u,Xi=null);break;case"focusout":Xi=Jd=Ps=null;break;case"mousedown":Gd=!0;break;case"contextmenu":case"mouseup":case"dragend":Gd=!1,Am(d,n,c);break;case"selectionchange":if(Ib)break;case"keydown":case"keyup":Am(d,n,c)}var C;if(Rh)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else As?rv(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(nv&&n.locale!=="ko"&&(As||T!=="onCompositionStart"?T==="onCompositionEnd"&&As&&(C=tv()):(Gn=c,Mh="value"in Gn?Gn.value:Gn.textContent,As=!0)),E=ya(u,T),0<E.length&&(T=new Sm(T,t,null,n,c),d.push({event:T,listeners:E}),C?T.data=C:(C=sv(n),C!==null&&(T.data=C)))),(C=Sb?bb(t,n):Eb(t,n))&&(u=ya(u,"onBeforeInput"),0<u.length&&(c=new Sm("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=C))}gv(d,e)})}function To(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ya(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=wo(t,n),i!=null&&r.unshift(To(t,i,s)),i=wo(t,e),i!=null&&r.push(To(t,i,s))),t=t.return}return r}function ps(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Im(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,s?(a=wo(n,i),a!=null&&o.unshift(To(n,a,l))):s||(a=wo(n,i),a!=null&&o.push(To(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var $b=/\r\n?/g,zb=/\u0000|\uFFFD/g;function jm(t){return(typeof t=="string"?t:""+t).replace($b,`
`).replace(zb,"")}function wl(t,e,n){if(e=jm(e),jm(t)!==e&&n)throw Error(O(425))}function va(){}var Qd=null,Yd=null;function Xd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Zd=typeof setTimeout=="function"?setTimeout:void 0,Bb=typeof clearTimeout=="function"?clearTimeout:void 0,Dm=typeof Promise=="function"?Promise:void 0,Fb=typeof queueMicrotask=="function"?queueMicrotask:typeof Dm<"u"?function(t){return Dm.resolve(null).then(t).catch(Ub)}:Zd;function Ub(t){setTimeout(function(){throw t})}function Pc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),So(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);So(e)}function rr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Lm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var yi=Math.random().toString(36).slice(2),en="__reactFiber$"+yi,_o="__reactProps$"+yi,Tn="__reactContainer$"+yi,ef="__reactEvents$"+yi,Hb="__reactListeners$"+yi,Vb="__reactHandles$"+yi;function Rr(t){var e=t[en];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Tn]||n[en]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Lm(t);t!==null;){if(n=t[en])return n;t=Lm(t)}return e}t=n,n=t.parentNode}return null}function Yo(t){return t=t[en]||t[Tn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Is(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(O(33))}function Mu(t){return t[_o]||null}var tf=[],js=-1;function yr(t){return{current:t}}function ee(t){0>js||(t.current=tf[js],tf[js]=null,js--)}function Y(t,e){js++,tf[js]=t.current,t.current=e}var hr={},Ue=yr(hr),st=yr(!1),Jr=hr;function ei(t,e){var n=t.type.contextTypes;if(!n)return hr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function it(t){return t=t.childContextTypes,t!=null}function wa(){ee(st),ee(Ue)}function $m(t,e,n){if(Ue.current!==hr)throw Error(O(168));Y(Ue,e),Y(st,n)}function vv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(O(108,NS(t)||"Unknown",s));return oe({},n,r)}function xa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||hr,Jr=Ue.current,Y(Ue,t),Y(st,st.current),!0}function zm(t,e,n){var r=t.stateNode;if(!r)throw Error(O(169));n?(t=vv(t,e,Jr),r.__reactInternalMemoizedMergedChildContext=t,ee(st),ee(Ue),Y(Ue,t)):ee(st),Y(st,n)}var vn=null,Au=!1,Rc=!1;function wv(t){vn===null?vn=[t]:vn.push(t)}function Wb(t){Au=!0,wv(t)}function vr(){if(!Rc&&vn!==null){Rc=!0;var t=0,e=q;try{var n=vn;for(q=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}vn=null,Au=!1}catch(s){throw vn!==null&&(vn=vn.slice(t+1)),V0(Th,vr),s}finally{q=e,Rc=!1}}return null}var Ds=[],Ls=0,ka=null,Sa=0,kt=[],St=0,Gr=null,wn=1,xn="";function Nr(t,e){Ds[Ls++]=Sa,Ds[Ls++]=ka,ka=t,Sa=e}function xv(t,e,n){kt[St++]=wn,kt[St++]=xn,kt[St++]=Gr,Gr=t;var r=wn;t=xn;var s=32-Bt(r)-1;r&=~(1<<s),n+=1;var i=32-Bt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,wn=1<<32-Bt(e)+s|n<<s|r,xn=i+t}else wn=1<<i|n<<s|r,xn=t}function jh(t){t.return!==null&&(Nr(t,1),xv(t,1,0))}function Dh(t){for(;t===ka;)ka=Ds[--Ls],Ds[Ls]=null,Sa=Ds[--Ls],Ds[Ls]=null;for(;t===Gr;)Gr=kt[--St],kt[St]=null,xn=kt[--St],kt[St]=null,wn=kt[--St],kt[St]=null}var ht=null,dt=null,te=!1,Dt=null;function kv(t,e){var n=Et(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Bm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ht=t,dt=rr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ht=t,dt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Gr!==null?{id:wn,overflow:xn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Et(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ht=t,dt=null,!0):!1;default:return!1}}function nf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function rf(t){if(te){var e=dt;if(e){var n=e;if(!Bm(t,e)){if(nf(t))throw Error(O(418));e=rr(n.nextSibling);var r=ht;e&&Bm(t,e)?kv(r,n):(t.flags=t.flags&-4097|2,te=!1,ht=t)}}else{if(nf(t))throw Error(O(418));t.flags=t.flags&-4097|2,te=!1,ht=t}}}function Fm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ht=t}function xl(t){if(t!==ht)return!1;if(!te)return Fm(t),te=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Xd(t.type,t.memoizedProps)),e&&(e=dt)){if(nf(t))throw Sv(),Error(O(418));for(;e;)kv(t,e),e=rr(e.nextSibling)}if(Fm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(O(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){dt=rr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}dt=null}}else dt=ht?rr(t.stateNode.nextSibling):null;return!0}function Sv(){for(var t=dt;t;)t=rr(t.nextSibling)}function ti(){dt=ht=null,te=!1}function Lh(t){Dt===null?Dt=[t]:Dt.push(t)}var Kb=Mn.ReactCurrentBatchConfig;function Mi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(O(309));var r=n.stateNode}if(!r)throw Error(O(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(O(284));if(!n._owner)throw Error(O(290,t))}return t}function kl(t,e){throw t=Object.prototype.toString.call(e),Error(O(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Um(t){var e=t._init;return e(t._payload)}function bv(t){function e(m,v){if(t){var x=m.deletions;x===null?(m.deletions=[v],m.flags|=16):x.push(v)}}function n(m,v){if(!t)return null;for(;v!==null;)e(m,v),v=v.sibling;return null}function r(m,v){for(m=new Map;v!==null;)v.key!==null?m.set(v.key,v):m.set(v.index,v),v=v.sibling;return m}function s(m,v){return m=lr(m,v),m.index=0,m.sibling=null,m}function i(m,v,x){return m.index=x,t?(x=m.alternate,x!==null?(x=x.index,x<v?(m.flags|=2,v):x):(m.flags|=2,v)):(m.flags|=1048576,v)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function l(m,v,x,S){return v===null||v.tag!==6?(v=Bc(x,m.mode,S),v.return=m,v):(v=s(v,x),v.return=m,v)}function a(m,v,x,S){var b=x.type;return b===Ms?c(m,v,x.props.children,S,x.key):v!==null&&(v.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===zn&&Um(b)===v.type)?(S=s(v,x.props),S.ref=Mi(m,v,x),S.return=m,S):(S=ea(x.type,x.key,x.props,null,m.mode,S),S.ref=Mi(m,v,x),S.return=m,S)}function u(m,v,x,S){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=Fc(x,m.mode,S),v.return=m,v):(v=s(v,x.children||[]),v.return=m,v)}function c(m,v,x,S,b){return v===null||v.tag!==7?(v=Ur(x,m.mode,S,b),v.return=m,v):(v=s(v,x),v.return=m,v)}function d(m,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Bc(""+v,m.mode,x),v.return=m,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case cl:return x=ea(v.type,v.key,v.props,null,m.mode,x),x.ref=Mi(m,null,v),x.return=m,x;case Os:return v=Fc(v,m.mode,x),v.return=m,v;case zn:var S=v._init;return d(m,S(v._payload),x)}if(Bi(v)||Ci(v))return v=Ur(v,m.mode,x,null),v.return=m,v;kl(m,v)}return null}function f(m,v,x,S){var b=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return b!==null?null:l(m,v,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case cl:return x.key===b?a(m,v,x,S):null;case Os:return x.key===b?u(m,v,x,S):null;case zn:return b=x._init,f(m,v,b(x._payload),S)}if(Bi(x)||Ci(x))return b!==null?null:c(m,v,x,S,null);kl(m,x)}return null}function h(m,v,x,S,b){if(typeof S=="string"&&S!==""||typeof S=="number")return m=m.get(x)||null,l(v,m,""+S,b);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case cl:return m=m.get(S.key===null?x:S.key)||null,a(v,m,S,b);case Os:return m=m.get(S.key===null?x:S.key)||null,u(v,m,S,b);case zn:var E=S._init;return h(m,v,x,E(S._payload),b)}if(Bi(S)||Ci(S))return m=m.get(x)||null,c(v,m,S,b,null);kl(v,S)}return null}function p(m,v,x,S){for(var b=null,E=null,C=v,T=v=0,I=null;C!==null&&T<x.length;T++){C.index>T?(I=C,C=null):I=C.sibling;var R=f(m,C,x[T],S);if(R===null){C===null&&(C=I);break}t&&C&&R.alternate===null&&e(m,C),v=i(R,v,T),E===null?b=R:E.sibling=R,E=R,C=I}if(T===x.length)return n(m,C),te&&Nr(m,T),b;if(C===null){for(;T<x.length;T++)C=d(m,x[T],S),C!==null&&(v=i(C,v,T),E===null?b=C:E.sibling=C,E=C);return te&&Nr(m,T),b}for(C=r(m,C);T<x.length;T++)I=h(C,m,T,x[T],S),I!==null&&(t&&I.alternate!==null&&C.delete(I.key===null?T:I.key),v=i(I,v,T),E===null?b=I:E.sibling=I,E=I);return t&&C.forEach(function(ve){return e(m,ve)}),te&&Nr(m,T),b}function y(m,v,x,S){var b=Ci(x);if(typeof b!="function")throw Error(O(150));if(x=b.call(x),x==null)throw Error(O(151));for(var E=b=null,C=v,T=v=0,I=null,R=x.next();C!==null&&!R.done;T++,R=x.next()){C.index>T?(I=C,C=null):I=C.sibling;var ve=f(m,C,R.value,S);if(ve===null){C===null&&(C=I);break}t&&C&&ve.alternate===null&&e(m,C),v=i(ve,v,T),E===null?b=ve:E.sibling=ve,E=ve,C=I}if(R.done)return n(m,C),te&&Nr(m,T),b;if(C===null){for(;!R.done;T++,R=x.next())R=d(m,R.value,S),R!==null&&(v=i(R,v,T),E===null?b=R:E.sibling=R,E=R);return te&&Nr(m,T),b}for(C=r(m,C);!R.done;T++,R=x.next())R=h(C,m,T,R.value,S),R!==null&&(t&&R.alternate!==null&&C.delete(R.key===null?T:R.key),v=i(R,v,T),E===null?b=R:E.sibling=R,E=R);return t&&C.forEach(function(on){return e(m,on)}),te&&Nr(m,T),b}function w(m,v,x,S){if(typeof x=="object"&&x!==null&&x.type===Ms&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case cl:e:{for(var b=x.key,E=v;E!==null;){if(E.key===b){if(b=x.type,b===Ms){if(E.tag===7){n(m,E.sibling),v=s(E,x.props.children),v.return=m,m=v;break e}}else if(E.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===zn&&Um(b)===E.type){n(m,E.sibling),v=s(E,x.props),v.ref=Mi(m,E,x),v.return=m,m=v;break e}n(m,E);break}else e(m,E);E=E.sibling}x.type===Ms?(v=Ur(x.props.children,m.mode,S,x.key),v.return=m,m=v):(S=ea(x.type,x.key,x.props,null,m.mode,S),S.ref=Mi(m,v,x),S.return=m,m=S)}return o(m);case Os:e:{for(E=x.key;v!==null;){if(v.key===E)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(m,v.sibling),v=s(v,x.children||[]),v.return=m,m=v;break e}else{n(m,v);break}else e(m,v);v=v.sibling}v=Fc(x,m.mode,S),v.return=m,m=v}return o(m);case zn:return E=x._init,w(m,v,E(x._payload),S)}if(Bi(x))return p(m,v,x,S);if(Ci(x))return y(m,v,x,S);kl(m,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(m,v.sibling),v=s(v,x),v.return=m,m=v):(n(m,v),v=Bc(x,m.mode,S),v.return=m,m=v),o(m)):n(m,v)}return w}var ni=bv(!0),Ev=bv(!1),ba=yr(null),Ea=null,$s=null,$h=null;function zh(){$h=$s=Ea=null}function Bh(t){var e=ba.current;ee(ba),t._currentValue=e}function sf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ks(t,e){Ea=t,$h=$s=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(rt=!0),t.firstContext=null)}function Ot(t){var e=t._currentValue;if($h!==t)if(t={context:t,memoizedValue:e,next:null},$s===null){if(Ea===null)throw Error(O(308));$s=t,Ea.dependencies={lanes:0,firstContext:t}}else $s=$s.next=t;return e}var Ir=null;function Fh(t){Ir===null?Ir=[t]:Ir.push(t)}function Cv(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Fh(e)):(n.next=s.next,s.next=n),e.interleaved=n,_n(t,r)}function _n(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Bn=!1;function Uh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Sn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function sr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,W&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,_n(t,n)}return s=r.interleaved,s===null?(e.next=e,Fh(r)):(e.next=s.next,s.next=e),r.interleaved=e,_n(t,n)}function Jl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_h(t,n)}}function Hm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ca(t,e,n,r){var s=t.updateQueue;Bn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?i=u:o.next=u,o=a;var c=t.alternate;c!==null&&(c=c.updateQueue,l=c.lastBaseUpdate,l!==o&&(l===null?c.firstBaseUpdate=u:l.next=u,c.lastBaseUpdate=a))}if(i!==null){var d=s.baseState;o=0,c=u=a=null,l=i;do{var f=l.lane,h=l.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:h,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=t,y=l;switch(f=e,h=n,y.tag){case 1:if(p=y.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=y.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=oe({},d,f);break e;case 2:Bn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else h={eventTime:h,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},c===null?(u=c=h,a=d):c=c.next=h,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(c===null&&(a=d),s.baseState=a,s.firstBaseUpdate=u,s.lastBaseUpdate=c,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Yr|=o,t.lanes=o,t.memoizedState=d}}function Vm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(O(191,s));s.call(r)}}}var Xo={},nn=yr(Xo),No=yr(Xo),Oo=yr(Xo);function jr(t){if(t===Xo)throw Error(O(174));return t}function Hh(t,e){switch(Y(Oo,e),Y(No,t),Y(nn,Xo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$d(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$d(e,t)}ee(nn),Y(nn,e)}function ri(){ee(nn),ee(No),ee(Oo)}function _v(t){jr(Oo.current);var e=jr(nn.current),n=$d(e,t.type);e!==n&&(Y(No,t),Y(nn,n))}function Vh(t){No.current===t&&(ee(nn),ee(No))}var re=yr(0);function Ta(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ic=[];function Wh(){for(var t=0;t<Ic.length;t++)Ic[t]._workInProgressVersionPrimary=null;Ic.length=0}var Gl=Mn.ReactCurrentDispatcher,jc=Mn.ReactCurrentBatchConfig,Qr=0,ie=null,xe=null,Ee=null,_a=!1,Zi=!1,Mo=0,qb=0;function Le(){throw Error(O(321))}function Kh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ht(t[n],e[n]))return!1;return!0}function qh(t,e,n,r,s,i){if(Qr=i,ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Gl.current=t===null||t.memoizedState===null?Yb:Xb,t=n(r,s),Zi){i=0;do{if(Zi=!1,Mo=0,25<=i)throw Error(O(301));i+=1,Ee=xe=null,e.updateQueue=null,Gl.current=Zb,t=n(r,s)}while(Zi)}if(Gl.current=Na,e=xe!==null&&xe.next!==null,Qr=0,Ee=xe=ie=null,_a=!1,e)throw Error(O(300));return t}function Jh(){var t=Mo!==0;return Mo=0,t}function Qt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ee===null?ie.memoizedState=Ee=t:Ee=Ee.next=t,Ee}function Mt(){if(xe===null){var t=ie.alternate;t=t!==null?t.memoizedState:null}else t=xe.next;var e=Ee===null?ie.memoizedState:Ee.next;if(e!==null)Ee=e,xe=t;else{if(t===null)throw Error(O(310));xe=t,t={memoizedState:xe.memoizedState,baseState:xe.baseState,baseQueue:xe.baseQueue,queue:xe.queue,next:null},Ee===null?ie.memoizedState=Ee=t:Ee=Ee.next=t}return Ee}function Ao(t,e){return typeof e=="function"?e(t):e}function Dc(t){var e=Mt(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var r=xe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,a=null,u=i;do{var c=u.lane;if((Qr&c)===c)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=d,o=r):a=a.next=d,ie.lanes|=c,Yr|=c}u=u.next}while(u!==null&&u!==i);a===null?o=r:a.next=l,Ht(r,e.memoizedState)||(rt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ie.lanes|=i,Yr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Lc(t){var e=Mt(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Ht(i,e.memoizedState)||(rt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Nv(){}function Ov(t,e){var n=ie,r=Mt(),s=e(),i=!Ht(r.memoizedState,s);if(i&&(r.memoizedState=s,rt=!0),r=r.queue,Gh(Pv.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ee!==null&&Ee.memoizedState.tag&1){if(n.flags|=2048,Po(9,Av.bind(null,n,r,s,e),void 0,null),Te===null)throw Error(O(349));Qr&30||Mv(n,e,s)}return s}function Mv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ie.updateQueue,e===null?(e={lastEffect:null,stores:null},ie.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Av(t,e,n,r){e.value=n,e.getSnapshot=r,Rv(e)&&Iv(t)}function Pv(t,e,n){return n(function(){Rv(e)&&Iv(t)})}function Rv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ht(t,n)}catch{return!0}}function Iv(t){var e=_n(t,1);e!==null&&Ft(e,t,1,-1)}function Wm(t){var e=Qt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ao,lastRenderedState:t},e.queue=t,t=t.dispatch=Qb.bind(null,ie,t),[e.memoizedState,t]}function Po(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ie.updateQueue,e===null?(e={lastEffect:null,stores:null},ie.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function jv(){return Mt().memoizedState}function Ql(t,e,n,r){var s=Qt();ie.flags|=t,s.memoizedState=Po(1|e,n,void 0,r===void 0?null:r)}function Pu(t,e,n,r){var s=Mt();r=r===void 0?null:r;var i=void 0;if(xe!==null){var o=xe.memoizedState;if(i=o.destroy,r!==null&&Kh(r,o.deps)){s.memoizedState=Po(e,n,i,r);return}}ie.flags|=t,s.memoizedState=Po(1|e,n,i,r)}function Km(t,e){return Ql(8390656,8,t,e)}function Gh(t,e){return Pu(2048,8,t,e)}function Dv(t,e){return Pu(4,2,t,e)}function Lv(t,e){return Pu(4,4,t,e)}function $v(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function zv(t,e,n){return n=n!=null?n.concat([t]):null,Pu(4,4,$v.bind(null,e,t),n)}function Qh(){}function Bv(t,e){var n=Mt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Fv(t,e){var n=Mt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Uv(t,e,n){return Qr&21?(Ht(n,e)||(n=q0(),ie.lanes|=n,Yr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,rt=!0),t.memoizedState=n)}function Jb(t,e){var n=q;q=n!==0&&4>n?n:4,t(!0);var r=jc.transition;jc.transition={};try{t(!1),e()}finally{q=n,jc.transition=r}}function Hv(){return Mt().memoizedState}function Gb(t,e,n){var r=or(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Vv(t))Wv(e,n);else if(n=Cv(t,e,n,r),n!==null){var s=qe();Ft(n,t,r,s),Kv(n,e,r)}}function Qb(t,e,n){var r=or(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Vv(t))Wv(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Ht(l,o)){var a=e.interleaved;a===null?(s.next=s,Fh(e)):(s.next=a.next,a.next=s),e.interleaved=s;return}}catch{}finally{}n=Cv(t,e,s,r),n!==null&&(s=qe(),Ft(n,t,r,s),Kv(n,e,r))}}function Vv(t){var e=t.alternate;return t===ie||e!==null&&e===ie}function Wv(t,e){Zi=_a=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Kv(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_h(t,n)}}var Na={readContext:Ot,useCallback:Le,useContext:Le,useEffect:Le,useImperativeHandle:Le,useInsertionEffect:Le,useLayoutEffect:Le,useMemo:Le,useReducer:Le,useRef:Le,useState:Le,useDebugValue:Le,useDeferredValue:Le,useTransition:Le,useMutableSource:Le,useSyncExternalStore:Le,useId:Le,unstable_isNewReconciler:!1},Yb={readContext:Ot,useCallback:function(t,e){return Qt().memoizedState=[t,e===void 0?null:e],t},useContext:Ot,useEffect:Km,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ql(4194308,4,$v.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ql(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ql(4,2,t,e)},useMemo:function(t,e){var n=Qt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Qt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Gb.bind(null,ie,t),[r.memoizedState,t]},useRef:function(t){var e=Qt();return t={current:t},e.memoizedState=t},useState:Wm,useDebugValue:Qh,useDeferredValue:function(t){return Qt().memoizedState=t},useTransition:function(){var t=Wm(!1),e=t[0];return t=Jb.bind(null,t[1]),Qt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ie,s=Qt();if(te){if(n===void 0)throw Error(O(407));n=n()}else{if(n=e(),Te===null)throw Error(O(349));Qr&30||Mv(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Km(Pv.bind(null,r,i,t),[t]),r.flags|=2048,Po(9,Av.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Qt(),e=Te.identifierPrefix;if(te){var n=xn,r=wn;n=(r&~(1<<32-Bt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Mo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=qb++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Xb={readContext:Ot,useCallback:Bv,useContext:Ot,useEffect:Gh,useImperativeHandle:zv,useInsertionEffect:Dv,useLayoutEffect:Lv,useMemo:Fv,useReducer:Dc,useRef:jv,useState:function(){return Dc(Ao)},useDebugValue:Qh,useDeferredValue:function(t){var e=Mt();return Uv(e,xe.memoizedState,t)},useTransition:function(){var t=Dc(Ao)[0],e=Mt().memoizedState;return[t,e]},useMutableSource:Nv,useSyncExternalStore:Ov,useId:Hv,unstable_isNewReconciler:!1},Zb={readContext:Ot,useCallback:Bv,useContext:Ot,useEffect:Gh,useImperativeHandle:zv,useInsertionEffect:Dv,useLayoutEffect:Lv,useMemo:Fv,useReducer:Lc,useRef:jv,useState:function(){return Lc(Ao)},useDebugValue:Qh,useDeferredValue:function(t){var e=Mt();return xe===null?e.memoizedState=t:Uv(e,xe.memoizedState,t)},useTransition:function(){var t=Lc(Ao)[0],e=Mt().memoizedState;return[t,e]},useMutableSource:Nv,useSyncExternalStore:Ov,useId:Hv,unstable_isNewReconciler:!1};function Rt(t,e){if(t&&t.defaultProps){e=oe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function of(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:oe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ru={isMounted:function(t){return(t=t._reactInternals)?is(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=qe(),s=or(t),i=Sn(r,s);i.payload=e,n!=null&&(i.callback=n),e=sr(t,i,s),e!==null&&(Ft(e,t,s,r),Jl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=qe(),s=or(t),i=Sn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=sr(t,i,s),e!==null&&(Ft(e,t,s,r),Jl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=qe(),r=or(t),s=Sn(n,r);s.tag=2,e!=null&&(s.callback=e),e=sr(t,s,r),e!==null&&(Ft(e,t,r,n),Jl(e,t,r))}};function qm(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Eo(n,r)||!Eo(s,i):!0}function qv(t,e,n){var r=!1,s=hr,i=e.contextType;return typeof i=="object"&&i!==null?i=Ot(i):(s=it(e)?Jr:Ue.current,r=e.contextTypes,i=(r=r!=null)?ei(t,s):hr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ru,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Jm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ru.enqueueReplaceState(e,e.state,null)}function lf(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Uh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Ot(i):(i=it(e)?Jr:Ue.current,s.context=ei(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(of(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Ru.enqueueReplaceState(s,s.state,null),Ca(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function si(t,e){try{var n="",r=e;do n+=_S(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function $c(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function af(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var eE=typeof WeakMap=="function"?WeakMap:Map;function Jv(t,e,n){n=Sn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ma||(Ma=!0,vf=r),af(t,e)},n}function Gv(t,e,n){n=Sn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){af(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){af(t,e),typeof r!="function"&&(ir===null?ir=new Set([this]):ir.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Gm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new eE;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=pE.bind(null,t,e,n),e.then(t,t))}function Qm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ym(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Sn(-1,1),e.tag=2,sr(n,e,1))),n.lanes|=1),t)}var tE=Mn.ReactCurrentOwner,rt=!1;function Ve(t,e,n,r){e.child=t===null?Ev(e,null,n,r):ni(e,t.child,n,r)}function Xm(t,e,n,r,s){n=n.render;var i=e.ref;return Ks(e,s),r=qh(t,e,n,r,i,s),n=Jh(),t!==null&&!rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Nn(t,e,s)):(te&&n&&jh(e),e.flags|=1,Ve(t,e,r,s),e.child)}function Zm(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!sp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Qv(t,e,i,r,s)):(t=ea(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Eo,n(o,r)&&t.ref===e.ref)return Nn(t,e,s)}return e.flags|=1,t=lr(i,r),t.ref=e.ref,t.return=e,e.child=t}function Qv(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Eo(i,r)&&t.ref===e.ref)if(rt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(rt=!0);else return e.lanes=t.lanes,Nn(t,e,s)}return uf(t,e,n,r,s)}function Yv(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Y(Bs,ut),ut|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Y(Bs,ut),ut|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Y(Bs,ut),ut|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Y(Bs,ut),ut|=r;return Ve(t,e,s,n),e.child}function Xv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function uf(t,e,n,r,s){var i=it(n)?Jr:Ue.current;return i=ei(e,i),Ks(e,s),n=qh(t,e,n,r,i,s),r=Jh(),t!==null&&!rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Nn(t,e,s)):(te&&r&&jh(e),e.flags|=1,Ve(t,e,n,s),e.child)}function eg(t,e,n,r,s){if(it(n)){var i=!0;xa(e)}else i=!1;if(Ks(e,s),e.stateNode===null)Yl(t,e),qv(e,n,r),lf(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ot(u):(u=it(n)?Jr:Ue.current,u=ei(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==u)&&Jm(e,o,r,u),Bn=!1;var f=e.memoizedState;o.state=f,Ca(e,r,o,s),a=e.memoizedState,l!==r||f!==a||st.current||Bn?(typeof c=="function"&&(of(e,n,c,r),a=e.memoizedState),(l=Bn||qm(e,n,l,r,f,a,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Tv(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Rt(e.type,l),o.props=u,d=e.pendingProps,f=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=Ot(a):(a=it(n)?Jr:Ue.current,a=ei(e,a));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||f!==a)&&Jm(e,o,r,a),Bn=!1,f=e.memoizedState,o.state=f,Ca(e,r,o,s);var p=e.memoizedState;l!==d||f!==p||st.current||Bn?(typeof h=="function"&&(of(e,n,h,r),p=e.memoizedState),(u=Bn||qm(e,n,u,r,f,p,a)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=a,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return cf(t,e,n,r,i,s)}function cf(t,e,n,r,s,i){Xv(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&zm(e,n,!1),Nn(t,e,i);r=e.stateNode,tE.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ni(e,t.child,null,i),e.child=ni(e,null,l,i)):Ve(t,e,l,i),e.memoizedState=r.state,s&&zm(e,n,!0),e.child}function Zv(t){var e=t.stateNode;e.pendingContext?$m(t,e.pendingContext,e.pendingContext!==e.context):e.context&&$m(t,e.context,!1),Hh(t,e.containerInfo)}function tg(t,e,n,r,s){return ti(),Lh(s),e.flags|=256,Ve(t,e,n,r),e.child}var df={dehydrated:null,treeContext:null,retryLane:0};function ff(t){return{baseLanes:t,cachePool:null,transitions:null}}function e1(t,e,n){var r=e.pendingProps,s=re.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Y(re,s&1),t===null)return rf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Du(o,r,0,null),t=Ur(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=ff(n),e.memoizedState=df,t):Yh(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return nE(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=lr(s,a),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=lr(l,i):(i=Ur(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?ff(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=df,r}return i=t.child,t=i.sibling,r=lr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Yh(t,e){return e=Du({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Sl(t,e,n,r){return r!==null&&Lh(r),ni(e,t.child,null,n),t=Yh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function nE(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=$c(Error(O(422))),Sl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Du({mode:"visible",children:r.children},s,0,null),i=Ur(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ni(e,t.child,null,o),e.child.memoizedState=ff(o),e.memoizedState=df,i);if(!(e.mode&1))return Sl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(O(419)),r=$c(i,r,void 0),Sl(t,e,o,r)}if(l=(o&t.childLanes)!==0,rt||l){if(r=Te,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,_n(t,s),Ft(r,t,s,-1))}return rp(),r=$c(Error(O(421))),Sl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=mE.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,dt=rr(s.nextSibling),ht=e,te=!0,Dt=null,t!==null&&(kt[St++]=wn,kt[St++]=xn,kt[St++]=Gr,wn=t.id,xn=t.overflow,Gr=e),e=Yh(e,r.children),e.flags|=4096,e)}function ng(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),sf(t.return,e,n)}function zc(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function t1(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Ve(t,e,r.children,n),r=re.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ng(t,n,e);else if(t.tag===19)ng(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Y(re,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ta(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),zc(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ta(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}zc(e,!0,n,null,i);break;case"together":zc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Yl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Nn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Yr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(O(153));if(e.child!==null){for(t=e.child,n=lr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=lr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function rE(t,e,n){switch(e.tag){case 3:Zv(e),ti();break;case 5:_v(e);break;case 1:it(e.type)&&xa(e);break;case 4:Hh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Y(ba,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Y(re,re.current&1),e.flags|=128,null):n&e.child.childLanes?e1(t,e,n):(Y(re,re.current&1),t=Nn(t,e,n),t!==null?t.sibling:null);Y(re,re.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return t1(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Y(re,re.current),r)break;return null;case 22:case 23:return e.lanes=0,Yv(t,e,n)}return Nn(t,e,n)}var n1,hf,r1,s1;n1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};hf=function(){};r1=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,jr(nn.current);var i=null;switch(n){case"input":s=Id(t,s),r=Id(t,r),i=[];break;case"select":s=oe({},s,{value:void 0}),r=oe({},r,{value:void 0}),i=[];break;case"textarea":s=Ld(t,s),r=Ld(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=va)}zd(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(yo.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var a=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(i||(i=[]),i.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(i=i||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(i=i||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(yo.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&X("scroll",t),i||l===a||(i=[])):(i=i||[]).push(u,a))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};s1=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ai(t,e){if(!te)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function $e(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function sE(t,e,n){var r=e.pendingProps;switch(Dh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $e(e),null;case 1:return it(e.type)&&wa(),$e(e),null;case 3:return r=e.stateNode,ri(),ee(st),ee(Ue),Wh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(xl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Dt!==null&&(kf(Dt),Dt=null))),hf(t,e),$e(e),null;case 5:Vh(e);var s=jr(Oo.current);if(n=e.type,t!==null&&e.stateNode!=null)r1(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(O(166));return $e(e),null}if(t=jr(nn.current),xl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[en]=e,r[_o]=i,t=(e.mode&1)!==0,n){case"dialog":X("cancel",r),X("close",r);break;case"iframe":case"object":case"embed":X("load",r);break;case"video":case"audio":for(s=0;s<Ui.length;s++)X(Ui[s],r);break;case"source":X("error",r);break;case"img":case"image":case"link":X("error",r),X("load",r);break;case"details":X("toggle",r);break;case"input":dm(r,i),X("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},X("invalid",r);break;case"textarea":hm(r,i),X("invalid",r)}zd(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&wl(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&wl(r.textContent,l,t),s=["children",""+l]):yo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&X("scroll",r)}switch(n){case"input":dl(r),fm(r,i,!0);break;case"textarea":dl(r),pm(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=va)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=P0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[en]=e,t[_o]=r,n1(t,e,!1,!1),e.stateNode=t;e:{switch(o=Bd(n,r),n){case"dialog":X("cancel",t),X("close",t),s=r;break;case"iframe":case"object":case"embed":X("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ui.length;s++)X(Ui[s],t);s=r;break;case"source":X("error",t),s=r;break;case"img":case"image":case"link":X("error",t),X("load",t),s=r;break;case"details":X("toggle",t),s=r;break;case"input":dm(t,r),s=Id(t,r),X("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=oe({},r,{value:void 0}),X("invalid",t);break;case"textarea":hm(t,r),s=Ld(t,r),X("invalid",t);break;default:s=r}zd(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var a=l[i];i==="style"?j0(t,a):i==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&R0(t,a)):i==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&vo(t,a):typeof a=="number"&&vo(t,""+a):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(yo.hasOwnProperty(i)?a!=null&&i==="onScroll"&&X("scroll",t):a!=null&&kh(t,i,a,o))}switch(n){case"input":dl(t),fm(t,r,!1);break;case"textarea":dl(t),pm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+fr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Us(t,!!r.multiple,i,!1):r.defaultValue!=null&&Us(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=va)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return $e(e),null;case 6:if(t&&e.stateNode!=null)s1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(O(166));if(n=jr(Oo.current),jr(nn.current),xl(e)){if(r=e.stateNode,n=e.memoizedProps,r[en]=e,(i=r.nodeValue!==n)&&(t=ht,t!==null))switch(t.tag){case 3:wl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&wl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[en]=e,e.stateNode=r}return $e(e),null;case 13:if(ee(re),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(te&&dt!==null&&e.mode&1&&!(e.flags&128))Sv(),ti(),e.flags|=98560,i=!1;else if(i=xl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(O(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(O(317));i[en]=e}else ti(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;$e(e),i=!1}else Dt!==null&&(kf(Dt),Dt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||re.current&1?ke===0&&(ke=3):rp())),e.updateQueue!==null&&(e.flags|=4),$e(e),null);case 4:return ri(),hf(t,e),t===null&&Co(e.stateNode.containerInfo),$e(e),null;case 10:return Bh(e.type._context),$e(e),null;case 17:return it(e.type)&&wa(),$e(e),null;case 19:if(ee(re),i=e.memoizedState,i===null)return $e(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ai(i,!1);else{if(ke!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ta(t),o!==null){for(e.flags|=128,Ai(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Y(re,re.current&1|2),e.child}t=t.sibling}i.tail!==null&&fe()>ii&&(e.flags|=128,r=!0,Ai(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ta(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ai(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!te)return $e(e),null}else 2*fe()-i.renderingStartTime>ii&&n!==1073741824&&(e.flags|=128,r=!0,Ai(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=fe(),e.sibling=null,n=re.current,Y(re,r?n&1|2:n&1),e):($e(e),null);case 22:case 23:return np(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ut&1073741824&&($e(e),e.subtreeFlags&6&&(e.flags|=8192)):$e(e),null;case 24:return null;case 25:return null}throw Error(O(156,e.tag))}function iE(t,e){switch(Dh(e),e.tag){case 1:return it(e.type)&&wa(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ri(),ee(st),ee(Ue),Wh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Vh(e),null;case 13:if(ee(re),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(O(340));ti()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ee(re),null;case 4:return ri(),null;case 10:return Bh(e.type._context),null;case 22:case 23:return np(),null;case 24:return null;default:return null}}var bl=!1,Be=!1,oE=typeof WeakSet=="function"?WeakSet:Set,A=null;function zs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ae(t,e,r)}else n.current=null}function pf(t,e,n){try{n()}catch(r){ae(t,e,r)}}var rg=!1;function lE(t,e){if(Qd=ma,t=uv(),Ih(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,c=0,d=t,f=null;t:for(;;){for(var h;d!==n||s!==0&&d.nodeType!==3||(l=o+s),d!==i||r!==0&&d.nodeType!==3||(a=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++u===s&&(l=o),f===i&&++c===r&&(a=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Yd={focusedElem:t,selectionRange:n},ma=!1,A=e;A!==null;)if(e=A,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,A=t;else for(;A!==null;){e=A;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var y=p.memoizedProps,w=p.memoizedState,m=e.stateNode,v=m.getSnapshotBeforeUpdate(e.elementType===e.type?y:Rt(e.type,y),w);m.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(S){ae(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,A=t;break}A=e.return}return p=rg,rg=!1,p}function eo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&pf(e,n,i)}s=s.next}while(s!==r)}}function Iu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function mf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function i1(t){var e=t.alternate;e!==null&&(t.alternate=null,i1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[en],delete e[_o],delete e[ef],delete e[Hb],delete e[Vb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function o1(t){return t.tag===5||t.tag===3||t.tag===4}function sg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||o1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=va));else if(r!==4&&(t=t.child,t!==null))for(gf(t,e,n),t=t.sibling;t!==null;)gf(t,e,n),t=t.sibling}function yf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(yf(t,e,n),t=t.sibling;t!==null;)yf(t,e,n),t=t.sibling}var Me=null,It=!1;function Rn(t,e,n){for(n=n.child;n!==null;)l1(t,e,n),n=n.sibling}function l1(t,e,n){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(Tu,n)}catch{}switch(n.tag){case 5:Be||zs(n,e);case 6:var r=Me,s=It;Me=null,Rn(t,e,n),Me=r,It=s,Me!==null&&(It?(t=Me,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Me.removeChild(n.stateNode));break;case 18:Me!==null&&(It?(t=Me,n=n.stateNode,t.nodeType===8?Pc(t.parentNode,n):t.nodeType===1&&Pc(t,n),So(t)):Pc(Me,n.stateNode));break;case 4:r=Me,s=It,Me=n.stateNode.containerInfo,It=!0,Rn(t,e,n),Me=r,It=s;break;case 0:case 11:case 14:case 15:if(!Be&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&pf(n,e,o),s=s.next}while(s!==r)}Rn(t,e,n);break;case 1:if(!Be&&(zs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ae(n,e,l)}Rn(t,e,n);break;case 21:Rn(t,e,n);break;case 22:n.mode&1?(Be=(r=Be)||n.memoizedState!==null,Rn(t,e,n),Be=r):Rn(t,e,n);break;default:Rn(t,e,n)}}function ig(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new oE),e.forEach(function(r){var s=gE.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function At(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Me=l.stateNode,It=!1;break e;case 3:Me=l.stateNode.containerInfo,It=!0;break e;case 4:Me=l.stateNode.containerInfo,It=!0;break e}l=l.return}if(Me===null)throw Error(O(160));l1(i,o,s),Me=null,It=!1;var a=s.alternate;a!==null&&(a.return=null),s.return=null}catch(u){ae(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)a1(e,t),e=e.sibling}function a1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(At(e,t),Gt(t),r&4){try{eo(3,t,t.return),Iu(3,t)}catch(y){ae(t,t.return,y)}try{eo(5,t,t.return)}catch(y){ae(t,t.return,y)}}break;case 1:At(e,t),Gt(t),r&512&&n!==null&&zs(n,n.return);break;case 5:if(At(e,t),Gt(t),r&512&&n!==null&&zs(n,n.return),t.flags&32){var s=t.stateNode;try{vo(s,"")}catch(y){ae(t,t.return,y)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&M0(s,i),Bd(l,o);var u=Bd(l,i);for(o=0;o<a.length;o+=2){var c=a[o],d=a[o+1];c==="style"?j0(s,d):c==="dangerouslySetInnerHTML"?R0(s,d):c==="children"?vo(s,d):kh(s,c,d,u)}switch(l){case"input":jd(s,i);break;case"textarea":A0(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var h=i.value;h!=null?Us(s,!!i.multiple,h,!1):f!==!!i.multiple&&(i.defaultValue!=null?Us(s,!!i.multiple,i.defaultValue,!0):Us(s,!!i.multiple,i.multiple?[]:"",!1))}s[_o]=i}catch(y){ae(t,t.return,y)}}break;case 6:if(At(e,t),Gt(t),r&4){if(t.stateNode===null)throw Error(O(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){ae(t,t.return,y)}}break;case 3:if(At(e,t),Gt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{So(e.containerInfo)}catch(y){ae(t,t.return,y)}break;case 4:At(e,t),Gt(t);break;case 13:At(e,t),Gt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(ep=fe())),r&4&&ig(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Be=(u=Be)||c,At(e,t),Be=u):At(e,t),Gt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(A=t,c=t.child;c!==null;){for(d=A=c;A!==null;){switch(f=A,h=f.child,f.tag){case 0:case 11:case 14:case 15:eo(4,f,f.return);break;case 1:zs(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(y){ae(r,n,y)}}break;case 5:zs(f,f.return);break;case 22:if(f.memoizedState!==null){lg(d);continue}}h!==null?(h.return=f,A=h):lg(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{s=d.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=d.stateNode,a=d.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=I0("display",o))}catch(y){ae(t,t.return,y)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(y){ae(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:At(e,t),Gt(t),r&4&&ig(t);break;case 21:break;default:At(e,t),Gt(t)}}function Gt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(o1(n)){var r=n;break e}n=n.return}throw Error(O(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(vo(s,""),r.flags&=-33);var i=sg(t);yf(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=sg(t);gf(t,l,o);break;default:throw Error(O(161))}}catch(a){ae(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function aE(t,e,n){A=t,u1(t)}function u1(t,e,n){for(var r=(t.mode&1)!==0;A!==null;){var s=A,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||bl;if(!o){var l=s.alternate,a=l!==null&&l.memoizedState!==null||Be;l=bl;var u=Be;if(bl=o,(Be=a)&&!u)for(A=s;A!==null;)o=A,a=o.child,o.tag===22&&o.memoizedState!==null?ag(s):a!==null?(a.return=o,A=a):ag(s);for(;i!==null;)A=i,u1(i),i=i.sibling;A=s,bl=l,Be=u}og(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,A=i):og(t)}}function og(t){for(;A!==null;){var e=A;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Be||Iu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Be)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Rt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Vm(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Vm(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&So(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}Be||e.flags&512&&mf(e)}catch(f){ae(e,e.return,f)}}if(e===t){A=null;break}if(n=e.sibling,n!==null){n.return=e.return,A=n;break}A=e.return}}function lg(t){for(;A!==null;){var e=A;if(e===t){A=null;break}var n=e.sibling;if(n!==null){n.return=e.return,A=n;break}A=e.return}}function ag(t){for(;A!==null;){var e=A;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Iu(4,e)}catch(a){ae(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(a){ae(e,s,a)}}var i=e.return;try{mf(e)}catch(a){ae(e,i,a)}break;case 5:var o=e.return;try{mf(e)}catch(a){ae(e,o,a)}}}catch(a){ae(e,e.return,a)}if(e===t){A=null;break}var l=e.sibling;if(l!==null){l.return=e.return,A=l;break}A=e.return}}var uE=Math.ceil,Oa=Mn.ReactCurrentDispatcher,Xh=Mn.ReactCurrentOwner,Ct=Mn.ReactCurrentBatchConfig,W=0,Te=null,pe=null,je=0,ut=0,Bs=yr(0),ke=0,Ro=null,Yr=0,ju=0,Zh=0,to=null,et=null,ep=0,ii=1/0,pn=null,Ma=!1,vf=null,ir=null,El=!1,Qn=null,Aa=0,no=0,wf=null,Xl=-1,Zl=0;function qe(){return W&6?fe():Xl!==-1?Xl:Xl=fe()}function or(t){return t.mode&1?W&2&&je!==0?je&-je:Kb.transition!==null?(Zl===0&&(Zl=q0()),Zl):(t=q,t!==0||(t=window.event,t=t===void 0?16:ev(t.type)),t):1}function Ft(t,e,n,r){if(50<no)throw no=0,wf=null,Error(O(185));Go(t,n,r),(!(W&2)||t!==Te)&&(t===Te&&(!(W&2)&&(ju|=n),ke===4&&Wn(t,je)),ot(t,r),n===1&&W===0&&!(e.mode&1)&&(ii=fe()+500,Au&&vr()))}function ot(t,e){var n=t.callbackNode;KS(t,e);var r=pa(t,t===Te?je:0);if(r===0)n!==null&&ym(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ym(n),e===1)t.tag===0?Wb(ug.bind(null,t)):wv(ug.bind(null,t)),Fb(function(){!(W&6)&&vr()}),n=null;else{switch(J0(r)){case 1:n=Th;break;case 4:n=W0;break;case 16:n=ha;break;case 536870912:n=K0;break;default:n=ha}n=y1(n,c1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function c1(t,e){if(Xl=-1,Zl=0,W&6)throw Error(O(327));var n=t.callbackNode;if(qs()&&t.callbackNode!==n)return null;var r=pa(t,t===Te?je:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Pa(t,r);else{e=r;var s=W;W|=2;var i=f1();(Te!==t||je!==e)&&(pn=null,ii=fe()+500,Fr(t,e));do try{fE();break}catch(l){d1(t,l)}while(!0);zh(),Oa.current=i,W=s,pe!==null?e=0:(Te=null,je=0,e=ke)}if(e!==0){if(e===2&&(s=Wd(t),s!==0&&(r=s,e=xf(t,s))),e===1)throw n=Ro,Fr(t,0),Wn(t,r),ot(t,fe()),n;if(e===6)Wn(t,r);else{if(s=t.current.alternate,!(r&30)&&!cE(s)&&(e=Pa(t,r),e===2&&(i=Wd(t),i!==0&&(r=i,e=xf(t,i))),e===1))throw n=Ro,Fr(t,0),Wn(t,r),ot(t,fe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(O(345));case 2:Or(t,et,pn);break;case 3:if(Wn(t,r),(r&130023424)===r&&(e=ep+500-fe(),10<e)){if(pa(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){qe(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Zd(Or.bind(null,t,et,pn),e);break}Or(t,et,pn);break;case 4:if(Wn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Bt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*uE(r/1960))-r,10<r){t.timeoutHandle=Zd(Or.bind(null,t,et,pn),r);break}Or(t,et,pn);break;case 5:Or(t,et,pn);break;default:throw Error(O(329))}}}return ot(t,fe()),t.callbackNode===n?c1.bind(null,t):null}function xf(t,e){var n=to;return t.current.memoizedState.isDehydrated&&(Fr(t,e).flags|=256),t=Pa(t,e),t!==2&&(e=et,et=n,e!==null&&kf(e)),t}function kf(t){et===null?et=t:et.push.apply(et,t)}function cE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ht(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Wn(t,e){for(e&=~Zh,e&=~ju,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Bt(e),r=1<<n;t[n]=-1,e&=~r}}function ug(t){if(W&6)throw Error(O(327));qs();var e=pa(t,0);if(!(e&1))return ot(t,fe()),null;var n=Pa(t,e);if(t.tag!==0&&n===2){var r=Wd(t);r!==0&&(e=r,n=xf(t,r))}if(n===1)throw n=Ro,Fr(t,0),Wn(t,e),ot(t,fe()),n;if(n===6)throw Error(O(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Or(t,et,pn),ot(t,fe()),null}function tp(t,e){var n=W;W|=1;try{return t(e)}finally{W=n,W===0&&(ii=fe()+500,Au&&vr())}}function Xr(t){Qn!==null&&Qn.tag===0&&!(W&6)&&qs();var e=W;W|=1;var n=Ct.transition,r=q;try{if(Ct.transition=null,q=1,t)return t()}finally{q=r,Ct.transition=n,W=e,!(W&6)&&vr()}}function np(){ut=Bs.current,ee(Bs)}function Fr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Bb(n)),pe!==null)for(n=pe.return;n!==null;){var r=n;switch(Dh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&wa();break;case 3:ri(),ee(st),ee(Ue),Wh();break;case 5:Vh(r);break;case 4:ri();break;case 13:ee(re);break;case 19:ee(re);break;case 10:Bh(r.type._context);break;case 22:case 23:np()}n=n.return}if(Te=t,pe=t=lr(t.current,null),je=ut=e,ke=0,Ro=null,Zh=ju=Yr=0,et=to=null,Ir!==null){for(e=0;e<Ir.length;e++)if(n=Ir[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ir=null}return t}function d1(t,e){do{var n=pe;try{if(zh(),Gl.current=Na,_a){for(var r=ie.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}_a=!1}if(Qr=0,Ee=xe=ie=null,Zi=!1,Mo=0,Xh.current=null,n===null||n.return===null){ke=1,Ro=e,pe=null;break}e:{var i=t,o=n.return,l=n,a=e;if(e=je,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,c=l,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=Qm(o);if(h!==null){h.flags&=-257,Ym(h,o,l,i,e),h.mode&1&&Gm(i,u,e),e=h,a=u;var p=e.updateQueue;if(p===null){var y=new Set;y.add(a),e.updateQueue=y}else p.add(a);break e}else{if(!(e&1)){Gm(i,u,e),rp();break e}a=Error(O(426))}}else if(te&&l.mode&1){var w=Qm(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Ym(w,o,l,i,e),Lh(si(a,l));break e}}i=a=si(a,l),ke!==4&&(ke=2),to===null?to=[i]:to.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var m=Jv(i,a,e);Hm(i,m);break e;case 1:l=a;var v=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ir===null||!ir.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var S=Gv(i,l,e);Hm(i,S);break e}}i=i.return}while(i!==null)}p1(n)}catch(b){e=b,pe===n&&n!==null&&(pe=n=n.return);continue}break}while(!0)}function f1(){var t=Oa.current;return Oa.current=Na,t===null?Na:t}function rp(){(ke===0||ke===3||ke===2)&&(ke=4),Te===null||!(Yr&268435455)&&!(ju&268435455)||Wn(Te,je)}function Pa(t,e){var n=W;W|=2;var r=f1();(Te!==t||je!==e)&&(pn=null,Fr(t,e));do try{dE();break}catch(s){d1(t,s)}while(!0);if(zh(),W=n,Oa.current=r,pe!==null)throw Error(O(261));return Te=null,je=0,ke}function dE(){for(;pe!==null;)h1(pe)}function fE(){for(;pe!==null&&!LS();)h1(pe)}function h1(t){var e=g1(t.alternate,t,ut);t.memoizedProps=t.pendingProps,e===null?p1(t):pe=e,Xh.current=null}function p1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=iE(n,e),n!==null){n.flags&=32767,pe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ke=6,pe=null;return}}else if(n=sE(n,e,ut),n!==null){pe=n;return}if(e=e.sibling,e!==null){pe=e;return}pe=e=t}while(e!==null);ke===0&&(ke=5)}function Or(t,e,n){var r=q,s=Ct.transition;try{Ct.transition=null,q=1,hE(t,e,n,r)}finally{Ct.transition=s,q=r}return null}function hE(t,e,n,r){do qs();while(Qn!==null);if(W&6)throw Error(O(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(O(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(qS(t,i),t===Te&&(pe=Te=null,je=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||El||(El=!0,y1(ha,function(){return qs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ct.transition,Ct.transition=null;var o=q;q=1;var l=W;W|=4,Xh.current=null,lE(t,n),a1(n,t),Rb(Yd),ma=!!Qd,Yd=Qd=null,t.current=n,aE(n),$S(),W=l,q=o,Ct.transition=i}else t.current=n;if(El&&(El=!1,Qn=t,Aa=s),i=t.pendingLanes,i===0&&(ir=null),FS(n.stateNode),ot(t,fe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ma)throw Ma=!1,t=vf,vf=null,t;return Aa&1&&t.tag!==0&&qs(),i=t.pendingLanes,i&1?t===wf?no++:(no=0,wf=t):no=0,vr(),null}function qs(){if(Qn!==null){var t=J0(Aa),e=Ct.transition,n=q;try{if(Ct.transition=null,q=16>t?16:t,Qn===null)var r=!1;else{if(t=Qn,Qn=null,Aa=0,W&6)throw Error(O(331));var s=W;for(W|=4,A=t.current;A!==null;){var i=A,o=i.child;if(A.flags&16){var l=i.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(A=u;A!==null;){var c=A;switch(c.tag){case 0:case 11:case 15:eo(8,c,i)}var d=c.child;if(d!==null)d.return=c,A=d;else for(;A!==null;){c=A;var f=c.sibling,h=c.return;if(i1(c),c===u){A=null;break}if(f!==null){f.return=h,A=f;break}A=h}}}var p=i.alternate;if(p!==null){var y=p.child;if(y!==null){p.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}A=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,A=o;else e:for(;A!==null;){if(i=A,i.flags&2048)switch(i.tag){case 0:case 11:case 15:eo(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,A=m;break e}A=i.return}}var v=t.current;for(A=v;A!==null;){o=A;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,A=x;else e:for(o=v;A!==null;){if(l=A,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Iu(9,l)}}catch(b){ae(l,l.return,b)}if(l===o){A=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,A=S;break e}A=l.return}}if(W=s,vr(),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(Tu,t)}catch{}r=!0}return r}finally{q=n,Ct.transition=e}}return!1}function cg(t,e,n){e=si(n,e),e=Jv(t,e,1),t=sr(t,e,1),e=qe(),t!==null&&(Go(t,1,e),ot(t,e))}function ae(t,e,n){if(t.tag===3)cg(t,t,n);else for(;e!==null;){if(e.tag===3){cg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ir===null||!ir.has(r))){t=si(n,t),t=Gv(e,t,1),e=sr(e,t,1),t=qe(),e!==null&&(Go(e,1,t),ot(e,t));break}}e=e.return}}function pE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=qe(),t.pingedLanes|=t.suspendedLanes&n,Te===t&&(je&n)===n&&(ke===4||ke===3&&(je&130023424)===je&&500>fe()-ep?Fr(t,0):Zh|=n),ot(t,e)}function m1(t,e){e===0&&(t.mode&1?(e=pl,pl<<=1,!(pl&130023424)&&(pl=4194304)):e=1);var n=qe();t=_n(t,e),t!==null&&(Go(t,e,n),ot(t,n))}function mE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),m1(t,n)}function gE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(O(314))}r!==null&&r.delete(e),m1(t,n)}var g1;g1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||st.current)rt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return rt=!1,rE(t,e,n);rt=!!(t.flags&131072)}else rt=!1,te&&e.flags&1048576&&xv(e,Sa,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Yl(t,e),t=e.pendingProps;var s=ei(e,Ue.current);Ks(e,n),s=qh(null,e,r,t,s,n);var i=Jh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,it(r)?(i=!0,xa(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Uh(e),s.updater=Ru,e.stateNode=s,s._reactInternals=e,lf(e,r,t,n),e=cf(null,e,r,!0,i,n)):(e.tag=0,te&&i&&jh(e),Ve(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Yl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=vE(r),t=Rt(r,t),s){case 0:e=uf(null,e,r,t,n);break e;case 1:e=eg(null,e,r,t,n);break e;case 11:e=Xm(null,e,r,t,n);break e;case 14:e=Zm(null,e,r,Rt(r.type,t),n);break e}throw Error(O(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Rt(r,s),uf(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Rt(r,s),eg(t,e,r,s,n);case 3:e:{if(Zv(e),t===null)throw Error(O(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Tv(t,e),Ca(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=si(Error(O(423)),e),e=tg(t,e,r,n,s);break e}else if(r!==s){s=si(Error(O(424)),e),e=tg(t,e,r,n,s);break e}else for(dt=rr(e.stateNode.containerInfo.firstChild),ht=e,te=!0,Dt=null,n=Ev(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ti(),r===s){e=Nn(t,e,n);break e}Ve(t,e,r,n)}e=e.child}return e;case 5:return _v(e),t===null&&rf(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Xd(r,s)?o=null:i!==null&&Xd(r,i)&&(e.flags|=32),Xv(t,e),Ve(t,e,o,n),e.child;case 6:return t===null&&rf(e),null;case 13:return e1(t,e,n);case 4:return Hh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ni(e,null,r,n):Ve(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Rt(r,s),Xm(t,e,r,s,n);case 7:return Ve(t,e,e.pendingProps,n),e.child;case 8:return Ve(t,e,e.pendingProps.children,n),e.child;case 12:return Ve(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Y(ba,r._currentValue),r._currentValue=o,i!==null)if(Ht(i.value,o)){if(i.children===s.children&&!st.current){e=Nn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(i.tag===1){a=Sn(-1,n&-n),a.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?a.next=a:(a.next=c.next,c.next=a),u.pending=a}}i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),sf(i.return,n,e),l.lanes|=n;break}a=a.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(O(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),sf(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ve(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ks(e,n),s=Ot(s),r=r(s),e.flags|=1,Ve(t,e,r,n),e.child;case 14:return r=e.type,s=Rt(r,e.pendingProps),s=Rt(r.type,s),Zm(t,e,r,s,n);case 15:return Qv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Rt(r,s),Yl(t,e),e.tag=1,it(r)?(t=!0,xa(e)):t=!1,Ks(e,n),qv(e,r,s),lf(e,r,s,n),cf(null,e,r,!0,t,n);case 19:return t1(t,e,n);case 22:return Yv(t,e,n)}throw Error(O(156,e.tag))};function y1(t,e){return V0(t,e)}function yE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Et(t,e,n,r){return new yE(t,e,n,r)}function sp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function vE(t){if(typeof t=="function")return sp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===bh)return 11;if(t===Eh)return 14}return 2}function lr(t,e){var n=t.alternate;return n===null?(n=Et(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ea(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")sp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ms:return Ur(n.children,s,i,e);case Sh:o=8,s|=8;break;case Md:return t=Et(12,n,e,s|2),t.elementType=Md,t.lanes=i,t;case Ad:return t=Et(13,n,e,s),t.elementType=Ad,t.lanes=i,t;case Pd:return t=Et(19,n,e,s),t.elementType=Pd,t.lanes=i,t;case _0:return Du(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case C0:o=10;break e;case T0:o=9;break e;case bh:o=11;break e;case Eh:o=14;break e;case zn:o=16,r=null;break e}throw Error(O(130,t==null?t:typeof t,""))}return e=Et(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ur(t,e,n,r){return t=Et(7,t,r,e),t.lanes=n,t}function Du(t,e,n,r){return t=Et(22,t,r,e),t.elementType=_0,t.lanes=n,t.stateNode={isHidden:!1},t}function Bc(t,e,n){return t=Et(6,t,null,e),t.lanes=n,t}function Fc(t,e,n){return e=Et(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function wE(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kc(0),this.expirationTimes=kc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ip(t,e,n,r,s,i,o,l,a){return t=new wE(t,e,n,l,a),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Et(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uh(i),t}function xE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Os,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function v1(t){if(!t)return hr;t=t._reactInternals;e:{if(is(t)!==t||t.tag!==1)throw Error(O(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(it(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(O(171))}if(t.tag===1){var n=t.type;if(it(n))return vv(t,n,e)}return e}function w1(t,e,n,r,s,i,o,l,a){return t=ip(n,r,!0,t,s,i,o,l,a),t.context=v1(null),n=t.current,r=qe(),s=or(n),i=Sn(r,s),i.callback=e??null,sr(n,i,s),t.current.lanes=s,Go(t,s,r),ot(t,r),t}function Lu(t,e,n,r){var s=e.current,i=qe(),o=or(s);return n=v1(n),e.context===null?e.context=n:e.pendingContext=n,e=Sn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=sr(s,e,o),t!==null&&(Ft(t,s,o,i),Jl(t,s,o)),o}function Ra(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function dg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function op(t,e){dg(t,e),(t=t.alternate)&&dg(t,e)}function kE(){return null}var x1=typeof reportError=="function"?reportError:function(t){console.error(t)};function lp(t){this._internalRoot=t}$u.prototype.render=lp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(O(409));Lu(t,e,null,null)};$u.prototype.unmount=lp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Xr(function(){Lu(null,t,null,null)}),e[Tn]=null}};function $u(t){this._internalRoot=t}$u.prototype.unstable_scheduleHydration=function(t){if(t){var e=Y0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Vn.length&&e!==0&&e<Vn[n].priority;n++);Vn.splice(n,0,t),n===0&&Z0(t)}};function ap(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function zu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function fg(){}function SE(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Ra(o);i.call(u)}}var o=w1(e,r,t,0,null,!1,!1,"",fg);return t._reactRootContainer=o,t[Tn]=o.current,Co(t.nodeType===8?t.parentNode:t),Xr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Ra(a);l.call(u)}}var a=ip(t,0,!1,null,null,!1,!1,"",fg);return t._reactRootContainer=a,t[Tn]=a.current,Co(t.nodeType===8?t.parentNode:t),Xr(function(){Lu(e,a,n,r)}),a}function Bu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var a=Ra(o);l.call(a)}}Lu(e,o,t,s)}else o=SE(n,e,t,s,r);return Ra(o)}G0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Fi(e.pendingLanes);n!==0&&(_h(e,n|1),ot(e,fe()),!(W&6)&&(ii=fe()+500,vr()))}break;case 13:Xr(function(){var r=_n(t,1);if(r!==null){var s=qe();Ft(r,t,1,s)}}),op(t,1)}};Nh=function(t){if(t.tag===13){var e=_n(t,134217728);if(e!==null){var n=qe();Ft(e,t,134217728,n)}op(t,134217728)}};Q0=function(t){if(t.tag===13){var e=or(t),n=_n(t,e);if(n!==null){var r=qe();Ft(n,t,e,r)}op(t,e)}};Y0=function(){return q};X0=function(t,e){var n=q;try{return q=t,e()}finally{q=n}};Ud=function(t,e,n){switch(e){case"input":if(jd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Mu(r);if(!s)throw Error(O(90));O0(r),jd(r,s)}}}break;case"textarea":A0(t,n);break;case"select":e=n.value,e!=null&&Us(t,!!n.multiple,e,!1)}};$0=tp;z0=Xr;var bE={usingClientEntryPoint:!1,Events:[Yo,Is,Mu,D0,L0,tp]},Pi={findFiberByHostInstance:Rr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},EE={bundleType:Pi.bundleType,version:Pi.version,rendererPackageName:Pi.rendererPackageName,rendererConfig:Pi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=U0(t),t===null?null:t.stateNode},findFiberByHostInstance:Pi.findFiberByHostInstance||kE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cl.isDisabled&&Cl.supportsFiber)try{Tu=Cl.inject(EE),tn=Cl}catch{}}mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bE;mt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ap(e))throw Error(O(200));return xE(t,e,null,n)};mt.createRoot=function(t,e){if(!ap(t))throw Error(O(299));var n=!1,r="",s=x1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=ip(t,1,!1,null,null,n,!1,r,s),t[Tn]=e.current,Co(t.nodeType===8?t.parentNode:t),new lp(e)};mt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(O(188)):(t=Object.keys(t).join(","),Error(O(268,t)));return t=U0(e),t=t===null?null:t.stateNode,t};mt.flushSync=function(t){return Xr(t)};mt.hydrate=function(t,e,n){if(!zu(e))throw Error(O(200));return Bu(null,t,e,!0,n)};mt.hydrateRoot=function(t,e,n){if(!ap(t))throw Error(O(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=x1;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=w1(e,null,t,1,n??null,s,!1,i,o),t[Tn]=e.current,Co(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new $u(e)};mt.render=function(t,e,n){if(!zu(e))throw Error(O(200));return Bu(null,t,e,!1,n)};mt.unmountComponentAtNode=function(t){if(!zu(t))throw Error(O(40));return t._reactRootContainer?(Xr(function(){Bu(null,null,t,!1,function(){t._reactRootContainer=null,t[Tn]=null})}),!0):!1};mt.unstable_batchedUpdates=tp;mt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!zu(n))throw Error(O(200));if(t==null||t._reactInternals===void 0)throw Error(O(38));return Bu(t,e,n,!1,r)};mt.version="18.3.1-next-f1338f8080-20240426";function k1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(k1)}catch(t){console.error(t)}}k1(),k0.exports=mt;var S1=k0.exports;const CE=pi(S1);var b1,hg=S1;b1=hg.createRoot,hg.hydrateRoot;/**
 * react-router v7.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var pg="popstate";function TE(t={}){function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return Sf("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Io(s)}return NE(e,n,null,t)}function ne(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Vt(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function _E(){return Math.random().toString(36).substring(2,10)}function mg(t,e){return{usr:t.state,key:t.key,idx:e}}function Sf(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?vi(e):e,state:n,key:e&&e.key||r||_E()}}function Io({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function vi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function NE(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l="POP",a=null,u=c();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function c(){return(o.state||{idx:null}).idx}function d(){l="POP";let w=c(),m=w==null?null:w-u;u=w,a&&a({action:l,location:y.location,delta:m})}function f(w,m){l="PUSH";let v=Sf(y.location,w,m);u=c()+1;let x=mg(v,u),S=y.createHref(v);try{o.pushState(x,"",S)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;s.location.assign(S)}i&&a&&a({action:l,location:y.location,delta:1})}function h(w,m){l="REPLACE";let v=Sf(y.location,w,m);u=c();let x=mg(v,u),S=y.createHref(v);o.replaceState(x,"",S),i&&a&&a({action:l,location:y.location,delta:0})}function p(w){return OE(w)}let y={get action(){return l},get location(){return t(s,o)},listen(w){if(a)throw new Error("A history only accepts one active listener");return s.addEventListener(pg,d),a=w,()=>{s.removeEventListener(pg,d),a=null}},createHref(w){return e(s,w)},createURL:p,encodeLocation(w){let m=p(w);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:f,replace:h,go(w){return o.go(w)}};return y}function OE(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ne(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Io(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function E1(t,e,n="/"){return ME(t,e,n,!1)}function ME(t,e,n,r){let s=typeof e=="string"?vi(e):e,i=On(s.pathname||"/",n);if(i==null)return null;let o=C1(t);AE(o);let l=null;for(let a=0;l==null&&a<o.length;++a){let u=UE(i);l=BE(o[a],u,r)}return l}function C1(t,e=[],n=[],r=""){let s=(i,o,l)=>{let a={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};a.relativePath.startsWith("/")&&(ne(a.relativePath.startsWith(r),`Absolute route path "${a.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),a.relativePath=a.relativePath.slice(r.length));let u=bn([r,a.relativePath]),c=n.concat(a);i.children&&i.children.length>0&&(ne(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),C1(i.children,e,c,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:$E(u,i.index),routesMeta:c})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let a of T1(i.path))s(i,o,a)}),e}function T1(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=T1(r.join("/")),l=[];return l.push(...o.map(a=>a===""?i:[i,a].join("/"))),s&&l.push(...o),l.map(a=>t.startsWith("/")&&a===""?"/":a)}function AE(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:zE(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var PE=/^:[\w-]+$/,RE=3,IE=2,jE=1,DE=10,LE=-2,gg=t=>t==="*";function $E(t,e){let n=t.split("/"),r=n.length;return n.some(gg)&&(r+=LE),e&&(r+=IE),n.filter(s=>!gg(s)).reduce((s,i)=>s+(PE.test(i)?RE:i===""?jE:DE),r)}function zE(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function BE(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let a=r[l],u=l===r.length-1,c=i==="/"?e:e.slice(i.length)||"/",d=Ia({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},c),f=a.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=Ia({path:a.relativePath,caseSensitive:a.caseSensitive,end:!1},c)),!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:bn([i,d.pathname]),pathnameBase:KE(bn([i,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(i=bn([i,d.pathnameBase]))}return o}function Ia(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=FE(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,{paramName:c,isOptional:d},f)=>{if(c==="*"){let p=l[f]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const h=l[f];return d&&!h?u[c]=void 0:u[c]=(h||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function FE(t,e=!1,n=!0){Vt(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,a)=>(r.push({paramName:l,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function UE(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Vt(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function On(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function HE(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?vi(t):t;return{pathname:n?n.startsWith("/")?n:VE(n,e):e,search:qE(r),hash:JE(s)}}function VE(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Uc(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function WE(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function up(t){let e=WE(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function cp(t,e,n,r=!1){let s;typeof t=="string"?s=vi(t):(s={...t},ne(!s.pathname||!s.pathname.includes("?"),Uc("?","pathname","search",s)),ne(!s.pathname||!s.pathname.includes("#"),Uc("#","pathname","hash",s)),ne(!s.search||!s.search.includes("#"),Uc("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;s.pathname=f.join("/")}l=d>=0?e[d]:"/"}let a=HE(s,l),u=o&&o!=="/"&&o.endsWith("/"),c=(i||o===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(u||c)&&(a.pathname+="/"),a}var bn=t=>t.join("/").replace(/\/\/+/g,"/"),KE=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),qE=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,JE=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function GE(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var _1=["POST","PUT","PATCH","DELETE"];new Set(_1);var QE=["GET",..._1];new Set(QE);var wi=k.createContext(null);wi.displayName="DataRouter";var Fu=k.createContext(null);Fu.displayName="DataRouterState";k.createContext(!1);var N1=k.createContext({isTransitioning:!1});N1.displayName="ViewTransition";var YE=k.createContext(new Map);YE.displayName="Fetchers";var XE=k.createContext(null);XE.displayName="Await";var Kt=k.createContext(null);Kt.displayName="Navigation";var Zo=k.createContext(null);Zo.displayName="Location";var qt=k.createContext({outlet:null,matches:[],isDataRoute:!1});qt.displayName="Route";var dp=k.createContext(null);dp.displayName="RouteError";function ZE(t,{relative:e}={}){ne(xi(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=k.useContext(Kt),{hash:s,pathname:i,search:o}=el(t,{relative:e}),l=i;return n!=="/"&&(l=i==="/"?n:bn([n,i])),r.createHref({pathname:l,search:o,hash:s})}function xi(){return k.useContext(Zo)!=null}function wr(){return ne(xi(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(Zo).location}var O1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function M1(t){k.useContext(Kt).static||k.useLayoutEffect(t)}function ki(){let{isDataRoute:t}=k.useContext(qt);return t?fC():eC()}function eC(){ne(xi(),"useNavigate() may be used only in the context of a <Router> component.");let t=k.useContext(wi),{basename:e,navigator:n}=k.useContext(Kt),{matches:r}=k.useContext(qt),{pathname:s}=wr(),i=JSON.stringify(up(r)),o=k.useRef(!1);return M1(()=>{o.current=!0}),k.useCallback((a,u={})=>{if(Vt(o.current,O1),!o.current)return;if(typeof a=="number"){n.go(a);return}let c=cp(a,JSON.parse(i),s,u.relative==="path");t==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:bn([e,c.pathname])),(u.replace?n.replace:n.push)(c,u.state,u)},[e,n,i,s,t])}k.createContext(null);function A1(){let{matches:t}=k.useContext(qt),e=t[t.length-1];return e?e.params:{}}function el(t,{relative:e}={}){let{matches:n}=k.useContext(qt),{pathname:r}=wr(),s=JSON.stringify(up(n));return k.useMemo(()=>cp(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function tC(t,e){return P1(t,e)}function P1(t,e,n,r){var m;ne(xi(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=k.useContext(Kt),{matches:i}=k.useContext(qt),o=i[i.length-1],l=o?o.params:{},a=o?o.pathname:"/",u=o?o.pathnameBase:"/",c=o&&o.route;{let v=c&&c.path||"";R1(a,!c||v.endsWith("*")||v.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${a}" (under <Route path="${v}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${v}"> to <Route path="${v==="/"?"*":`${v}/*`}">.`)}let d=wr(),f;if(e){let v=typeof e=="string"?vi(e):e;ne(u==="/"||((m=v.pathname)==null?void 0:m.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${v.pathname}" was given in the \`location\` prop.`),f=v}else f=d;let h=f.pathname||"/",p=h;if(u!=="/"){let v=u.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(v.length).join("/")}let y=E1(t,{pathname:p});Vt(c||y!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),Vt(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=oC(y&&y.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:bn([u,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?u:bn([u,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,n,r);return e&&w?k.createElement(Zo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},w):w}function nC(){let t=dC(),e=GE(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:i},"ErrorBoundary")," or"," ",k.createElement("code",{style:i},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:s},n):null,o)}var rC=k.createElement(nC,null),sC=class extends k.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?k.createElement(qt.Provider,{value:this.props.routeContext},k.createElement(dp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function iC({routeContext:t,match:e,children:n}){let r=k.useContext(wi);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),k.createElement(qt.Provider,{value:t},n)}function oC(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,i=n==null?void 0:n.errors;if(i!=null){let a=s.findIndex(u=>u.route.id&&(i==null?void 0:i[u.route.id])!==void 0);ne(a>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,a+1))}let o=!1,l=-1;if(n)for(let a=0;a<s.length;a++){let u=s[a];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=a),u.route.id){let{loaderData:c,errors:d}=n,f=u.route.loader&&!c.hasOwnProperty(u.route.id)&&(!d||d[u.route.id]===void 0);if(u.route.lazy||f){o=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((a,u,c)=>{let d,f=!1,h=null,p=null;n&&(d=i&&u.route.id?i[u.route.id]:void 0,h=u.route.errorElement||rC,o&&(l<0&&c===0?(R1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,p=null):l===c&&(f=!0,p=u.route.hydrateFallbackElement||null)));let y=e.concat(s.slice(0,c+1)),w=()=>{let m;return d?m=h:f?m=p:u.route.Component?m=k.createElement(u.route.Component,null):u.route.element?m=u.route.element:m=a,k.createElement(iC,{match:u,routeContext:{outlet:a,matches:y,isDataRoute:n!=null},children:m})};return n&&(u.route.ErrorBoundary||u.route.errorElement||c===0)?k.createElement(sC,{location:n.location,revalidation:n.revalidation,component:h,error:d,children:w(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):w()},null)}function fp(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lC(t){let e=k.useContext(wi);return ne(e,fp(t)),e}function aC(t){let e=k.useContext(Fu);return ne(e,fp(t)),e}function uC(t){let e=k.useContext(qt);return ne(e,fp(t)),e}function hp(t){let e=uC(t),n=e.matches[e.matches.length-1];return ne(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function cC(){return hp("useRouteId")}function dC(){var r;let t=k.useContext(dp),e=aC("useRouteError"),n=hp("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function fC(){let{router:t}=lC("useNavigate"),e=hp("useNavigate"),n=k.useRef(!1);return M1(()=>{n.current=!0}),k.useCallback(async(s,i={})=>{Vt(n.current,O1),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var yg={};function R1(t,e,n){!e&&!yg[t]&&(yg[t]=!0,Vt(!1,n))}k.memo(hC);function hC({routes:t,future:e,state:n}){return P1(t,void 0,n,e)}function pC({to:t,replace:e,state:n,relative:r}){ne(xi(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=k.useContext(Kt);Vt(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=k.useContext(qt),{pathname:o}=wr(),l=ki(),a=cp(t,up(i),o,r==="path"),u=JSON.stringify(a);return k.useEffect(()=>{l(JSON.parse(u),{replace:e,state:n,relative:r})},[l,u,r,e,n]),null}function Dn(t){ne(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function mC({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1}){ne(!xi(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=k.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof n=="string"&&(n=vi(n));let{pathname:a="/",search:u="",hash:c="",state:d=null,key:f="default"}=n,h=k.useMemo(()=>{let p=On(a,o);return p==null?null:{location:{pathname:p,search:u,hash:c,state:d,key:f},navigationType:r}},[o,a,u,c,d,f,r]);return Vt(h!=null,`<Router basename="${o}"> is not able to match the URL "${a}${u}${c}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:k.createElement(Kt.Provider,{value:l},k.createElement(Zo.Provider,{children:e,value:h}))}function gC({children:t,location:e}){return tC(bf(t),e)}function bf(t,e=[]){let n=[];return k.Children.forEach(t,(r,s)=>{if(!k.isValidElement(r))return;let i=[...e,s];if(r.type===k.Fragment){n.push.apply(n,bf(r.props.children,i));return}ne(r.type===Dn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ne(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=bf(r.props.children,i)),n.push(o)}),n}var ta="get",na="application/x-www-form-urlencoded";function Uu(t){return t!=null&&typeof t.tagName=="string"}function yC(t){return Uu(t)&&t.tagName.toLowerCase()==="button"}function vC(t){return Uu(t)&&t.tagName.toLowerCase()==="form"}function wC(t){return Uu(t)&&t.tagName.toLowerCase()==="input"}function xC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function kC(t,e){return t.button===0&&(!e||e==="_self")&&!xC(t)}var Tl=null;function SC(){if(Tl===null)try{new FormData(document.createElement("form"),0),Tl=!1}catch{Tl=!0}return Tl}var bC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Hc(t){return t!=null&&!bC.has(t)?(Vt(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${na}"`),null):t}function EC(t,e){let n,r,s,i,o;if(vC(t)){let l=t.getAttribute("action");r=l?On(l,e):null,n=t.getAttribute("method")||ta,s=Hc(t.getAttribute("enctype"))||na,i=new FormData(t)}else if(yC(t)||wC(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let a=t.getAttribute("formaction")||l.getAttribute("action");if(r=a?On(a,e):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||ta,s=Hc(t.getAttribute("formenctype"))||Hc(l.getAttribute("enctype"))||na,i=new FormData(l,t),!SC()){let{name:u,type:c,value:d}=t;if(c==="image"){let f=u?`${u}.`:"";i.append(`${f}x`,"0"),i.append(`${f}y`,"0")}else u&&i.append(u,d)}}else{if(Uu(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ta,r=null,s=na,o=t}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function pp(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function CC(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&On(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function TC(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function _C(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function NC(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await TC(i,n);return o.links?o.links():[]}return[]}));return PC(r.flat(1).filter(_C).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function vg(t,e,n,r,s,i){let o=(a,u)=>n[u]?a.route.id!==n[u].route.id:!0,l=(a,u)=>{var c;return n[u].pathname!==a.pathname||((c=n[u].route.path)==null?void 0:c.endsWith("*"))&&n[u].params["*"]!==a.params["*"]};return i==="assets"?e.filter((a,u)=>o(a,u)||l(a,u)):i==="data"?e.filter((a,u)=>{var d;let c=r.routes[a.route.id];if(!c||!c.hasLoader)return!1;if(o(a,u)||l(a,u))return!0;if(a.route.shouldRevalidate){let f=a.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:a.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function OC(t,e,{includeHydrateFallback:n}={}){return MC(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function MC(t){return[...new Set(t)]}function AC(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function PC(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(AC(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function I1(){let t=k.useContext(wi);return pp(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function RC(){let t=k.useContext(Fu);return pp(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var mp=k.createContext(void 0);mp.displayName="FrameworkContext";function j1(){let t=k.useContext(mp);return pp(t,"You must render this element inside a <HydratedRouter> element"),t}function IC(t,e){let n=k.useContext(mp),[r,s]=k.useState(!1),[i,o]=k.useState(!1),{onFocus:l,onBlur:a,onMouseEnter:u,onMouseLeave:c,onTouchStart:d}=e,f=k.useRef(null);k.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let y=m=>{m.forEach(v=>{o(v.isIntersecting)})},w=new IntersectionObserver(y,{threshold:.5});return f.current&&w.observe(f.current),()=>{w.disconnect()}}},[t]),k.useEffect(()=>{if(r){let y=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(y)}}},[r]);let h=()=>{s(!0)},p=()=>{s(!1),o(!1)};return n?t!=="intent"?[i,f,{}]:[i,f,{onFocus:Ri(l,h),onBlur:Ri(a,p),onMouseEnter:Ri(u,h),onMouseLeave:Ri(c,p),onTouchStart:Ri(d,h)}]:[!1,f,{}]}function Ri(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function jC({page:t,...e}){let{router:n}=I1(),r=k.useMemo(()=>E1(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?k.createElement(LC,{page:t,matches:r,...e}):null}function DC(t){let{manifest:e,routeModules:n}=j1(),[r,s]=k.useState([]);return k.useEffect(()=>{let i=!1;return NC(t,e,n).then(o=>{i||s(o)}),()=>{i=!0}},[t,e,n]),r}function LC({page:t,matches:e,...n}){let r=wr(),{manifest:s,routeModules:i}=j1(),{basename:o}=I1(),{loaderData:l,matches:a}=RC(),u=k.useMemo(()=>vg(t,e,a,s,r,"data"),[t,e,a,s,r]),c=k.useMemo(()=>vg(t,e,a,s,r,"assets"),[t,e,a,s,r]),d=k.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let p=new Set,y=!1;if(e.forEach(m=>{var x;let v=s.routes[m.route.id];!v||!v.hasLoader||(!u.some(S=>S.route.id===m.route.id)&&m.route.id in l&&((x=i[m.route.id])!=null&&x.shouldRevalidate)||v.hasClientLoader?y=!0:p.add(m.route.id))}),p.size===0)return[];let w=CC(t,o,"data");return y&&p.size>0&&w.searchParams.set("_routes",e.filter(m=>p.has(m.route.id)).map(m=>m.route.id).join(",")),[w.pathname+w.search]},[o,l,r,s,u,e,t,i]),f=k.useMemo(()=>OC(c,s),[c,s]),h=DC(c);return k.createElement(k.Fragment,null,d.map(p=>k.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...n})),f.map(p=>k.createElement("link",{key:p,rel:"modulepreload",href:p,...n})),h.map(({key:p,link:y})=>k.createElement("link",{key:p,nonce:n.nonce,...y})))}function $C(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var D1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{D1&&(window.__reactRouterVersion="7.8.0")}catch{}function zC({basename:t,children:e,window:n}){let r=k.useRef();r.current==null&&(r.current=TE({window:n,v5Compat:!0}));let s=r.current,[i,o]=k.useState({action:s.action,location:s.location}),l=k.useCallback(a=>{k.startTransition(()=>o(a))},[o]);return k.useLayoutEffect(()=>s.listen(l),[s,l]),k.createElement(mC,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:s})}var L1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ft=k.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:l,target:a,to:u,preventScrollReset:c,viewTransition:d,...f},h){let{basename:p}=k.useContext(Kt),y=typeof u=="string"&&L1.test(u),w,m=!1;if(typeof u=="string"&&y&&(w=u,D1))try{let I=new URL(window.location.href),R=u.startsWith("//")?new URL(I.protocol+u):new URL(u),ve=On(R.pathname,p);R.origin===I.origin&&ve!=null?u=ve+R.search+R.hash:m=!0}catch{Vt(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=ZE(u,{relative:s}),[x,S,b]=IC(r,f),E=HC(u,{replace:o,state:l,target:a,preventScrollReset:c,relative:s,viewTransition:d});function C(I){e&&e(I),I.defaultPrevented||E(I)}let T=k.createElement("a",{...f,...b,href:w||v,onClick:m||i?e:C,ref:$C(h,S),target:a,"data-discover":!y&&n==="render"?"true":void 0});return x&&!y?k.createElement(k.Fragment,null,T,k.createElement(jC,{page:v})):T});ft.displayName="Link";var BC=k.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:l,children:a,...u},c){let d=el(o,{relative:u.relative}),f=wr(),h=k.useContext(Fu),{navigator:p,basename:y}=k.useContext(Kt),w=h!=null&&JC(d)&&l===!0,m=p.encodeLocation?p.encodeLocation(d).pathname:d.pathname,v=f.pathname,x=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;n||(v=v.toLowerCase(),x=x?x.toLowerCase():null,m=m.toLowerCase()),x&&y&&(x=On(x,y)||x);const S=m!=="/"&&m.endsWith("/")?m.length-1:m.length;let b=v===m||!s&&v.startsWith(m)&&v.charAt(S)==="/",E=x!=null&&(x===m||!s&&x.startsWith(m)&&x.charAt(m.length)==="/"),C={isActive:b,isPending:E,isTransitioning:w},T=b?e:void 0,I;typeof r=="function"?I=r(C):I=[r,b?"active":null,E?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let R=typeof i=="function"?i(C):i;return k.createElement(ft,{...u,"aria-current":T,className:I,ref:c,style:R,to:o,viewTransition:l},typeof a=="function"?a(C):a)});BC.displayName="NavLink";var FC=k.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:o=ta,action:l,onSubmit:a,relative:u,preventScrollReset:c,viewTransition:d,...f},h)=>{let p=KC(),y=qC(l,{relative:u}),w=o.toLowerCase()==="get"?"get":"post",m=typeof l=="string"&&L1.test(l),v=x=>{if(a&&a(x),x.defaultPrevented)return;x.preventDefault();let S=x.nativeEvent.submitter,b=(S==null?void 0:S.getAttribute("formmethod"))||o;p(S||x.currentTarget,{fetcherKey:e,method:b,navigate:n,replace:s,state:i,relative:u,preventScrollReset:c,viewTransition:d})};return k.createElement("form",{ref:h,method:w,action:y,onSubmit:r?a:v,...f,"data-discover":!m&&t==="render"?"true":void 0})});FC.displayName="Form";function UC(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $1(t){let e=k.useContext(wi);return ne(e,UC(t)),e}function HC(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o}={}){let l=ki(),a=wr(),u=el(t,{relative:i});return k.useCallback(c=>{if(kC(c,e)){c.preventDefault();let d=n!==void 0?n:Io(a)===Io(u);l(t,{replace:d,state:r,preventScrollReset:s,relative:i,viewTransition:o})}},[a,l,u,n,r,e,t,s,i,o])}var VC=0,WC=()=>`__${String(++VC)}__`;function KC(){let{router:t}=$1("useSubmit"),{basename:e}=k.useContext(Kt),n=cC();return k.useCallback(async(r,s={})=>{let{action:i,method:o,encType:l,formData:a,body:u}=EC(r,e);if(s.navigate===!1){let c=s.fetcherKey||WC();await t.fetch(c,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:a,body:u,formMethod:s.method||o,formEncType:s.encType||l,flushSync:s.flushSync})}else await t.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:a,body:u,formMethod:s.method||o,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function qC(t,{relative:e}={}){let{basename:n}=k.useContext(Kt),r=k.useContext(qt);ne(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...el(t||".",{relative:e})},o=wr();if(t==null){i.search=o.search;let l=new URLSearchParams(i.search),a=l.getAll("index");if(a.some(c=>c==="")){l.delete("index"),a.filter(d=>d).forEach(d=>l.append("index",d));let c=l.toString();i.search=c?`?${c}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:bn([n,i.pathname])),Io(i)}function JC(t,{relative:e}={}){let n=k.useContext(N1);ne(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=$1("useViewTransitionState"),s=el(t,{relative:e});if(!n.isTransitioning)return!1;let i=On(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=On(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Ia(s.pathname,o)!=null||Ia(s.pathname,i)!=null}var GC=typeof Element<"u",QC=typeof Map=="function",YC=typeof Set=="function",XC=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function ra(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,s;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!ra(t[r],e[r]))return!1;return!0}var i;if(QC&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(i=t.entries();!(r=i.next()).done;)if(!e.has(r.value[0]))return!1;for(i=t.entries();!(r=i.next()).done;)if(!ra(r.value[1],e.get(r.value[0])))return!1;return!0}if(YC&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(i=t.entries();!(r=i.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if(XC&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;if(GC&&t instanceof Element)return!1;for(r=n;r--!==0;)if(!((s[r]==="_owner"||s[r]==="__v"||s[r]==="__o")&&t.$$typeof)&&!ra(t[s[r]],e[s[r]]))return!1;return!0}return t!==t&&e!==e}var ZC=function(e,n){try{return ra(e,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const eT=pi(ZC);var tT=function(t,e,n,r,s,i,o,l){if(!t){var a;if(e===void 0)a=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,s,i,o,l],c=0;a=new Error(e.replace(/%s/g,function(){return u[c++]})),a.name="Invariant Violation"}throw a.framesToPop=1,a}},nT=tT;const wg=pi(nT);var rT=function(e,n,r,s){var i=r?r.call(s,e,n):void 0;if(i!==void 0)return!!i;if(e===n)return!0;if(typeof e!="object"||!e||typeof n!="object"||!n)return!1;var o=Object.keys(e),l=Object.keys(n);if(o.length!==l.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(n),u=0;u<o.length;u++){var c=o[u];if(!a(c))return!1;var d=e[c],f=n[c];if(i=r?r.call(s,d,f,c):void 0,i===!1||i===void 0&&d!==f)return!1}return!0};const sT=pi(rT);var z1=(t=>(t.BASE="base",t.BODY="body",t.HEAD="head",t.HTML="html",t.LINK="link",t.META="meta",t.NOSCRIPT="noscript",t.SCRIPT="script",t.STYLE="style",t.TITLE="title",t.FRAGMENT="Symbol(react.fragment)",t))(z1||{}),Vc={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},xg=Object.values(z1),gp={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},iT=Object.entries(gp).reduce((t,[e,n])=>(t[n]=e,t),{}),$t="data-rh",Js={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},Gs=(t,e)=>{for(let n=t.length-1;n>=0;n-=1){const r=t[n];if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}return null},oT=t=>{let e=Gs(t,"title");const n=Gs(t,Js.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),n&&e)return n.replace(/%s/g,()=>e);const r=Gs(t,Js.DEFAULT_TITLE);return e||r||void 0},lT=t=>Gs(t,Js.ON_CHANGE_CLIENT_STATE)||(()=>{}),Wc=(t,e)=>e.filter(n=>typeof n[t]<"u").map(n=>n[t]).reduce((n,r)=>({...n,...r}),{}),aT=(t,e)=>e.filter(n=>typeof n.base<"u").map(n=>n.base).reverse().reduce((n,r)=>{if(!n.length){const s=Object.keys(r);for(let i=0;i<s.length;i+=1){const l=s[i].toLowerCase();if(t.indexOf(l)!==-1&&r[l])return n.concat(r)}}return n},[]),uT=t=>console&&typeof console.warn=="function"&&console.warn(t),Ii=(t,e,n)=>{const r={};return n.filter(s=>Array.isArray(s[t])?!0:(typeof s[t]<"u"&&uT(`Helmet: ${t} should be of type "Array". Instead found type "${typeof s[t]}"`),!1)).map(s=>s[t]).reverse().reduce((s,i)=>{const o={};i.filter(a=>{let u;const c=Object.keys(a);for(let f=0;f<c.length;f+=1){const h=c[f],p=h.toLowerCase();e.indexOf(p)!==-1&&!(u==="rel"&&a[u].toLowerCase()==="canonical")&&!(p==="rel"&&a[p].toLowerCase()==="stylesheet")&&(u=p),e.indexOf(h)!==-1&&(h==="innerHTML"||h==="cssText"||h==="itemprop")&&(u=h)}if(!u||!a[u])return!1;const d=a[u].toLowerCase();return r[u]||(r[u]={}),o[u]||(o[u]={}),r[u][d]?!1:(o[u][d]=!0,!0)}).reverse().forEach(a=>s.push(a));const l=Object.keys(o);for(let a=0;a<l.length;a+=1){const u=l[a],c={...r[u],...o[u]};r[u]=c}return s},[]).reverse()},cT=(t,e)=>{if(Array.isArray(t)&&t.length){for(let n=0;n<t.length;n+=1)if(t[n][e])return!0}return!1},dT=t=>({baseTag:aT(["href"],t),bodyAttributes:Wc("bodyAttributes",t),defer:Gs(t,Js.DEFER),encode:Gs(t,Js.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Wc("htmlAttributes",t),linkTags:Ii("link",["rel","href"],t),metaTags:Ii("meta",["name","charset","http-equiv","property","itemprop"],t),noscriptTags:Ii("noscript",["innerHTML"],t),onChangeClientState:lT(t),scriptTags:Ii("script",["src","innerHTML"],t),styleTags:Ii("style",["cssText"],t),title:oT(t),titleAttributes:Wc("titleAttributes",t),prioritizeSeoTags:cT(t,Js.PRIORITIZE_SEO_TAGS)}),B1=t=>Array.isArray(t)?t.join(""):t,fT=(t,e)=>{const n=Object.keys(t);for(let r=0;r<n.length;r+=1)if(e[n[r]]&&e[n[r]].includes(t[n[r]]))return!0;return!1},Kc=(t,e)=>Array.isArray(t)?t.reduce((n,r)=>(fT(r,e)?n.priority.push(r):n.default.push(r),n),{priority:[],default:[]}):{default:t,priority:[]},kg=(t,e)=>({...t,[e]:void 0}),hT=["noscript","script","style"],Ef=(t,e=!0)=>e===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),F1=t=>Object.keys(t).reduce((e,n)=>{const r=typeof t[n]<"u"?`${n}="${t[n]}"`:`${n}`;return e?`${e} ${r}`:r},""),pT=(t,e,n,r)=>{const s=F1(n),i=B1(e);return s?`<${t} ${$t}="true" ${s}>${Ef(i,r)}</${t}>`:`<${t} ${$t}="true">${Ef(i,r)}</${t}>`},mT=(t,e,n=!0)=>e.reduce((r,s)=>{const i=s,o=Object.keys(i).filter(u=>!(u==="innerHTML"||u==="cssText")).reduce((u,c)=>{const d=typeof i[c]>"u"?c:`${c}="${Ef(i[c],n)}"`;return u?`${u} ${d}`:d},""),l=i.innerHTML||i.cssText||"",a=hT.indexOf(t)===-1;return`${r}<${t} ${$t}="true" ${o}${a?"/>":`>${l}</${t}>`}`},""),U1=(t,e={})=>Object.keys(t).reduce((n,r)=>{const s=gp[r];return n[s||r]=t[r],n},e),gT=(t,e,n)=>{const r={key:e,[$t]:!0},s=U1(n,r);return[We.createElement("title",s,e)]},sa=(t,e)=>e.map((n,r)=>{const s={key:r,[$t]:!0};return Object.keys(n).forEach(i=>{const l=gp[i]||i;if(l==="innerHTML"||l==="cssText"){const a=n.innerHTML||n.cssText;s.dangerouslySetInnerHTML={__html:a}}else s[l]=n[i]}),We.createElement(t,s)}),wt=(t,e,n=!0)=>{switch(t){case"title":return{toComponent:()=>gT(t,e.title,e.titleAttributes),toString:()=>pT(t,e.title,e.titleAttributes,n)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>U1(e),toString:()=>F1(e)};default:return{toComponent:()=>sa(t,e),toString:()=>mT(t,e,n)}}},yT=({metaTags:t,linkTags:e,scriptTags:n,encode:r})=>{const s=Kc(t,Vc.meta),i=Kc(e,Vc.link),o=Kc(n,Vc.script);return{priorityMethods:{toComponent:()=>[...sa("meta",s.priority),...sa("link",i.priority),...sa("script",o.priority)],toString:()=>`${wt("meta",s.priority,r)} ${wt("link",i.priority,r)} ${wt("script",o.priority,r)}`},metaTags:s.default,linkTags:i.default,scriptTags:o.default}},vT=t=>{const{baseTag:e,bodyAttributes:n,encode:r=!0,htmlAttributes:s,noscriptTags:i,styleTags:o,title:l="",titleAttributes:a,prioritizeSeoTags:u}=t;let{linkTags:c,metaTags:d,scriptTags:f}=t,h={toComponent:()=>{},toString:()=>""};return u&&({priorityMethods:h,linkTags:c,metaTags:d,scriptTags:f}=yT(t)),{priority:h,base:wt("base",e,r),bodyAttributes:wt("bodyAttributes",n,r),htmlAttributes:wt("htmlAttributes",s,r),link:wt("link",c,r),meta:wt("meta",d,r),noscript:wt("noscript",i,r),script:wt("script",f,r),style:wt("style",o,r),title:wt("title",{title:l,titleAttributes:a},r)}},Cf=vT,_l=[],H1=!!(typeof window<"u"&&window.document&&window.document.createElement),Tf=class{constructor(t,e){an(this,"instances",[]);an(this,"canUseDOM",H1);an(this,"context");an(this,"value",{setHelmet:t=>{this.context.helmet=t},helmetInstances:{get:()=>this.canUseDOM?_l:this.instances,add:t=>{(this.canUseDOM?_l:this.instances).push(t)},remove:t=>{const e=(this.canUseDOM?_l:this.instances).indexOf(t);(this.canUseDOM?_l:this.instances).splice(e,1)}}});this.context=t,this.canUseDOM=e||!1,e||(t.helmet=Cf({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},wT={},V1=We.createContext(wT),Br,W1=(Br=class extends k.Component{constructor(n){super(n);an(this,"helmetData");this.helmetData=new Tf(this.props.context||{},Br.canUseDOM)}render(){return We.createElement(V1.Provider,{value:this.helmetData.value},this.props.children)}},an(Br,"canUseDOM",H1),Br),ms=(t,e)=>{const n=document.head||document.querySelector("head"),r=n.querySelectorAll(`${t}[${$t}]`),s=[].slice.call(r),i=[];let o;return e&&e.length&&e.forEach(l=>{const a=document.createElement(t);for(const u in l)if(Object.prototype.hasOwnProperty.call(l,u))if(u==="innerHTML")a.innerHTML=l.innerHTML;else if(u==="cssText")a.styleSheet?a.styleSheet.cssText=l.cssText:a.appendChild(document.createTextNode(l.cssText));else{const c=u,d=typeof l[c]>"u"?"":l[c];a.setAttribute(u,d)}a.setAttribute($t,"true"),s.some((u,c)=>(o=c,a.isEqualNode(u)))?s.splice(o,1):i.push(a)}),s.forEach(l=>{var a;return(a=l.parentNode)==null?void 0:a.removeChild(l)}),i.forEach(l=>n.appendChild(l)),{oldTags:s,newTags:i}},_f=(t,e)=>{const n=document.getElementsByTagName(t)[0];if(!n)return;const r=n.getAttribute($t),s=r?r.split(","):[],i=[...s],o=Object.keys(e);for(const l of o){const a=e[l]||"";n.getAttribute(l)!==a&&n.setAttribute(l,a),s.indexOf(l)===-1&&s.push(l);const u=i.indexOf(l);u!==-1&&i.splice(u,1)}for(let l=i.length-1;l>=0;l-=1)n.removeAttribute(i[l]);s.length===i.length?n.removeAttribute($t):n.getAttribute($t)!==o.join(",")&&n.setAttribute($t,o.join(","))},xT=(t,e)=>{typeof t<"u"&&document.title!==t&&(document.title=B1(t)),_f("title",e)},Sg=(t,e)=>{const{baseTag:n,bodyAttributes:r,htmlAttributes:s,linkTags:i,metaTags:o,noscriptTags:l,onChangeClientState:a,scriptTags:u,styleTags:c,title:d,titleAttributes:f}=t;_f("body",r),_f("html",s),xT(d,f);const h={baseTag:ms("base",n),linkTags:ms("link",i),metaTags:ms("meta",o),noscriptTags:ms("noscript",l),scriptTags:ms("script",u),styleTags:ms("style",c)},p={},y={};Object.keys(h).forEach(w=>{const{newTags:m,oldTags:v}=h[w];m.length&&(p[w]=m),v.length&&(y[w]=h[w].oldTags)}),e&&e(),a(t,p,y)},ji=null,kT=t=>{ji&&cancelAnimationFrame(ji),t.defer?ji=requestAnimationFrame(()=>{Sg(t,()=>{ji=null})}):(Sg(t),ji=null)},ST=kT,bg=class extends k.Component{constructor(){super(...arguments);an(this,"rendered",!1)}shouldComponentUpdate(e){return!sT(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:n}=this.props.context;let r=null;const s=dT(e.get().map(i=>{const o={...i.props};return delete o.context,o}));W1.canUseDOM?ST(s):Cf&&(r=Cf(s)),n(r)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},Nd,ls=(Nd=class extends k.Component{shouldComponentUpdate(t){return!eT(kg(this.props,"helmetData"),kg(t,"helmetData"))}mapNestedChildrenToProps(t,e){if(!e)return null;switch(t.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${t.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(t,e,n,r){return{...e,[t.type]:[...e[t.type]||[],{...n,...this.mapNestedChildrenToProps(t,r)}]}}mapObjectTypeChildren(t,e,n,r){switch(t.type){case"title":return{...e,[t.type]:r,titleAttributes:{...n}};case"body":return{...e,bodyAttributes:{...n}};case"html":return{...e,htmlAttributes:{...n}};default:return{...e,[t.type]:{...n}}}}mapArrayTypeChildrenToProps(t,e){let n={...e};return Object.keys(t).forEach(r=>{n={...n,[r]:t[r]}}),n}warnOnInvalidChildren(t,e){return wg(xg.some(n=>t.type===n),typeof t.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${xg.join(", ")} are allowed. Helmet does not support rendering <${t.type}> elements. Refer to our API for more information.`),wg(!e||typeof e=="string"||Array.isArray(e)&&!e.some(n=>typeof n!="string"),`Helmet expects a string as a child of <${t.type}>. Did you forget to wrap your children in braces? ( <${t.type}>{\`\`}</${t.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(t,e){let n={};return We.Children.forEach(t,r=>{if(!r||!r.props)return;const{children:s,...i}=r.props,o=Object.keys(i).reduce((a,u)=>(a[iT[u]||u]=i[u],a),{});let{type:l}=r;switch(typeof l=="symbol"?l=l.toString():this.warnOnInvalidChildren(r,s),l){case"Symbol(react.fragment)":e=this.mapChildrenToProps(s,e);break;case"link":case"meta":case"noscript":case"script":case"style":n=this.flattenArrayTypeChildren(r,n,o,s);break;default:e=this.mapObjectTypeChildren(r,e,o,s);break}}),this.mapArrayTypeChildrenToProps(n,e)}render(){const{children:t,...e}=this.props;let n={...e},{helmetData:r}=e;if(t&&(n=this.mapChildrenToProps(t,n)),r&&!(r instanceof Tf)){const s=r;r=new Tf(s.context,!0),delete n.helmetData}return r?We.createElement(bg,{...n,context:r.value}):We.createElement(V1.Consumer,null,s=>We.createElement(bg,{...n,context:s}))}},an(Nd,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),Nd);const bT="modulepreload",ET=function(t){return"/"+t},Eg={},as=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(a=>{if(a=ET(a),a in Eg)return;Eg[a]=!0;const u=a.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${c}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":bT,u||(d.as="script"),d.crossOrigin="",d.href=a,l&&d.setAttribute("nonce",l),document.head.appendChild(d),u)return new Promise((f,h)=>{d.addEventListener("load",f),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${a}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},CT=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>as(async()=>{const{default:r}=await Promise.resolve().then(()=>Si);return{default:r}},[]).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class yp extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class TT extends yp{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Cg extends yp{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Tg extends yp{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Nf;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Nf||(Nf={}));var _T=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(c){try{u(r.next(c))}catch(d){o(d)}}function a(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(l,a)}u((r=r.apply(t,e||[])).next())})};class NT{constructor(e,{headers:n={},customFetch:r,region:s=Nf.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=CT(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return _T(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let l={},{region:a}=n;a||(a=this.region);const u=new URL(`${this.url}/${e}`);a&&a!=="any"&&(l["x-region"]=a,u.searchParams.set("forceFunctionRegion",a));let c;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(l["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(l["Content-Type"]="application/json",c=JSON.stringify(o)));const d=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:c}).catch(y=>{throw new TT(y)}),f=d.headers.get("x-relay-error");if(f&&f==="true")throw new Cg(d);if(!d.ok)throw new Tg(d);let h=((r=d.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),p;return h==="application/json"?p=yield d.json():h==="application/octet-stream"?p=yield d.blob():h==="text/event-stream"?p=d:h==="multipart/form-data"?p=yield d.formData():p=yield d.text(),{data:p,error:null,response:d}}catch(s){return{data:null,error:s,response:s instanceof Tg||s instanceof Cg?s.context:void 0}}})}}var tt={},vp={},Hu={},tl={},Vu={},Wu={},OT=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},oi=OT();const MT=oi.fetch,K1=oi.fetch.bind(oi),q1=oi.Headers,AT=oi.Request,PT=oi.Response,Si=Object.freeze(Object.defineProperty({__proto__:null,Headers:q1,Request:AT,Response:PT,default:K1,fetch:MT},Symbol.toStringTag,{value:"Module"})),RT=Zk(Si);var Ku={};Object.defineProperty(Ku,"__esModule",{value:!0});let IT=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Ku.default=IT;var J1=Nt&&Nt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Wu,"__esModule",{value:!0});const jT=J1(RT),DT=J1(Ku);let LT=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=jT.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,a;let u=null,c=null,d=null,f=i.status,h=i.statusText;if(i.ok){if(this.method!=="HEAD"){const m=await i.text();m===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?c=m:c=JSON.parse(m))}const y=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),w=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");y&&w&&w.length>1&&(d=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(c)&&(c.length>1?(u={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,d=null,f=406,h="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{const y=await i.text();try{u=JSON.parse(y),Array.isArray(u)&&i.status===404&&(c=[],u=null,f=200,h="OK")}catch{i.status===404&&y===""?(f=204,h="No Content"):u={message:y}}if(u&&this.isMaybeSingle&&(!((a=u==null?void 0:u.details)===null||a===void 0)&&a.includes("0 rows"))&&(u=null,f=200,h="OK"),u&&this.shouldThrowOnError)throw new DT.default(u)}return{error:u,data:c,count:d,status:f,statusText:h}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,l,a;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(a=i==null?void 0:i.code)!==null&&a!==void 0?a:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};Wu.default=LT;var $T=Nt&&Nt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Vu,"__esModule",{value:!0});const zT=$T(Wu);let BT=class extends zT.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var l;const a=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${a};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Vu.default=BT;var FT=Nt&&Nt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(tl,"__esModule",{value:!0});const UT=FT(Vu);let HT=class extends UT.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};tl.default=HT;var VT=Nt&&Nt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Hu,"__esModule",{value:!0});const Di=VT(tl);let WT=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=n,this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Di.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((l,a)=>l.concat(Object.keys(a)),[]);if(o.length>0){const l=[...new Set(o)].map(a=>`"${a}"`);this.url.searchParams.set("columns",l.join(","))}}return new Di.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const a=e.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(a.length>0){const u=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new Di.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new Di.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Di.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Hu.default=WT;var qu={},Ju={};Object.defineProperty(Ju,"__esModule",{value:!0});Ju.version=void 0;Ju.version="0.0.0-automated";Object.defineProperty(qu,"__esModule",{value:!0});qu.DEFAULT_HEADERS=void 0;const KT=Ju;qu.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${KT.version}`};var G1=Nt&&Nt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vp,"__esModule",{value:!0});const qT=G1(Hu),JT=G1(tl),GT=qu;let QT=class Q1{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},GT.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new qT.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Q1(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let a;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([c,d])=>d!==void 0).map(([c,d])=>[c,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([c,d])=>{l.searchParams.append(c,d)})):(o="POST",a=n);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new JT.default({method:o,url:l,headers:u,schema:this.schemaName,body:a,fetch:this.fetch,allowEmpty:!1})}};vp.default=QT;var bi=Nt&&Nt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(tt,"__esModule",{value:!0});tt.PostgrestError=tt.PostgrestBuilder=tt.PostgrestTransformBuilder=tt.PostgrestFilterBuilder=tt.PostgrestQueryBuilder=tt.PostgrestClient=void 0;const Y1=bi(vp);tt.PostgrestClient=Y1.default;const X1=bi(Hu);tt.PostgrestQueryBuilder=X1.default;const Z1=bi(tl);tt.PostgrestFilterBuilder=Z1.default;const ew=bi(Vu);tt.PostgrestTransformBuilder=ew.default;const tw=bi(Wu);tt.PostgrestBuilder=tw.default;const nw=bi(Ku);tt.PostgrestError=nw.default;var YT=tt.default={PostgrestClient:Y1.default,PostgrestQueryBuilder:X1.default,PostgrestFilterBuilder:Z1.default,PostgrestTransformBuilder:ew.default,PostgrestBuilder:tw.default,PostgrestError:nw.default};const{PostgrestClient:XT,PostgrestQueryBuilder:TD,PostgrestFilterBuilder:_D,PostgrestTransformBuilder:ND,PostgrestBuilder:OD,PostgrestError:MD}=YT;class ZT{static dynamicRequire(e){try{return typeof process<"u"&&process.versions&&process.versions.node&&typeof require<"u"?require(e):null}catch{return null}}static detectEnvironment(){var e,n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const r=parseInt(process.versions.node.split(".")[0]);if(r>=22)try{if(typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};const s=this.dynamicRequire("undici");if(s&&s.WebSocket)return{type:"native",constructor:s.WebSocket};throw new Error("undici not available")}catch{return{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:'Install the "ws" package or check your Node.js installation.'}}try{const s=this.dynamicRequire("ws");if(s)return{type:"ws",constructor:(n=s.WebSocket)!==null&&n!==void 0?n:s};throw new Error("ws package not available")}catch{return{type:"unsupported",error:`Node.js ${r} detected without WebSocket support.`,workaround:'Install the "ws" package: npm install ws'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const e_="2.15.0",t_=`realtime-js/${e_}`,n_="1.0.0",Of=1e4,r_=1e3,s_=100;var ro;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ro||(ro={}));var we;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(we||(we={}));var jt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(jt||(jt={}));var Mf;(function(t){t.websocket="websocket"})(Mf||(Mf={}));var Ar;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ar||(Ar={}));class i_{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(e.slice(o,o+s));o=o+s;const a=r.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:a,payload:u}}}class rw{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Q;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Q||(Q={}));const _g=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=o_(o,t,e,s),i),{})},o_=(t,e,n,r)=>{const s=e.find(l=>l.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?sw(i,o):Af(o)},sw=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return c_(e,n)}switch(t){case Q.bool:return l_(e);case Q.float4:case Q.float8:case Q.int2:case Q.int4:case Q.int8:case Q.numeric:case Q.oid:return a_(e);case Q.json:case Q.jsonb:return u_(e);case Q.timestamp:return d_(e);case Q.abstime:case Q.date:case Q.daterange:case Q.int4range:case Q.int8range:case Q.money:case Q.reltime:case Q.text:case Q.time:case Q.timestamptz:case Q.timetz:case Q.tsrange:case Q.tstzrange:return Af(e);default:return Af(e)}},Af=t=>t,l_=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},a_=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},u_=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},c_=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>sw(e,l))}return t},d_=t=>typeof t=="string"?t.replace(" ","T"):t,iw=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class qc{constructor(e,n,r={},s=Of){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Ng;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Ng||(Ng={}));class so{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=so.syncState(this.state,s,i,o),this.pendingDiffs.forEach(a=>{this.state=so.syncDiff(this.state,a,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=so.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),l={},a={};return this.map(i,(u,c)=>{o[u]||(a[u]=c)}),this.map(o,(u,c)=>{const d=i[u];if(d){const f=c.map(w=>w.presence_ref),h=d.map(w=>w.presence_ref),p=c.filter(w=>h.indexOf(w.presence_ref)<0),y=d.filter(w=>f.indexOf(w.presence_ref)<0);p.length>0&&(l[u]=p),y.length>0&&(a[u]=y)}else l[u]=c}),this.syncDiff(i,{joins:l,leaves:a},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,a)=>{var u;const c=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(a),c.length>0){const d=e[l].map(h=>h.presence_ref),f=c.filter(h=>d.indexOf(h.presence_ref)<0);e[l].unshift(...f)}r(l,c,a)}),this.map(o,(l,a)=>{let u=e[l];if(!u)return;const c=a.map(d=>d.presence_ref);u=u.filter(d=>c.indexOf(d.presence_ref)<0),e[l]=u,s(l,u,a),u.length===0&&delete e[l]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Og;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Og||(Og={}));var io;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(io||(io={}));var mn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(mn||(mn={}));class wp{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=we.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new qc(this,jt.join,this.params,this.timeout),this.rejoinTimer=new rw(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=we.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=we.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=we.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=we.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=we.errored,this.rejoinTimer.scheduleTimeout())}),this._on(jt.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new so(this),this.broadcastEndpointURL=iw(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==we.closed){const{config:{broadcast:i,presence:o,private:l}}=this.params,a=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&s!==void 0?s:[],u=!!this.bindings[io.PRESENCE]&&this.bindings[io.PRESENCE].length>0,c={},d={broadcast:i,presence:Object.assign(Object.assign({},o),{enabled:u}),postgres_changes:a,private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this._onError(f=>e==null?void 0:e(mn.CHANNEL_ERROR,f)),this._onClose(()=>e==null?void 0:e(mn.CLOSED)),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:f})=>{var h;if(this.socket.setAuth(),f===void 0){e==null||e(mn.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,y=(h=p==null?void 0:p.length)!==null&&h!==void 0?h:0,w=[];for(let m=0;m<y;m++){const v=p[m],{filter:{event:x,schema:S,table:b,filter:E}}=v,C=f&&f[m];if(C&&C.event===x&&C.schema===S&&C.table===b&&C.filter===E)w.push(Object.assign(Object.assign({},v),{id:C.id}));else{this.unsubscribe(),this.state=we.errored,e==null||e(mn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e(mn.SUBSCRIBED);return}}).receive("error",f=>{this.state=we.errored,e==null||e(mn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(mn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===we.joined&&e===io.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,a={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,a;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((a=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||a===void 0)&&a.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=we.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(jt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new qc(this,jt.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=we.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new qc(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>s_){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:l,error:a,leave:u,join:c}=jt;if(r&&[l,a,u,c].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(h=>{var p,y,w;return((p=h.filter)===null||p===void 0?void 0:p.event)==="*"||((w=(y=h.filter)===null||y===void 0?void 0:y.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(h=>h.callback(f,r)):(i=this.bindings[o])===null||i===void 0||i.filter(h=>{var p,y,w,m,v,x;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in h){const S=h.id,b=(p=h.filter)===null||p===void 0?void 0:p.event;return S&&((y=n.ids)===null||y===void 0?void 0:y.includes(S))&&(b==="*"||(b==null?void 0:b.toLocaleLowerCase())===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const S=(v=(m=h==null?void 0:h.filter)===null||m===void 0?void 0:m.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return S==="*"||S===((x=n==null?void 0:n.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===o}).map(h=>{if(typeof f=="object"&&"ids"in f){const p=f.data,{schema:y,table:w,commit_timestamp:m,type:v,errors:x}=p;f=Object.assign(Object.assign({},{schema:y,table:w,commit_timestamp:m,eventType:v,new:{},old:{},errors:x}),this._getPayloadRecords(p))}h.callback(f,r)})}_isClosed(){return this.state===we.closed}_isJoined(){return this.state===we.joined}_isJoining(){return this.state===we.joining}_isLeaving(){return this.state===we.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&wp.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(jt.close,{},e)}_onError(e){this._on(jt.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=we.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=_g(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=_g(e.columns,e.old_record)),n}}const Mg=()=>{},Nl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},f_=[1e3,2e3,5e3,1e4],h_=1e4,p_=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class m_{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Of,this.transport=null,this.heartbeatIntervalMs=Nl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Mg,this.ref=0,this.reconnectTimer=null,this.logger=Mg,this.conn=null,this.sendBuffer=[],this.serializer=new i_,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>as(async()=>{const{default:l}=await Promise.resolve().then(()=>Si);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Mf.websocket}`,this.httpEndpoint=iw(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=ZT.createWebSocket(this.endpointURL())}catch(e){throw this._setConnectionState("disconnected"),new Error(`WebSocket not available: ${e.message}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:n_}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ro.connecting:return Ar.Connecting;case ro.open:return Ar.Open;case ro.closing:return Ar.Closing;default:return Ar.Closed}}isConnected(){return this.connectionState()===Ar.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new wp(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,l=>{var a;(a=this.conn)===null||a===void 0||a.send(l)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(r_,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Nl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{n.topic==="phoenix"&&n.event==="phx_reply"&&this.heartbeatCallback(n.payload.status==="ok"?"ok":"error"),n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:o}=n,l=o?`(${o})`:"",a=i.status||"";this.log("receive",`${a} ${r} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(jt.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([p_],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:t_};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(jt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new rw(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Nl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,i,o,l,a,u;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Of,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Nl.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:c=>f_[c-1]||h_,this.encode=(a=e==null?void 0:e.encode)!==null&&a!==void 0?a:(c,d)=>d(JSON.stringify(c)),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class xp extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function be(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class g_ extends xp{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Pf extends xp{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var y_=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(c){try{u(r.next(c))}catch(d){o(d)}}function a(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(l,a)}u((r=r.apply(t,e||[])).next())})};const ow=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>as(async()=>{const{default:r}=await Promise.resolve().then(()=>Si);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},v_=()=>y_(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield as(()=>Promise.resolve().then(()=>Si),void 0)).Response:Response}),Rf=t=>{if(Array.isArray(t))return t.map(n=>Rf(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Rf(r)}),e},w_=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var us=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(c){try{u(r.next(c))}catch(d){o(d)}}function a(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(l,a)}u((r=r.apply(t,e||[])).next())})};const Jc=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),x_=(t,e,n)=>us(void 0,void 0,void 0,function*(){const r=yield v_();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{const i=t.status||500,o=(s==null?void 0:s.statusCode)||i+"";e(new g_(Jc(s),i,o))}).catch(s=>{e(new Pf(Jc(s),s))}):e(new Pf(Jc(t),t))}),k_=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?s:(w_(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,Object.assign(Object.assign({},s),n))};function nl(t,e,n,r,s,i){return us(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(n,k_(e,r,s,i)).then(a=>{if(!a.ok)throw a;return r!=null&&r.noResolveJson?a:a.json()}).then(a=>o(a)).catch(a=>x_(a,l,r))})})}function ja(t,e,n,r){return us(this,void 0,void 0,function*(){return nl(t,"GET",e,n,r)})}function gn(t,e,n,r,s){return us(this,void 0,void 0,function*(){return nl(t,"POST",e,r,s,n)})}function If(t,e,n,r,s){return us(this,void 0,void 0,function*(){return nl(t,"PUT",e,r,s,n)})}function S_(t,e,n,r){return us(this,void 0,void 0,function*(){return nl(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function lw(t,e,n,r,s){return us(this,void 0,void 0,function*(){return nl(t,"DELETE",e,r,s,n)})}var Ze=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(c){try{u(r.next(c))}catch(d){o(d)}}function a(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(l,a)}u((r=r.apply(t,e||[])).next())})};const b_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ag={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class E_{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=ow(s)}uploadOrUpdate(e,n,r,s){return Ze(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Ag),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const a=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),a&&i.append("metadata",this.encodeMetadata(a)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),a&&i.append("metadata",this.encodeMetadata(a))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,a&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(a)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(n),c=this._getFinalPath(u),d=yield(e=="PUT"?If:gn)(this.fetch,`${this.url}/object/${c}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(be(i))return{data:null,error:i};throw i}})}upload(e,n,r){return Ze(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return Ze(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let a;const u=Object.assign({upsert:Ag.upsert},s),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",u.cacheControl),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",u.cacheControl)):(a=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const d=yield If(this.fetch,l.toString(),a,{headers:c});return{data:{path:i,fullPath:d.Key},error:null}}catch(a){if(be(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(e,n){return Ze(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield gn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new xp("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}})}update(e,n,r){return Ze(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Ze(this,void 0,void 0,function*(){try{return{data:yield gn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(be(s))return{data:null,error:s};throw s}})}copy(e,n,r){return Ze(this,void 0,void 0,function*(){try{return{data:{path:(yield gn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(be(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return Ze(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield gn(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(be(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return Ze(this,void 0,void 0,function*(){try{const s=yield gn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(be(s))return{data:null,error:s};throw s}})}download(e,n){return Ze(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield ja(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(be(l))return{data:null,error:l};throw l}})}info(e){return Ze(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield ja(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Rf(r),error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}})}exists(e){return Ze(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield S_(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(be(r)&&r instanceof Pf){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});a!==""&&s.push(a);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(e){return Ze(this,void 0,void 0,function*(){try{return{data:yield lw(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(be(n))return{data:null,error:n};throw n}})}list(e,n,r){return Ze(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},b_),n),{prefix:e||""});return{data:yield gn(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(be(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const C_="2.10.4",T_={"X-Client-Info":`storage-js/${C_}`};var gs=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(c){try{u(r.next(c))}catch(d){o(d)}}function a(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(l,a)}u((r=r.apply(t,e||[])).next())})};class __{constructor(e,n={},r,s){const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},T_),n),this.fetch=ow(r)}listBuckets(){return gs(this,void 0,void 0,function*(){try{return{data:yield ja(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(be(e))return{data:null,error:e};throw e}})}getBucket(e){return gs(this,void 0,void 0,function*(){try{return{data:yield ja(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(be(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return gs(this,void 0,void 0,function*(){try{return{data:yield gn(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return gs(this,void 0,void 0,function*(){try{return{data:yield If(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}})}emptyBucket(e){return gs(this,void 0,void 0,function*(){try{return{data:yield gn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(be(n))return{data:null,error:n};throw n}})}deleteBucket(e){return gs(this,void 0,void 0,function*(){try{return{data:yield lw(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(be(n))return{data:null,error:n};throw n}})}}class N_ extends __{constructor(e,n={},r,s){super(e,n,r,s)}from(e){return new E_(this.url,this.headers,e,this.fetch)}}const O_="2.54.0";let Hi="";typeof Deno<"u"?Hi="deno":typeof document<"u"?Hi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Hi="react-native":Hi="node";const M_={"X-Client-Info":`supabase-js-${Hi}/${O_}`},A_={headers:M_},P_={schema:"public"},R_={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},I_={};var j_=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(c){try{u(r.next(c))}catch(d){o(d)}}function a(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(l,a)}u((r=r.apply(t,e||[])).next())})};const D_=t=>{let e;return t?e=t:typeof fetch>"u"?e=K1:e=fetch,(...n)=>e(...n)},L_=()=>typeof Headers>"u"?q1:Headers,$_=(t,e,n)=>{const r=D_(n),s=L_();return(i,o)=>j_(void 0,void 0,void 0,function*(){var l;const a=(l=yield e())!==null&&l!==void 0?l:t;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${a}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};var z_=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(c){try{u(r.next(c))}catch(d){o(d)}}function a(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(l,a)}u((r=r.apply(t,e||[])).next())})};function B_(t){return t.endsWith("/")?t:t+"/"}function F_(t,e){var n,r;const{db:s,auth:i,realtime:o,global:l}=t,{db:a,auth:u,realtime:c,global:d}=e,f={db:Object.assign(Object.assign({},a),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},c),o),storage:{},global:Object.assign(Object.assign(Object.assign({},d),l),{headers:Object.assign(Object.assign({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>z_(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}const aw="2.71.1",bs=30*1e3,jf=3,Gc=jf*bs,U_="http://localhost:9999",H_="supabase.auth.token",V_={"X-Client-Info":`gotrue-js/${aw}`},Df="X-Supabase-Api-Version",uw={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},W_=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,K_=10*60*1e3;class kp extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function $(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class q_ extends kp{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function J_(t){return $(t)&&t.name==="AuthApiError"}class cw extends kp{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class xr extends kp{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Ln extends xr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function G_(t){return $(t)&&t.name==="AuthSessionMissingError"}class Ol extends xr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ml extends xr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Al extends xr{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Q_(t){return $(t)&&t.name==="AuthImplicitGrantRedirectError"}class Pg extends xr{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Lf extends xr{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Qc(t){return $(t)&&t.name==="AuthRetryableFetchError"}class Rg extends xr{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class $f extends xr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Da="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ig=` 	
\r=`.split(""),Y_=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Ig.length;e+=1)t[Ig[e].charCodeAt(0)]=-2;for(let e=0;e<Da.length;e+=1)t[Da[e].charCodeAt(0)]=e;return t})();function jg(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Da[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Da[r]),e.queuedBits-=6}}function dw(t,e,n){const r=Y_[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Dg(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{eN(o,r,n)};for(let o=0;o<t.length;o+=1)dw(t.charCodeAt(o),s,i);return e.join("")}function X_(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Z_(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}X_(r,e)}}function eN(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function tN(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)dw(t.charCodeAt(s),n,r);return new Uint8Array(e)}function nN(t){const e=[];return Z_(t,n=>e.push(n)),new Uint8Array(e)}function rN(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>jg(s,n,r)),jg(null,n,r),e.join("")}function sN(t){return Math.round(Date.now()/1e3)+t}function iN(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Pt=()=>typeof window<"u"&&typeof document<"u",Cr={tested:!1,writable:!1},fw=()=>{if(!Pt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Cr.tested)return Cr.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Cr.tested=!0,Cr.writable=!0}catch{Cr.tested=!0,Cr.writable=!1}return Cr.writable};function oN(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const hw=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>as(async()=>{const{default:r}=await Promise.resolve().then(()=>Si);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},lN=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Es=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Tr=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},In=async(t,e)=>{await t.removeItem(e)};class Gu{constructor(){this.promise=new Gu.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Gu.promiseConstructor=Promise;function Yc(t){const e=t.split(".");if(e.length!==3)throw new $f("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!W_.test(e[r]))throw new $f("JWT not in base64url format");return{header:JSON.parse(Dg(e[0])),payload:JSON.parse(Dg(e[1])),signature:tN(e[2]),raw:{header:e[0],payload:e[1]}}}async function aN(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function uN(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function cN(t){return("0"+t.toString(16)).substr(-2)}function dN(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,cN).join("")}async function fN(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function hN(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await fN(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ys(t,e,n=!1){const r=dN();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Es(t,`${e}-code-verifier`,s);const i=await hN(r);return[i,r===i?"plain":"s256"]}const pN=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function mN(t){const e=t.headers.get(Df);if(!e||!e.match(pN))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function gN(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function yN(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const vN=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function vs(t){if(!vN.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Xc(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Lg(t){return JSON.parse(JSON.stringify(t))}var wN=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const Mr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),xN=[502,503,504];async function $g(t){var e;if(!lN(t))throw new Lf(Mr(t),0);if(xN.includes(t.status))throw new Lf(Mr(t),t.status);let n;try{n=await t.json()}catch(i){throw new cw(Mr(i),i)}let r;const s=mN(t);if(s&&s.getTime()>=uw["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Rg(Mr(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Ln}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Rg(Mr(n),t.status,n.weak_password.reasons);throw new q_(Mr(n),t.status||500,r)}const kN=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function H(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Df]||(i[Df]=uw["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",a=await SN(t,e,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(a):{data:Object.assign({},a),error:null}}async function SN(t,e,n,r,s,i){const o=kN(e,r,s,i);let l;try{l=await t(n,Object.assign({},o))}catch(a){throw console.error(a),new Lf(Mr(a),0)}if(l.ok||await $g(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(a){await $g(a)}}function fn(t){var e;let n=null;TN(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=sN(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function zg(t){const e=fn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Kn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function bN(t){return{data:t,error:null}}function EN(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=wN(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},a=Object.assign({},o);return{data:{properties:l,user:a},error:null}}function CN(t){return t}function TN(t){return t.access_token&&t.refresh_token&&t.expires_in}const Zc=["global","local","others"];var _N=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class NN{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=hw(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=Zc[0]){if(Zc.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Zc.join(", ")}`);try{return await H(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if($(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await H(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Kn})}catch(r){if($(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=_N(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await H(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:EN,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if($(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await H(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Kn})}catch(n){if($(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,l,a;try{const u={nextPage:null,lastPage:0,total:0},c=await H(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:CN});if(c.error)throw c.error;const d=await c.json(),f=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,h=(a=(l=c.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&a!==void 0?a:[];return h.length>0&&(h.forEach(p=>{const y=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(p.split(";")[1].split("=")[1]);u[`${w}Page`]=y}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if($(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){vs(e);try{return await H(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Kn})}catch(n){if($(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){vs(e);try{return await H(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Kn})}catch(r){if($(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){vs(e);try{return await H(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Kn})}catch(r){if($(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){vs(e.userId);try{const{data:n,error:r}=await H(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if($(n))return{data:null,error:n};throw n}}async _deleteFactor(e){vs(e.userId),vs(e.id);try{return{data:await H(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if($(n))return{data:null,error:n};throw n}}}function Bg(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function ON(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ws={debug:!!(globalThis&&fw()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class pw extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class MN extends pw{}async function AN(t,e,n){ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),ws.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new MN(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ws.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}ON();const PN={url:U_,storageKey:H_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:V_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Fg(t,e,n){return await n()}const xs={};class jo{constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=jo.nextInstanceID,jo.nextInstanceID+=1,this.instanceID>0&&Pt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},PN),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new NN({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=hw(s.fetch),this.lock=s.lock||Fg,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Pt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=AN:this.lock=Fg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:fw()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Bg(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Bg(this.memoryStorage)),Pt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=xs[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){xs[this.storageKey]=Object.assign(Object.assign({},xs[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=xs[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){xs[this.storageKey]=Object.assign(Object.assign({},xs[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${aw}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=oN(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Pt()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Q_(i)){const a=(e=i.details)===null||e===void 0?void 0:e.code;if(a==="identity_already_exists"||a==="identity_not_found"||a==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return $(n)?{error:n}:{error:new cw("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await H(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:fn}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const a=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:u,session:a},error:null}}catch(i){if($(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:c,password:d,options:f}=e;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await ys(this.storage,this.storageKey)),i=await H(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:c,password:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:h,code_challenge_method:p},xform:fn})}else if("phone"in e){const{phone:c,password:d,options:f}=e;i=await H(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:d,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:fn})}else throw new Ml("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const a=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:u,session:a},error:null}}catch(i){if($(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:l}=e;n=await H(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:zg})}else if("phone"in e){const{phone:i,password:o,options:l}=e;n=await H(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:zg})}else throw new Ml("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Ol}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if($(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,s,i,o,l,a,u,c,d,f,h;let p,y;if("message"in e)p=e.message,y=e.signature;else{const{chain:w,wallet:m,statement:v,options:x}=e;let S;if(Pt())if(typeof m=="object")S=m;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))S=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=m}const b=new URL((n=x==null?void 0:x.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in S&&S.signIn){const E=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:b.host,uri:b.href}),v?{statement:v}:null));let C;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")C=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)C=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)p=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),y=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${b.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${b.href}`,`Issued At: ${(s=(r=x==null?void 0:x.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=x==null?void 0:x.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((o=x==null?void 0:x.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((a=x==null?void 0:x.signInWithSolana)===null||a===void 0)&&a.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((u=x==null?void 0:x.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((d=(c=x==null?void 0:x.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||d===void 0)&&d.length?["Resources",...x.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const E=await S.signMessage(new TextEncoder().encode(p),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=E}}try{const{data:w,error:m}=await H(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:rN(y)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(h=e.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:fn});if(m)throw m;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new Ol}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:m})}catch(w){if($(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(e){const n=await Tr(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await H(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:fn});if(await In(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Ol}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if($(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,l=await H(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:fn}),{data:a,error:u}=l;return u?{data:{user:null,session:null},error:u}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new Ol}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:u})}catch(n){if($(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:l,options:a}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await ys(this.storage,this.storageKey));const{error:d}=await H(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=a==null?void 0:a.data)!==null&&n!==void 0?n:{},create_user:(r=a==null?void 0:a.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:l,options:a}=e,{data:u,error:c}=await H(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=a==null?void 0:a.data)!==null&&s!==void 0?s:{},create_user:(i=a==null?void 0:a.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},channel:(o=a==null?void 0:a.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new Ml("You must provide either an email or phone number.")}catch(l){if($(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await H(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:fn});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const a=o.session,u=o.user;return a!=null&&a.access_token&&(await this._saveSession(a),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",a)),{data:{user:u,session:a},error:null}}catch(s){if($(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await ys(this.storage,this.storageKey)),await H(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:bN})}catch(i){if($(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Ln;const{error:s}=await H(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if($(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await H(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:l}=await H(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Ml("You must provide either an email or phone number and a type")}catch(n){if($(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Tr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Gc:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await Tr(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Xc()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(a,u,c)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(a,u,c))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await H(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Kn}):await this._useSession(async n=>{var r,s,i;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ln}:await H(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Kn})})}catch(n){if($(n))return G_(n)&&(await this._removeSession(),await In(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Ln;const o=s.session;let l=null,a=null;this.flowType==="pkce"&&e.email!=null&&([l,a]=await ys(this.storage,this.storageKey));const{data:u,error:c}=await H(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:a}),jwt:o.access_token,xform:Kn});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if($(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ln;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=Yc(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:l,error:a}=await this._callRefreshToken(e.refresh_token);if(a)return{data:{user:null,session:null},error:a};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:a}=await this._getUser(e.access_token);if(a)throw a;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if($(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:l}=n;if(l)throw l;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Ln;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if($(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Pt())throw new Al("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Al(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Pg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Al("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Pg("No code detected.");const{data:v,error:x}=await this._exchangeCodeForSession(e.code);if(x)throw x;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:a,token_type:u}=e;if(!i||!l||!o||!u)throw new Al("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(l);let f=c+d;a&&(f=parseInt(a));const h=f-c;h*1e3<=bs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${d}s`);const p=f-d;c-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,f,c):c-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,f,c);const{data:y,error:w}=await this._getUser(i);if(w)throw w;const m={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:f,refresh_token:o,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:e.type},error:null}}catch(r){if($(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Tr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(J_(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await In(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=iN(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await ys(this.storage,this.storageKey,!0));try{return await H(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if($(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if($(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,l,a,u,c;const{data:d,error:f}=i;if(f)throw f;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:!0});return await H(this.fetch,"GET",h,{headers:this.headers,jwt:(c=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(s)throw s;return Pt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if($(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await H(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if($(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await uN(async s=>(s>0&&await aN(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await H(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:fn})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Qc(i)&&Date.now()+o-r<bs})}catch(r){if(this._debug(n,"error",r),$(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Pt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Tr(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Tr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Es(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Xc()}else if(s&&!s.user&&!s.user){const o=await Tr(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await In(this.storage,this.storageKey+"-user"),await Es(this.storage,this.storageKey,s)):s.user=Xc()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Gc;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Gc}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Qc(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Ln;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Gu;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Ln;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),$(i)){const o={session:null,error:i};return Qc(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,n)}catch(a){i.push(a)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Es(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=Lg(s);await Es(this.storage,this.storageKey,i)}else{const s=Lg(n);await Es(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await In(this.storage,this.storageKey),await In(this.storage,this.storageKey+"-code-verifier"),await In(this.storage,this.storageKey+"-user"),this.userStorage&&await In(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Pt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),bs);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/bs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${bs}ms, refresh threshold is ${jf} ticks`),s<=jf&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof pw)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Pt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await ys(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await H(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if($(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:a,error:u}=await H(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=a==null?void 0:a.totp)===null||s===void 0)&&s.qr_code)&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})})}catch(n){if($(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:l}=await H(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(n){if($(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await H(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if($(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Yc(s.access_token);let l=null;o.aal&&(l=o.aal);let a=l;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(a="aal2");const c=o.amr||[];return{data:{currentLevel:l,nextLevel:a,currentAuthenticationMethods:c},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(l=>l.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+K_>s)return r;const{data:i,error:o}=await H(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(l=>l.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:h,error:p}=await this.getSession();if(p||!h.session)return{data:null,error:p};r=h.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:a}}=Yc(r);n!=null&&n.allowExpired||gN(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:h}=await this.getUser(r);if(h)throw h;return{data:{claims:i,header:s,signature:o},error:null}}const c=yN(s.alg),d=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,o,nN(`${l}.${a}`)))throw new $f("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if($(r))return{data:null,error:r};throw r}}}jo.nextInstanceID=0;const RN=jo;class IN extends RN{constructor(e){super(e)}}var jN=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(c){try{u(r.next(c))}catch(d){o(d)}}function a(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(l,a)}u((r=r.apply(t,e||[])).next())})};class DN{constructor(e,n,r){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=B_(e),a=new URL(l);this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const u=`sb-${a.hostname.split(".")[0]}-auth-token`,c={db:P_,realtime:I_,auth:Object.assign(Object.assign({},R_),{storageKey:u}),global:A_},d=F_(r??{},c);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=$_(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new XT(new URL("rest/v1",a).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new N_(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new NT(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return jN(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:l,debug:a},u,c){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new IN({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),u),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:l,debug:a,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new m_(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const LN=(t,e,n)=>new DN(t,e,n);function $N(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}$N()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const zN="https://lkxbwlvsmwfazuorxdbn.supabase.co",BN="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxreGJ3bHZzbXdmYXp1b3J4ZGJuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ5NTQ1NjgsImV4cCI6MjA3MDUzMDU2OH0.bkcSEc3StRPeKilH397IXdeKf_jUZFW_MayfQLR1cZk",Pe=LN(zN,BN),mw=Object.freeze(Object.defineProperty({__proto__:null,supabase:Pe},Symbol.toStringTag,{value:"Module"})),gw=k.createContext(void 0);function FN({children:t}){const[e,n]=k.useState(null),[r,s]=k.useState(null),[i,o]=k.useState(!0),a=(e==null?void 0:e.email)==="guthierresc@hotmail.com";k.useEffect(()=>{Pe.auth.getSession().then(({data:{session:h}})=>{s(h),n((h==null?void 0:h.user)??null),o(!1)});const{data:{subscription:f}}=Pe.auth.onAuthStateChange(async(h,p)=>{if(s(p),n((p==null?void 0:p.user)??null),o(!1),h==="SIGNED_IN"&&(p!=null&&p.user)){const{data:y}=await Pe.from("profiles").select("*").eq("id",p.user.id).single();y||await Pe.from("profiles").insert({id:p.user.id,name:"Guthierres Cavalcante",email:p.user.email})}});return()=>f.unsubscribe()},[]);const d={user:e,session:r,loading:i,signIn:async(f,h)=>{const{error:p}=await Pe.auth.signInWithPassword({email:f,password:h});if(p)throw p},signOut:async()=>{const{error:f}=await Pe.auth.signOut();if(f)throw f},isAdmin:a};return g.jsx(gw.Provider,{value:d,children:t})}function Qu(){const t=k.useContext(gw);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),HN=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Ug=t=>{const e=HN(t);return e.charAt(0).toUpperCase()+e.slice(1)},yw=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),VN=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var WN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KN=k.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},a)=>k.createElement("svg",{ref:a,...WN,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:yw("lucide",s),...!i&&!VN(l)&&{"aria-hidden":"true"},...l},[...o.map(([u,c])=>k.createElement(u,c)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=(t,e)=>{const n=k.forwardRef(({className:r,...s},i)=>k.createElement(KN,{ref:i,iconNode:e,className:yw(`lucide-${UN(Ug(t))}`,`lucide-${t}`,r),...s}));return n.displayName=Ug(t),n};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Do=J("arrow-left",qN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JN=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],GN=J("bold",JN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QN=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Yu=J("book-open",QN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YN=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],XN=J("eye-off",YN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZN=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],vw=J("eye",ZN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eO=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],tO=J("facebook",eO);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nO=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]],rO=J("heading-2",nO);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sO=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],iO=J("heart",sO);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oO=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],lO=J("image",oO);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],uO=J("italic",aO);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cO=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],dO=J("link",cO);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fO=[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]],hO=J("list-ordered",fO);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pO=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],mO=J("list",pO);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gO=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],yO=J("log-in",gO);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vO=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],wO=J("log-out",vO);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xO=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],kO=J("mail",xO);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SO=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],bO=J("map-pin",SO);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EO=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],CO=J("message-circle",EO);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TO=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Hg=J("plus",TO);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _O=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],NO=J("quote",_O);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],MO=J("save",OO);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],ww=J("share-2",AO);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],zf=J("square-pen",PO);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],Sp=J("thumbs-up",RO);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IO=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],xw=J("trash-2",IO);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],DO=J("type",jO);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],$O=J("upload",LO);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],BO=J("user",zO);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],UO=J("users",FO);function HO(){return g.jsx("header",{className:"bg-white border-b border-stone-200 sticky top-0 z-50",children:g.jsx("div",{className:"max-w-6xl mx-auto px-4 py-6",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs(ft,{to:"/",className:"flex items-center space-x-3",children:[g.jsx(Yu,{className:"w-8 h-8 text-stone-700"}),g.jsxs("div",{children:[g.jsx("h1",{className:"text-2xl font-serif text-stone-800",children:"Filosofia & Reflexes"}),g.jsx("p",{className:"text-sm text-stone-600",children:"Por Guthierres Cavalcante"})]})]}),g.jsxs("nav",{className:"flex items-center space-x-8",children:[g.jsx(ft,{to:"/",className:"text-stone-700 hover:text-stone-900 transition-colors",children:"Incio"}),g.jsx(ft,{to:"/sobre",className:"text-stone-700 hover:text-stone-900 transition-colors",children:"Sobre"})]})]})})})}function VO(){return g.jsx("footer",{className:"bg-stone-50 border-t border-stone-200 mt-16",children:g.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:g.jsxs("div",{className:"text-center text-stone-600",children:[g.jsxs("p",{className:"text-sm",children:[" ",new Date().getFullYear()," Filosofia & Reflexes. Todos os direitos reservados."]}),g.jsx("p",{className:"text-xs mt-2 text-stone-500",children:"Um espao para reflexes profundas e dilogos filosficos."})]})})})}function ed({children:t}){const{user:e,loading:n,isAdmin:r}=Qu();return n?g.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:g.jsxs("div",{className:"animate-pulse space-y-4",children:[g.jsx("div",{className:"h-8 bg-stone-200 rounded w-1/3"}),g.jsx("div",{className:"h-64 bg-stone-200 rounded"})]})}):!e||!r?g.jsx(pC,{to:"/login",replace:!0}):g.jsx(g.Fragment,{children:t})}function WO(t){return t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").trim().replace(/[\s]+/g,"-").replace(/-+/g,"-")}function bp(t){return new Date(t).toLocaleDateString("pt-BR",{year:"numeric",month:"long",day:"numeric"})}function KO(t,e=200){const n=t.replace(/<[^>]*>/g,"");return n.length>e?n.substring(0,e)+"...":n}async function qO(t){const{supabase:e}=await as(async()=>{const{supabase:l}=await Promise.resolve().then(()=>mw);return{supabase:l}},void 0),n=t.name.split(".").pop(),r=`${Math.random().toString(36).substring(2)}-${Date.now()}.${n}`,{data:s,error:i}=await e.storage.from("blog-images").upload(r,t);if(i)return console.error("Upload error:",i),null;const{data:{publicUrl:o}}=e.storage.from("blog-images").getPublicUrl(s.path);return o}function kw({url:t,title:e}){const n=encodeURIComponent(t),r=encodeURIComponent(e),s={email:`mailto:?subject=${r}&body=Confira este artigo: ${n}`,facebook:`https://www.facebook.com/sharer/sharer.php?u=${n}`,whatsapp:`https://wa.me/?text=${r} ${n}`,twitter:`https://twitter.com/intent/tweet?text=${r}&url=${n}`};return g.jsx("div",{className:"bg-white border border-stone-200 rounded-lg shadow-lg p-3 min-w-[200px]",children:g.jsxs("div",{className:"space-y-2",children:[g.jsxs("a",{href:s.email,className:"flex items-center space-x-3 p-2 hover:bg-stone-50 rounded-lg transition-colors",children:[g.jsx(kO,{className:"w-4 h-4 text-stone-600"}),g.jsx("span",{className:"text-sm text-stone-700",children:"Email"})]}),g.jsxs("a",{href:s.facebook,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 p-2 hover:bg-stone-50 rounded-lg transition-colors",children:[g.jsx(tO,{className:"w-4 h-4 text-blue-600"}),g.jsx("span",{className:"text-sm text-stone-700",children:"Facebook"})]}),g.jsxs("a",{href:s.whatsapp,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 p-2 hover:bg-stone-50 rounded-lg transition-colors",children:[g.jsx(CO,{className:"w-4 h-4 text-green-600"}),g.jsx("span",{className:"text-sm text-stone-700",children:"WhatsApp"})]}),g.jsxs("a",{href:s.twitter,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 p-2 hover:bg-stone-50 rounded-lg transition-colors",children:[g.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),g.jsx("span",{className:"text-sm text-stone-700",children:"X (Twitter)"})]})]})})}function JO({post:t,onUpvote:e}){var o;const[n,r]=k.useState(!1),s=l=>{l.preventDefault(),e(t.id)},i=l=>{l.preventDefault(),r(!n)};return g.jsx("article",{className:"bg-white rounded-xl shadow-sm border border-stone-100 overflow-hidden hover:shadow-md transition-shadow duration-300",children:g.jsxs(ft,{to:`/post/${t.slug}`,children:[t.image_url&&g.jsx("div",{className:"aspect-video w-full overflow-hidden",children:g.jsx("img",{src:t.image_url,alt:t.title,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-500"})}),g.jsxs("div",{className:"p-6",children:[g.jsxs("div",{className:"flex items-center text-sm text-stone-500 mb-3",children:[g.jsxs("span",{children:["Por ",(o=t.profiles)==null?void 0:o.name]}),g.jsx("span",{className:"mx-2",children:""}),g.jsx("time",{children:bp(t.created_at)})]}),g.jsx("h2",{className:"text-2xl font-serif text-stone-800 mb-3 leading-tight hover:text-stone-600 transition-colors",children:t.title}),g.jsx("p",{className:"text-stone-600 leading-relaxed mb-4",children:KO(t.content,150)}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("button",{onClick:s,className:"inline-flex items-center space-x-2 text-stone-600 hover:text-stone-800 transition-colors",children:[g.jsx(Sp,{className:"w-4 h-4"}),g.jsx("span",{className:"text-sm font-medium",children:t.upvotes})]}),g.jsxs("div",{className:"relative",children:[g.jsxs("button",{onClick:i,className:"inline-flex items-center space-x-1 text-stone-600 hover:text-stone-800 transition-colors",children:[g.jsx(ww,{className:"w-4 h-4"}),g.jsx("span",{className:"text-sm",children:"Compartilhar"})]}),n&&g.jsx("div",{className:"absolute right-0 top-full mt-2 z-10",children:g.jsx(kw,{url:`${window.location.origin}/post/${t.slug}`,title:t.title})})]})]})]})]})})}function Xu(){const[t,e]=k.useState([]),[n,r]=k.useState(!0),[s,i]=k.useState(null),o=async()=>{try{r(!0),i(null);const{data:c,error:d}=await Pe.from("posts").select(`
          *,
          profiles(id, name, email)
        `).order("created_at",{ascending:!1});if(d)throw d;e(c||[])}catch(c){i(c instanceof Error?c.message:"An error occurred")}finally{r(!1)}},l=async c=>{try{const{data:{user:d}}=await Pe.auth.getUser();if(!d)throw new Error("User not authenticated");const{data:f,error:h}=await Pe.from("posts").insert([{...c,author_id:d.id}]).select(`
          *,
          profiles(id, name, email)
        `).single();if(h)throw h;return e(p=>[f,...p]),f}catch(d){throw i(d instanceof Error?d.message:"Failed to create post"),d}},a=async(c,d)=>{try{const{data:{user:f}}=await Pe.auth.getUser();if(!f)throw new Error("User not authenticated");const{data:h,error:p}=await Pe.from("posts").update(d).eq("id",c).eq("author_id",f.id).select(`
          *,
          profiles(id, name, email)
        `).single();if(p)throw p;return e(y=>y.map(w=>w.id===c?h:w)),h}catch(f){throw i(f instanceof Error?f.message:"Failed to update post"),f}},u=async c=>{try{const{data:{user:d}}=await Pe.auth.getUser();if(!d)throw new Error("User not authenticated");const{error:f}=await Pe.from("posts").delete().eq("id",c).eq("author_id",d.id);if(f)throw f;e(h=>h.filter(p=>p.id!==c))}catch(d){throw i(d instanceof Error?d.message:"Failed to delete post"),d}};return k.useEffect(()=>{o()},[]),{posts:t,loading:n,error:s,fetchPosts:o,createPost:l,updatePost:a,deletePost:u}}function GO(t){const[e,n]=k.useState(null),[r,s]=k.useState(!0),[i,o]=k.useState(null),l=async()=>{try{s(!0),o(null);const{data:a,error:u}=await Pe.from("posts").select(`
          *,
          profiles(id, name, email)
        `).eq("slug",t).single();if(u)throw u;n(a)}catch(a){o(a instanceof Error?a.message:"Post not found"),n(null)}finally{s(!1)}};return k.useEffect(()=>{t&&l()},[t]),{post:e,loading:r,error:i,fetchPost:l}}function QO(){const{posts:t,loading:e,upvotePost:n}=Xu();return e?g.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[1,2,3,4].map(r=>g.jsxs("div",{className:"bg-white rounded-xl border border-stone-100 overflow-hidden animate-pulse",children:[g.jsx("div",{className:"aspect-video bg-stone-200"}),g.jsxs("div",{className:"p-6 space-y-4",children:[g.jsx("div",{className:"h-4 bg-stone-200 rounded w-1/3"}),g.jsx("div",{className:"h-6 bg-stone-200 rounded"}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("div",{className:"h-4 bg-stone-200 rounded"}),g.jsx("div",{className:"h-4 bg-stone-200 rounded w-2/3"})]})]})]},r))})}):g.jsxs(g.Fragment,{children:[g.jsxs(ls,{children:[g.jsx("title",{children:"Filosofia & Reflexes - Blog sobre pensamento e vida"}),g.jsx("meta",{name:"description",content:"Um espao para reflexes profundas sobre filosofia, vida e existncia. Explore ideias que transformam perspectivas."})]}),g.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:t.length===0?g.jsxs("div",{className:"text-center py-16",children:[g.jsx(Yu,{className:"w-16 h-16 text-stone-400 mx-auto mb-4"}),g.jsx("h2",{className:"text-2xl font-serif text-stone-600 mb-2",children:"Ainda no h publicaes"}),g.jsx("p",{className:"text-stone-500",children:"As primeiras reflexes filosficas aparecero em breve."})]}):g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"mb-12 text-center",children:[g.jsx("h1",{className:"text-4xl font-serif text-stone-800 mb-4",children:"Reflexes Filosficas"}),g.jsx("p",{className:"text-xl text-stone-600 max-w-2xl mx-auto leading-relaxed",children:"Explore pensamentos profundos sobre vida, existncia e o significado das coisas. Um espao para contemplao e dilogo intelectual."})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:t.map(r=>g.jsx(JO,{post:r,onUpvote:n},r.id))})]})})]})}function Sw(){return g.jsx("div",{className:"bg-stone-50 rounded-xl p-8 border border-stone-200",children:g.jsxs("div",{className:"flex items-start space-x-4",children:[g.jsx("div",{className:"w-16 h-16 bg-stone-300 rounded-full flex items-center justify-center",children:g.jsx(BO,{className:"w-8 h-8 text-stone-600"})}),g.jsxs("div",{className:"flex-1",children:[g.jsx("h3",{className:"text-xl font-serif text-stone-800 mb-2",children:"Guthierres Cavalcante"}),g.jsxs("div",{className:"flex items-center space-x-4 text-sm text-stone-600 mb-3",children:[g.jsxs("div",{className:"flex items-center space-x-1",children:[g.jsx(Yu,{className:"w-4 h-4"}),g.jsx("span",{children:"Entusiasta da Filosofia"})]}),g.jsxs("div",{className:"flex items-center space-x-1",children:[g.jsx(bO,{className:"w-4 h-4"}),g.jsx("span",{children:"So Miguel Paulista, SP"})]})]}),g.jsx("p",{className:"text-stone-700 leading-relaxed",children:"Seminarista diocesano em So Miguel Paulista, apaixonado pela busca da sabedoria e pela reflexo sobre os grandes temas da existncia humana. Atravs deste espao, compartilho pensamentos e insights sobre filosofia, espiritualidade e a jornada do conhecimento."})]})]})})}function YO(){const{slug:t}=A1(),{post:e,loading:n}=GO(t),r=ki(),[s,i]=k.useState(!1),[o,l]=k.useState(0);k.useEffect(()=>{e&&l(e.upvotes)},[e]);const a=async()=>{if(!e)return;const{error:d}=await Pe.from("posts").update({upvotes:o+1}).eq("id",e.id);d||l(f=>f+1)},u=async()=>{if(e&&window.confirm("Tem certeza que deseja deletar esta publicao?")){const{error:d}=await Pe.from("posts").delete().eq("id",e.id);d||r("/painel")}};if(n)return g.jsx("div",{className:"max-w-3xl mx-auto px-4 py-8",children:g.jsxs("div",{className:"animate-pulse",children:[g.jsx("div",{className:"aspect-video bg-stone-200 rounded-xl mb-8"}),g.jsxs("div",{className:"space-y-4",children:[g.jsx("div",{className:"h-4 bg-stone-200 rounded w-1/3"}),g.jsx("div",{className:"h-8 bg-stone-200 rounded"}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("div",{className:"h-4 bg-stone-200 rounded"}),g.jsx("div",{className:"h-4 bg-stone-200 rounded w-5/6"}),g.jsx("div",{className:"h-4 bg-stone-200 rounded w-3/4"})]})]})]})});if(!e)return g.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8 text-center",children:[g.jsx("h1",{className:"text-2xl font-serif text-stone-600 mb-4",children:"Artigo no encontrado"}),g.jsxs(ft,{to:"/",className:"text-stone-600 hover:text-stone-800 inline-flex items-center",children:[g.jsx(Do,{className:"w-4 h-4 mr-1"}),"Voltar ao incio"]})]});const c=`${window.location.origin}/post/${e.slug}`;return g.jsxs(g.Fragment,{children:[g.jsxs(ls,{children:[g.jsxs("title",{children:[e.title," - Filosofia & Reflexes"]}),g.jsx("meta",{name:"description",content:e.content.replace(/<[^>]*>/g,"").substring(0,160)}),g.jsx("meta",{property:"og:title",content:e.title}),g.jsx("meta",{property:"og:description",content:e.content.replace(/<[^>]*>/g,"").substring(0,160)}),g.jsx("meta",{property:"og:type",content:"article"}),g.jsx("meta",{property:"og:url",content:c}),e.image_url&&g.jsx("meta",{property:"og:image",content:e.image_url})]}),g.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8",children:[g.jsxs(ft,{to:"/",className:"text-stone-600 hover:text-stone-800 inline-flex items-center mb-8 transition-colors",children:[g.jsx(Do,{className:"w-4 h-4 mr-1"}),"Voltar ao incio"]}),g.jsxs("article",{children:[e.image_url&&g.jsx("div",{className:"aspect-video w-full rounded-xl overflow-hidden mb-8",children:g.jsx("img",{src:e.image_url,alt:e.title,className:"w-full h-full object-cover"})}),g.jsxs("header",{className:"mb-8",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsxs("div",{className:"flex items-center text-sm text-stone-500",children:[g.jsx("span",{children:"Por Guthierres Cavalcante"}),g.jsx("span",{className:"mx-2",children:""}),g.jsx("time",{children:bp(e.created_at)})]}),g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(ft,{to:`/editar/${e.id}`,className:"p-2 text-stone-600 hover:text-stone-800 transition-colors",children:g.jsx(zf,{className:"w-4 h-4"})}),g.jsx("button",{onClick:u,className:"p-2 text-red-600 hover:text-red-800 transition-colors",children:g.jsx(xw,{className:"w-4 h-4"})})]})]}),g.jsx("h1",{className:"text-4xl font-serif text-stone-800 leading-tight",children:e.title})]}),g.jsx("div",{className:"prose prose-stone prose-lg max-w-none leading-relaxed",dangerouslySetInnerHTML:{__html:e.content}}),g.jsx("footer",{className:"mt-12 pt-8 border-t border-stone-200",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("button",{onClick:a,className:"inline-flex items-center space-x-2 px-4 py-2 bg-stone-100 hover:bg-stone-200 rounded-lg transition-colors",children:[g.jsx(Sp,{className:"w-5 h-5"}),g.jsx("span",{className:"font-medium",children:o})]}),g.jsxs("div",{className:"relative",children:[g.jsxs("button",{onClick:()=>i(!s),className:"inline-flex items-center space-x-2 px-4 py-2 bg-stone-800 text-white hover:bg-stone-700 rounded-lg transition-colors",children:[g.jsx(ww,{className:"w-4 h-4"}),g.jsx("span",{children:"Compartilhar"})]}),s&&g.jsx("div",{className:"absolute right-0 top-full mt-2 z-10",children:g.jsx(kw,{url:c,title:e.title})})]})]})})]}),g.jsx("div",{className:"mt-16 pt-8 border-t border-stone-200",children:g.jsx(Sw,{})})]})]})}function XO({onSuccess:t}){const[e,n]=k.useState(""),[r,s]=k.useState(""),[i,o]=k.useState(!1),[l,a]=k.useState(!1),[u,c]=k.useState(""),{signIn:d}=Qu(),f=async h=>{h.preventDefault(),a(!0),c("");try{await d(e,r),t==null||t()}catch(p){c(p.message||"Erro ao fazer login")}finally{a(!1)}};return g.jsxs("form",{onSubmit:f,className:"space-y-6",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-stone-700 mb-2",children:"Email"}),g.jsx("input",{type:"email",id:"email",value:e,onChange:h=>n(h.target.value),required:!0,className:"w-full px-4 py-3 border border-stone-300 rounded-lg focus:ring-2 focus:ring-stone-500 focus:border-transparent",placeholder:"seu@email.com"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-stone-700 mb-2",children:"Senha"}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:i?"text":"password",id:"password",value:r,onChange:h=>s(h.target.value),required:!0,className:"w-full px-4 py-3 pr-12 border border-stone-300 rounded-lg focus:ring-2 focus:ring-stone-500 focus:border-transparent",placeholder:"Sua senha"}),g.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-stone-500 hover:text-stone-700",children:i?g.jsx(XN,{className:"w-5 h-5"}):g.jsx(vw,{className:"w-5 h-5"})})]})]}),u&&g.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-600 text-sm",children:u}),g.jsxs("button",{type:"submit",disabled:l,className:"w-full flex items-center justify-center space-x-2 bg-stone-800 text-white py-3 px-4 rounded-lg hover:bg-stone-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:[g.jsx(yO,{className:"w-5 h-5"}),g.jsx("span",{children:l?"Entrando...":"Entrar"})]})]})}function ZO(){const{user:t}=Qu(),e=ki();k.useEffect(()=>{t&&e("/painel")},[t,e]);const n=()=>{e("/painel")};return t?null:g.jsxs(g.Fragment,{children:[g.jsx(ls,{children:g.jsx("title",{children:"Login - Filosofia & Reflexes"})}),g.jsx("div",{className:"max-w-md mx-auto px-4 py-16",children:g.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-stone-200 p-8",children:[g.jsxs("div",{className:"text-center mb-8",children:[g.jsx("h1",{className:"text-3xl font-serif text-stone-800 mb-2",children:"rea do Administrador"}),g.jsx("p",{className:"text-stone-600",children:"Entre com suas credenciais para acessar o painel"})]}),g.jsx(XO,{onSuccess:n})]})})]})}var bw={exports:{}},Ew={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var li=k;function eM(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var tM=typeof Object.is=="function"?Object.is:eM,nM=li.useState,rM=li.useEffect,sM=li.useLayoutEffect,iM=li.useDebugValue;function oM(t,e){var n=e(),r=nM({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return sM(function(){s.value=n,s.getSnapshot=e,td(s)&&i({inst:s})},[t,n,e]),rM(function(){return td(s)&&i({inst:s}),t(function(){td(s)&&i({inst:s})})},[t]),iM(n),n}function td(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!tM(t,n)}catch{return!0}}function lM(t,e){return e()}var aM=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?lM:oM;Ew.useSyncExternalStore=li.useSyncExternalStore!==void 0?li.useSyncExternalStore:aM;bw.exports=Ew;var Ep=bw.exports;function Ae(t){this.content=t}Ae.prototype={constructor:Ae,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,s=r.find(t),i=r.content.slice();return s==-1?i.push(n||t,e):(i[s+1]=e,n&&(i[s]=n)),new Ae(i)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Ae(n)},addToStart:function(t,e){return new Ae([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Ae(n)},addBefore:function(t,e,n){var r=this.remove(e),s=r.content.slice(),i=r.find(t);return s.splice(i==-1?s.length:i,0,e,n),new Ae(s)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Ae.from(t),t.size?new Ae(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Ae.from(t),t.size?new Ae(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Ae.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Ae.from=function(t){if(t instanceof Ae)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Ae(e)};function Cw(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let s=t.child(r),i=e.child(r);if(s==i){n+=s.nodeSize;continue}if(!s.sameMarkup(i))return n;if(s.isText&&s.text!=i.text){for(let o=0;s.text[o]==i.text[o];o++)n++;return n}if(s.content.size||i.content.size){let o=Cw(s.content,i.content,n+1);if(o!=null)return o}n+=s.nodeSize}}function Tw(t,e,n,r){for(let s=t.childCount,i=e.childCount;;){if(s==0||i==0)return s==i?null:{a:n,b:r};let o=t.child(--s),l=e.child(--i),a=o.nodeSize;if(o==l){n-=a,r-=a;continue}if(!o.sameMarkup(l))return{a:n,b:r};if(o.isText&&o.text!=l.text){let u=0,c=Math.min(o.text.length,l.text.length);for(;u<c&&o.text[o.text.length-u-1]==l.text[l.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(o.content.size||l.content.size){let u=Tw(o.content,l.content,n-1,r-1);if(u)return u}n-=a,r-=a}}class _{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,s=0,i){for(let o=0,l=0;l<n;o++){let a=this.content[o],u=l+a.nodeSize;if(u>e&&r(a,s+l,i||null,o)!==!1&&a.content.size){let c=l+1;a.nodesBetween(Math.max(0,e-c),Math.min(a.content.size,n-c),r,s+c)}l=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,s){let i="",o=!0;return this.nodesBetween(e,n,(l,a)=>{let u=l.isText?l.text.slice(Math.max(e,a)-a,n-a):l.isLeaf?s?typeof s=="function"?s(l):s:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&u||l.isTextblock)&&r&&(o?o=!1:i+=r),i+=u},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,s=this.content.slice(),i=0;for(n.isText&&n.sameMarkup(r)&&(s[s.length-1]=n.withText(n.text+r.text),i=1);i<e.content.length;i++)s.push(e.content[i]);return new _(s,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],s=0;if(n>e)for(let i=0,o=0;o<n;i++){let l=this.content[i],a=o+l.nodeSize;a>e&&((o<e||a>n)&&(l.isText?l=l.cut(Math.max(0,e-o),Math.min(l.text.length,n-o)):l=l.cut(Math.max(0,e-o-1),Math.min(l.content.size,n-o-1))),r.push(l),s+=l.nodeSize),o=a}return new _(r,s)}cutByIndex(e,n){return e==n?_.empty:e==0&&n==this.content.length?this:new _(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let s=this.content.slice(),i=this.size+n.nodeSize-r.nodeSize;return s[e]=n,new _(s,i)}addToStart(e){return new _([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new _(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let s=this.content[n];e(s,r,n),r+=s.nodeSize}}findDiffStart(e,n=0){return Cw(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return Tw(this,e,n,r)}findIndex(e){if(e==0)return Pl(0,e);if(e==this.size)return Pl(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let s=this.child(n),i=r+s.nodeSize;if(i>=e)return i==e?Pl(n+1,i):Pl(n,r);r=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return _.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new _(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return _.empty;let n,r=0;for(let s=0;s<e.length;s++){let i=e[s];r+=i.nodeSize,s&&i.isText&&e[s-1].sameMarkup(i)?(n||(n=e.slice(0,s)),n[n.length-1]=i.withText(n[n.length-1].text+i.text)):n&&n.push(i)}return new _(n||e,r)}static from(e){if(!e)return _.empty;if(e instanceof _)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new _([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}_.empty=new _([],0);const nd={index:0,offset:0};function Pl(t,e){return nd.index=t,nd.offset=e,nd}function La(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!La(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!La(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let G=class Bf{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let s=0;s<e.length;s++){let i=e[s];if(this.eq(i))return e;if(this.type.excludes(i.type))n||(n=e.slice(0,s));else{if(i.type.excludes(this.type))return e;!r&&i.type.rank>this.type.rank&&(n||(n=e.slice(0,s)),n.push(this),r=!0),n&&n.push(i)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&La(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let s=r.create(n.attrs);return r.checkAttrs(s.attrs),s}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Bf.none;if(e instanceof Bf)return[e];let n=e.slice();return n.sort((r,s)=>r.type.rank-s.type.rank),n}};G.none=[];class $a extends Error{}class M{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=Nw(this.content,e+this.openStart,n);return r&&new M(r,this.openStart,this.openEnd)}removeBetween(e,n){return new M(_w(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return M.empty;let r=n.openStart||0,s=n.openEnd||0;if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new M(_.fromJSON(e,n.content),r,s)}static maxOpen(e,n=!0){let r=0,s=0;for(let i=e.firstChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.firstChild)r++;for(let i=e.lastChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.lastChild)s++;return new M(e,r,s)}}M.empty=new M(_.empty,0,0);function _w(t,e,n){let{index:r,offset:s}=t.findIndex(e),i=t.maybeChild(r),{index:o,offset:l}=t.findIndex(n);if(s==e||i.isText){if(l!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,i.copy(_w(i.content,e-s-1,n-s-1)))}function Nw(t,e,n,r){let{index:s,offset:i}=t.findIndex(e),o=t.maybeChild(s);if(i==e||o.isText)return r&&!r.canReplace(s,s,n)?null:t.cut(0,e).append(n).append(t.cut(e));let l=Nw(o.content,e-i-1,n,o);return l&&t.replaceChild(s,o.copy(l))}function uM(t,e,n){if(n.openStart>t.depth)throw new $a("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new $a("Inconsistent open depths");return Ow(t,e,n,0)}function Ow(t,e,n,r){let s=t.index(r),i=t.node(r);if(s==e.index(r)&&r<t.depth-n.openStart){let o=Ow(t,e,n,r+1);return i.copy(i.content.replaceChild(s,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,l=o.content;return Vr(o,l.cut(0,t.parentOffset).append(n.content).append(l.cut(e.parentOffset)))}else{let{start:o,end:l}=cM(n,t);return Vr(i,Aw(t,o,l,e,r))}else return Vr(i,za(t,e,r))}function Mw(t,e){if(!e.type.compatibleContent(t.type))throw new $a("Cannot join "+e.type.name+" onto "+t.type.name)}function Ff(t,e,n){let r=t.node(n);return Mw(r,e.node(n)),r}function Hr(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function oo(t,e,n,r){let s=(e||t).node(n),i=0,o=e?e.index(n):s.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(Hr(t.nodeAfter,r),i++));for(let l=i;l<o;l++)Hr(s.child(l),r);e&&e.depth==n&&e.textOffset&&Hr(e.nodeBefore,r)}function Vr(t,e){return t.type.checkContent(e),t.copy(e)}function Aw(t,e,n,r,s){let i=t.depth>s&&Ff(t,e,s+1),o=r.depth>s&&Ff(n,r,s+1),l=[];return oo(null,t,s,l),i&&o&&e.index(s)==n.index(s)?(Mw(i,o),Hr(Vr(i,Aw(t,e,n,r,s+1)),l)):(i&&Hr(Vr(i,za(t,e,s+1)),l),oo(e,n,s,l),o&&Hr(Vr(o,za(n,r,s+1)),l)),oo(r,null,s,l),new _(l)}function za(t,e,n){let r=[];if(oo(null,t,n,r),t.depth>n){let s=Ff(t,e,n+1);Hr(Vr(s,za(t,e,n+1)),r)}return oo(e,null,n,r),new _(r)}function cM(t,e){let n=e.depth-t.openStart,s=e.node(n).copy(t.content);for(let i=n-1;i>=0;i--)s=e.node(i).copy(_.from(s));return{start:s.resolveNoCache(t.openStart+n),end:s.resolveNoCache(s.content.size-t.openEnd-n)}}class Lo{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],s=e.child(n);return r?e.child(n).cut(r):s}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],s=n==0?0:this.path[n*3-1]+1;for(let i=0;i<e;i++)s+=r.child(i).nodeSize;return s}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return G.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),s=e.maybeChild(n);if(!r){let l=r;r=s,s=l}let i=r.marks;for(var o=0;o<i.length;o++)i[o].type.spec.inclusive===!1&&(!s||!i[o].isInSet(s.marks))&&(i=i[o--].removeFromSet(i));return i}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,s=e.parent.maybeChild(e.index());for(var i=0;i<r.length;i++)r[i].type.spec.inclusive===!1&&(!s||!r[i].isInSet(s.marks))&&(r=r[i--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Ba(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],s=0,i=n;for(let o=e;;){let{index:l,offset:a}=o.content.findIndex(i),u=i-a;if(r.push(o,l,s+a),!u||(o=o.child(l),o.isText))break;i=u-1,s+=a+1}return new Lo(n,r,i)}static resolveCached(e,n){let r=Vg.get(e);if(r)for(let i=0;i<r.elts.length;i++){let o=r.elts[i];if(o.pos==n)return o}else Vg.set(e,r=new dM);let s=r.elts[r.i]=Lo.resolve(e,n);return r.i=(r.i+1)%fM,s}}class dM{constructor(){this.elts=[],this.i=0}}const fM=12,Vg=new WeakMap;class Ba{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const hM=Object.create(null);class Ut{constructor(e,n,r,s=G.none){this.type=e,this.attrs=n,this.marks=s,this.content=r||_.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,s=0){this.content.nodesBetween(e,n,r,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,s){return this.content.textBetween(e,n,r,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&La(this.attrs,n||e.defaultAttrs||hM)&&G.sameSet(this.marks,r||G.none)}copy(e=null){return e==this.content?this:new Ut(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Ut(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return M.empty;let s=this.resolve(e),i=this.resolve(n),o=r?0:s.sharedDepth(n),l=s.start(o),u=s.node(o).content.cut(s.pos-l,i.pos-l);return new M(u,s.depth-o,i.depth-o)}replace(e,n,r){return uM(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:s}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(s==e||n.isText)return n;e-=s+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let s=this.content.child(n-1);return{node:s,index:n-1,offset:r-s.nodeSize}}resolve(e){return Lo.resolveCached(this,e)}resolveNoCache(e){return Lo.resolve(this,e)}rangeHasMark(e,n,r){let s=!1;return n>e&&this.nodesBetween(e,n,i=>(r.isInSet(i.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Pw(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=_.empty,s=0,i=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,s,i),l=o&&o.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let a=s;a<i;a++)if(!this.type.allowsMarks(r.child(a).marks))return!1;return!0}canReplaceWith(e,n,r,s){if(s&&!this.type.allowsMarks(s))return!1;let i=this.contentMatchAt(e).matchType(r),o=i&&i.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=G.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!G.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let s=_.fromJSON(e,n.content),i=e.nodeType(n.type).create(n.attrs,s,r);return i.type.checkAttrs(i.attrs),i}}Ut.prototype.text=void 0;class Fa extends Ut{constructor(e,n,r,s){if(super(e,n,null,s),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Pw(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Fa(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Fa(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Pw(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Zr{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new pM(e,n);if(r.next==null)return Zr.empty;let s=Rw(r);r.next&&r.err("Unexpected trailing text");let i=kM(xM(s));return SM(i,r),i}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let s=this;for(let i=n;s&&i<r;i++)s=s.matchType(e.child(i).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let s=[this];function i(o,l){let a=o.matchFragment(e,r);if(a&&(!n||a.validEnd))return _.from(l.map(u=>u.createAndFill()));for(let u=0;u<o.next.length;u++){let{type:c,next:d}=o.next[u];if(!(c.isText||c.hasRequiredAttrs())&&s.indexOf(d)==-1){s.push(d);let f=i(d,l.concat(c));if(f)return f}}return null}return i(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let s=r.shift(),i=s.match;if(i.matchType(e)){let o=[];for(let l=s;l.type;l=l.via)o.push(l.type);return o.reverse()}for(let o=0;o<i.next.length;o++){let{type:l,next:a}=i.next[o];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!s.type||a.validEnd)&&(r.push({match:l.contentMatch,type:l,via:s}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let s=0;s<r.next.length;s++)e.indexOf(r.next[s].next)==-1&&n(r.next[s].next)}return n(this),e.map((r,s)=>{let i=s+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)i+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return i}).join(`
`)}}Zr.empty=new Zr(!0);class pM{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Rw(t){let e=[];do e.push(mM(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function mM(t){let e=[];do e.push(gM(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function gM(t){let e=wM(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=yM(t,e);else break;return e}function Wg(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function yM(t,e){let n=Wg(t),r=n;return t.eat(",")&&(t.next!="}"?r=Wg(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function vM(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let s=[];for(let i in n){let o=n[i];o.isInGroup(e)&&s.push(o)}return s.length==0&&t.err("No node type or group '"+e+"' found"),s}function wM(t){if(t.eat("(")){let e=Rw(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=vM(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function xM(t){let e=[[]];return s(i(t,0),n()),e;function n(){return e.push([])-1}function r(o,l,a){let u={term:a,to:l};return e[o].push(u),u}function s(o,l){o.forEach(a=>a.to=l)}function i(o,l){if(o.type=="choice")return o.exprs.reduce((a,u)=>a.concat(i(u,l)),[]);if(o.type=="seq")for(let a=0;;a++){let u=i(o.exprs[a],l);if(a==o.exprs.length-1)return u;s(u,l=n())}else if(o.type=="star"){let a=n();return r(l,a),s(i(o.expr,a),a),[r(a)]}else if(o.type=="plus"){let a=n();return s(i(o.expr,l),a),s(i(o.expr,a),a),[r(a)]}else{if(o.type=="opt")return[r(l)].concat(i(o.expr,l));if(o.type=="range"){let a=l;for(let u=0;u<o.min;u++){let c=n();s(i(o.expr,a),c),a=c}if(o.max==-1)s(i(o.expr,a),a);else for(let u=o.min;u<o.max;u++){let c=n();r(a,c),s(i(o.expr,a),c),a=c}return[r(a)]}else{if(o.type=="name")return[r(l,void 0,o.value)];throw new Error("Unknown expr type")}}}}function Iw(t,e){return e-t}function Kg(t,e){let n=[];return r(e),n.sort(Iw);function r(s){let i=t[s];if(i.length==1&&!i[0].term)return r(i[0].to);n.push(s);for(let o=0;o<i.length;o++){let{term:l,to:a}=i[o];!l&&n.indexOf(a)==-1&&r(a)}}}function kM(t){let e=Object.create(null);return n(Kg(t,0));function n(r){let s=[];r.forEach(o=>{t[o].forEach(({term:l,to:a})=>{if(!l)return;let u;for(let c=0;c<s.length;c++)s[c][0]==l&&(u=s[c][1]);Kg(t,a).forEach(c=>{u||s.push([l,u=[]]),u.indexOf(c)==-1&&u.push(c)})})});let i=e[r.join(",")]=new Zr(r.indexOf(t.length-1)>-1);for(let o=0;o<s.length;o++){let l=s[o][1].sort(Iw);i.next.push({type:s[o][0],next:e[l.join(",")]||n(l)})}return i}}function SM(t,e){for(let n=0,r=[t];n<r.length;n++){let s=r[n],i=!s.validEnd,o=[];for(let l=0;l<s.next.length;l++){let{type:a,next:u}=s.next[l];o.push(a.name),i&&!(a.isText||a.hasRequiredAttrs())&&(i=!1),r.indexOf(u)==-1&&r.push(u)}i&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function jw(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function Dw(t,e){let n=Object.create(null);for(let r in t){let s=e&&e[r];if(s===void 0){let i=t[r];if(i.hasDefault)s=i.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=s}return n}function Lw(t,e,n,r){for(let s in e)if(!(s in t))throw new RangeError(`Unsupported attribute ${s} for ${n} of type ${s}`);for(let s in t){let i=t[s];i.validate&&i.validate(e[s])}}function $w(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new EM(t,r,e[r]);return n}let qg=class zw{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=$w(e,r.attrs),this.defaultAttrs=jw(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Zr.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Dw(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ut(this,this.computeAttrs(e),_.from(n),G.setFrom(r))}createChecked(e=null,n,r){return n=_.from(n),this.checkContent(n),new Ut(this,this.computeAttrs(e),n,G.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=_.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let s=this.contentMatch.matchFragment(n),i=s&&s.fillBefore(_.empty,!0);return i?new Ut(this,e,n.append(i),G.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Lw(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:G.none:e}static compile(e,n){let r=Object.create(null);e.forEach((i,o)=>r[i]=new zw(i,n,o));let s=n.spec.topNode||"doc";if(!r[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function bM(t,e,n){let r=n.split("|");return s=>{let i=s===null?"null":typeof s;if(r.indexOf(i)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${i}`)}}class EM{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?bM(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Zu{constructor(e,n,r,s){this.name=e,this.rank=n,this.schema=r,this.spec=s,this.attrs=$w(e,s.attrs),this.excluded=null;let i=jw(this.attrs);this.instance=i?new G(this,i):null}create(e=null){return!e&&this.instance?this.instance:new G(this,Dw(this.attrs,e))}static compile(e,n){let r=Object.create(null),s=0;return e.forEach((i,o)=>r[i]=new Zu(i,s++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){Lw(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Bw{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let s in e)n[s]=e[s];n.nodes=Ae.from(e.nodes),n.marks=Ae.from(e.marks||{}),this.nodes=qg.compile(this.spec.nodes,this),this.marks=Zu.compile(this.spec.marks,this);let r=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let i=this.nodes[s],o=i.spec.content||"",l=i.spec.marks;if(i.contentMatch=r[o]||(r[o]=Zr.parse(o,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!i.isInline||!i.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=i}i.markSet=l=="_"?null:l?Jg(this,l.split(" ")):l==""||!i.inlineContent?[]:null}for(let s in this.marks){let i=this.marks[s],o=i.spec.excludes;i.excluded=o==null?[i]:o==""?[]:Jg(this,o.split(" "))}this.nodeFromJSON=s=>Ut.fromJSON(this,s),this.markFromJSON=s=>G.fromJSON(this,s),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof qg){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,s)}text(e,n){let r=this.nodes.text;return new Fa(r,r.defaultAttrs,e,G.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function Jg(t,e){let n=[];for(let r=0;r<e.length;r++){let s=e[r],i=t.marks[s],o=i;if(i)n.push(i);else for(let l in t.marks){let a=t.marks[l];(s=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(s)>-1)&&n.push(o=a)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function CM(t){return t.tag!=null}function TM(t){return t.style!=null}class ar{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(s=>{if(CM(s))this.tags.push(s);else if(TM(s)){let i=/[^=]*/.exec(s.style)[0];r.indexOf(i)<0&&r.push(i),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let i=e.nodes[s.node];return i.contentMatch.matchType(i)})}parse(e,n={}){let r=new Qg(this,n,!1);return r.addAll(e,G.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new Qg(this,n,!0);return r.addAll(e,G.none,n.from,n.to),M.maxOpen(r.finish())}matchTag(e,n,r){for(let s=r?this.tags.indexOf(r)+1:0;s<this.tags.length;s++){let i=this.tags[s];if(OM(e,i.tag)&&(i.namespace===void 0||e.namespaceURI==i.namespace)&&(!i.context||n.matchesContext(i.context))){if(i.getAttrs){let o=i.getAttrs(e);if(o===!1)continue;i.attrs=o||void 0}return i}}}matchStyle(e,n,r,s){for(let i=s?this.styles.indexOf(s)+1:0;i<this.styles.length;i++){let o=this.styles[i],l=o.style;if(!(l.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=n))){if(o.getAttrs){let a=o.getAttrs(n);if(a===!1)continue;o.attrs=a||void 0}return o}}}static schemaRules(e){let n=[];function r(s){let i=s.priority==null?50:s.priority,o=0;for(;o<n.length;o++){let l=n[o];if((l.priority==null?50:l.priority)<i)break}n.splice(o,0,s)}for(let s in e.marks){let i=e.marks[s].spec.parseDOM;i&&i.forEach(o=>{r(o=Yg(o)),o.mark||o.ignore||o.clearMark||(o.mark=s)})}for(let s in e.nodes){let i=e.nodes[s].spec.parseDOM;i&&i.forEach(o=>{r(o=Yg(o)),o.node||o.ignore||o.mark||(o.node=s)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new ar(e,ar.schemaRules(e)))}}const Fw={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},_M={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Uw={ol:!0,ul:!0},$o=1,Uf=2,lo=4;function Gg(t,e,n){return e!=null?(e?$o:0)|(e==="full"?Uf:0):t&&t.whitespace=="pre"?$o|Uf:n&~lo}class Rl{constructor(e,n,r,s,i,o){this.type=e,this.attrs=n,this.marks=r,this.solid=s,this.options=o,this.content=[],this.activeMarks=G.none,this.match=i||(o&lo?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(_.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,s;return(s=r.findWrapping(e.type))?(this.match=r,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&$o)){let r=this.content[this.content.length-1],s;if(r&&r.isText&&(s=/[ \t\r\n\u000c]+$/.exec(r.text))){let i=r;r.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-s[0].length))}}let n=_.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(_.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Fw.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Qg{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let s=n.topNode,i,o=Gg(null,n.preserveWhitespace,0)|(r?lo:0);s?i=new Rl(s.type,s.attrs,G.none,!0,n.topMatch||s.type.contentMatch,o):r?i=new Rl(null,null,G.none,!0,null,o):i=new Rl(e.schema.topNodeType,null,G.none,!0,null,o),this.nodes=[i],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,s=this.top,i=s.options&Uf?"full":this.localPreserveWS||(s.options&$o)>0;if(i==="full"||s.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(i)i!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=s.content[s.content.length-1],l=e.previousSibling;(!o||l&&l.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let s=this.localPreserveWS,i=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),l;Uw.hasOwnProperty(o)&&this.parser.normalizeLists&&NM(e);let a=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(l=this.parser.matchTag(e,this,r));e:if(a?a.ignore:_M.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,n);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(e=a.skip);let u,c=this.needsBlock;if(Fw.hasOwnProperty(o))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),u=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let d=a&&a.skip?n:this.readStyles(e,n);d&&this.addAll(e,d),u&&this.sync(i),this.needsBlock=c}else{let u=this.readStyles(e,n);u&&this.addElementByRule(e,a,u,a.consuming===!1?l:void 0)}this.localPreserveWS=s}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let i=this.parser.matchedStyles[s],o=r.getPropertyValue(i);if(o)for(let l=void 0;;){let a=this.parser.matchStyle(i,o,this,l);if(!a)break;if(a.ignore)return null;if(a.clearMark?n=n.filter(u=>!a.clearMark(u)):n=n.concat(this.parser.schema.marks[a.mark].create(a.attrs)),a.consuming===!1)l=a;else break}}return n}addElementByRule(e,n,r,s){let i,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let a=this.enter(o,n.attrs||null,r,n.preserveWhitespace);a&&(i=!0,r=a)}else{let a=this.parser.schema.marks[n.mark];r=r.concat(a.create(n.attrs))}let l=this.top;if(o&&o.isLeaf)this.findInside(e);else if(s)this.addElement(e,r,s);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a,r,!1));else{let a=e;typeof n.contentElement=="string"?a=e.querySelector(n.contentElement):typeof n.contentElement=="function"?a=n.contentElement(e):n.contentElement&&(a=n.contentElement),this.findAround(e,a,!0),this.addAll(a,r),this.findAround(e,a,!1)}i&&this.sync(l)&&this.open--}addAll(e,n,r,s){let i=r||0;for(let o=r?e.childNodes[r]:e.firstChild,l=s==null?null:e.childNodes[s];o!=l;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o,n);this.findAtPoint(e,i)}findPlace(e,n,r){let s,i;for(let o=this.open,l=0;o>=0;o--){let a=this.nodes[o],u=a.findWrapping(e);if(u&&(!s||s.length>u.length+l)&&(s=u,i=a,!u.length))break;if(a.solid){if(r)break;l+=2}}if(!s)return null;this.sync(i);for(let o=0;o<s.length;o++)n=this.enterInner(s[o],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(n=this.enterInner(i,null,n))}let s=this.findPlace(e,n,r);if(s){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let o=G.none;for(let l of s.concat(e.marks))(i.type?i.type.allowsMarkType(l.type):Xg(l.type,e.type))&&(o=l.addToSet(o));return i.content.push(e.mark(o)),!0}return!1}enter(e,n,r,s){let i=this.findPlace(e.create(n),r,!1);return i&&(i=this.enterInner(e,n,r,!0,s)),i}enterInner(e,n,r,s=!1,i){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let l=Gg(e,i,o.options);o.options&lo&&o.content.length==0&&(l|=lo);let a=G.none;return r=r.filter(u=>(o.type?o.type.allowsMarkType(u.type):Xg(u.type,e))?(a=u.addToSet(a),!1):!0),this.nodes.push(new Rl(e,n,a,s,null,l)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=$o)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let s=r.length-1;s>=0;s--)e+=r[s].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&n.compareDocumentPosition(this.find[s].node)&(r?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,s=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(s?0:1),o=(l,a)=>{for(;l>=0;l--){let u=n[l];if(u==""){if(l==n.length-1||l==0)continue;for(;a>=i;a--)if(o(l-1,a))return!0;return!1}else{let c=a>0||a==0&&s?this.nodes[a].type:r&&a>=i?r.node(a-i).type:null;if(!c||c.name!=u&&!c.isInGroup(u))return!1;a--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function NM(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Uw.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function OM(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Yg(t){let e={};for(let n in t)e[n]=t[n];return e}function Xg(t,e){let n=e.schema.nodes;for(let r in n){let s=n[r];if(!s.allowsMarkType(t))continue;let i=[],o=l=>{i.push(l);for(let a=0;a<l.edgeCount;a++){let{type:u,next:c}=l.edge(a);if(u==e||i.indexOf(c)<0&&o(c))return!0}};if(o(s.contentMatch))return!0}}class cs{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=rd(n).createDocumentFragment());let s=r,i=[];return e.forEach(o=>{if(i.length||o.marks.length){let l=0,a=0;for(;l<i.length&&a<o.marks.length;){let u=o.marks[a];if(!this.marks[u.type.name]){a++;continue}if(!u.eq(i[l][0])||u.type.spec.spanning===!1)break;l++,a++}for(;l<i.length;)s=i.pop()[1];for(;a<o.marks.length;){let u=o.marks[a++],c=this.serializeMark(u,o.isInline,n);c&&(i.push([u,s]),s.appendChild(c.dom),s=c.contentDOM||c.dom)}}s.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:s}=ia(rd(n),this.nodes[e.type.name](e),null,e.attrs);if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,s)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let s=e.marks.length-1;s>=0;s--){let i=this.serializeMark(e.marks[s],e.isInline,n);i&&((i.contentDOM||i.dom).appendChild(r),r=i.dom)}return r}serializeMark(e,n,r={}){let s=this.marks[e.type.name];return s&&ia(rd(r),s(e,n),null,e.attrs)}static renderSpec(e,n,r=null,s){return ia(e,n,r,s)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new cs(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=Zg(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return Zg(e.marks)}}function Zg(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function rd(t){return t.document||window.document}const ey=new WeakMap;function MM(t){let e=ey.get(t);return e===void 0&&ey.set(t,e=AM(t)),e}function AM(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let s=0;s<r.length;s++)n(r[s]);else for(let s in r)n(r[s])}return n(t),e}function ia(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let s=e[0],i;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(i=MM(r))&&i.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=s.indexOf(" ");o>0&&(n=s.slice(0,o),s=s.slice(o+1));let l,a=n?t.createElementNS(n,s):t.createElement(s),u=e[1],c=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){c=2;for(let d in u)if(u[d]!=null){let f=d.indexOf(" ");f>0?a.setAttributeNS(d.slice(0,f),d.slice(f+1),u[d]):d=="style"&&a.style?a.style.cssText=u[d]:a.setAttribute(d,u[d])}}for(let d=c;d<e.length;d++){let f=e[d];if(f===0){if(d<e.length-1||d>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:h,contentDOM:p}=ia(t,f,n,r);if(a.appendChild(h),p){if(l)throw new RangeError("Multiple content holes");l=p}}}return{dom:a,contentDOM:l}}const Hw=65535,Vw=Math.pow(2,16);function PM(t,e){return t+e*Vw}function ty(t){return t&Hw}function RM(t){return(t-(t&Hw))/Vw}const Ww=1,Kw=2,oa=4,qw=8;class Hf{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&qw)>0}get deletedBefore(){return(this.delInfo&(Ww|oa))>0}get deletedAfter(){return(this.delInfo&(Kw|oa))>0}get deletedAcross(){return(this.delInfo&oa)>0}}class ct{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&ct.empty)return ct.empty}recover(e){let n=0,r=ty(e);if(!this.inverted)for(let s=0;s<r;s++)n+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[r*3]+n+RM(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let s=0,i=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?s:0);if(a>e)break;let u=this.ranges[l+i],c=this.ranges[l+o],d=a+u;if(e<=d){let f=u?e==a?-1:e==d?1:n:n,h=a+s+(f<0?0:c);if(r)return h;let p=e==(n<0?a:d)?null:PM(l/3,e-a),y=e==a?Kw:e==d?Ww:oa;return(n<0?e!=a:e!=d)&&(y|=qw),new Hf(h,y,p)}s+=c-u}return r?e+s:new Hf(e+s,0,null)}touches(e,n){let r=0,s=ty(n),i=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let u=this.ranges[l+i],c=a+u;if(e<=c&&l==s*3)return!0;r+=this.ranges[l+o]-u}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let s=0,i=0;s<this.ranges.length;s+=3){let o=this.ranges[s],l=o-(this.inverted?i:0),a=o+(this.inverted?0:i),u=this.ranges[s+n],c=this.ranges[s+r];e(l,l+u,a,a+c),i+=c-u}}invert(){return new ct(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?ct.empty:new ct(e<0?[0,-e,0]:[0,0,e])}}ct.empty=new ct([]);class zo{constructor(e,n,r=0,s=e?e.length:0){this.mirror=n,this.from=r,this.to=s,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new zo(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let s=e.getMirror(n);this.appendMap(e._maps[n],s!=null&&s<n?r+s:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let s=e.getMirror(n);this.appendMap(e._maps[n].invert(),s!=null&&s>n?r-s-1:void 0)}}invert(){let e=new zo;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let s=0;for(let i=this.from;i<this.to;i++){let o=this._maps[i],l=o.mapResult(e,n);if(l.recover!=null){let a=this.getMirror(i);if(a!=null&&a>i&&a<this.to){i=a,e=this._maps[a].recover(l.recover);continue}}s|=l.delInfo,e=l.pos}return r?e:new Hf(e,s,null)}}const sd=Object.create(null);class He{getMap(){return ct.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=sd[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in sd)throw new RangeError("Duplicate use of step JSON ID "+e);return sd[e]=n,n.prototype.jsonID=e,n}}class me{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new me(e,null)}static fail(e){return new me(null,e)}static fromReplace(e,n,r,s){try{return me.ok(e.replace(n,r,s))}catch(i){if(i instanceof $a)return me.fail(i.message);throw i}}}function Cp(t,e,n){let r=[];for(let s=0;s<t.childCount;s++){let i=t.child(s);i.content.size&&(i=i.copy(Cp(i.content,e,i))),i.isInline&&(i=e(i,n,s)),r.push(i)}return _.fromArray(r)}class Yn extends He{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),s=r.node(r.sharedDepth(this.to)),i=new M(Cp(n.content,(o,l)=>!o.isAtom||!l.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),s),n.openStart,n.openEnd);return me.fromReplace(e,this.from,this.to,i)}invert(){return new zt(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Yn(n.pos,r.pos,this.mark)}merge(e){return e instanceof Yn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Yn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Yn(n.from,n.to,e.markFromJSON(n.mark))}}He.jsonID("addMark",Yn);class zt extends He{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new M(Cp(n.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),n.openStart,n.openEnd);return me.fromReplace(e,this.from,this.to,r)}invert(){return new Yn(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new zt(n.pos,r.pos,this.mark)}merge(e){return e instanceof zt&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new zt(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new zt(n.from,n.to,e.markFromJSON(n.mark))}}He.jsonID("removeMark",zt);class Xn extends He{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return me.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return me.fromReplace(e,this.pos,this.pos+1,new M(_.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let s=0;s<n.marks.length;s++)if(!n.marks[s].isInSet(r))return new Xn(this.pos,n.marks[s]);return new Xn(this.pos,this.mark)}}return new es(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Xn(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Xn(n.pos,e.markFromJSON(n.mark))}}He.jsonID("addNodeMark",Xn);class es extends He{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return me.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return me.fromReplace(e,this.pos,this.pos+1,new M(_.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Xn(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new es(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new es(n.pos,e.markFromJSON(n.mark))}}He.jsonID("removeNodeMark",es);class Ce extends He{constructor(e,n,r,s=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=s}apply(e){return this.structure&&Vf(e,this.from,this.to)?me.fail("Structure replace would overwrite content"):me.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new ct([this.from,this.to-this.from,this.slice.size])}invert(e){return new Ce(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Ce(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Ce)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?M.empty:new M(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Ce(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?M.empty:new M(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Ce(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ce(n.from,n.to,M.fromJSON(e,n.slice),!!n.structure)}}He.jsonID("replace",Ce);class _e extends He{constructor(e,n,r,s,i,o,l=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=s,this.slice=i,this.insert=o,this.structure=l}apply(e){if(this.structure&&(Vf(e,this.from,this.gapFrom)||Vf(e,this.gapTo,this.to)))return me.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return me.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?me.fromReplace(e,this.from,this.to,r):me.fail("Content does not fit in gap")}getMap(){return new ct([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new _e(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),s=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||s<n.pos||i>r.pos?null:new _e(n.pos,r.pos,s,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new _e(n.from,n.to,n.gapFrom,n.gapTo,M.fromJSON(e,n.slice),n.insert,!!n.structure)}}He.jsonID("replaceAround",_e);function Vf(t,e,n){let r=t.resolve(e),s=n-e,i=r.depth;for(;s>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,s--;if(s>0){let o=r.node(i).maybeChild(r.indexAfter(i));for(;s>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,s--}}return!1}function IM(t,e,n,r){let s=[],i=[],o,l;t.doc.nodesBetween(e,n,(a,u,c)=>{if(!a.isInline)return;let d=a.marks;if(!r.isInSet(d)&&c.type.allowsMarkType(r.type)){let f=Math.max(u,e),h=Math.min(u+a.nodeSize,n),p=r.addToSet(d);for(let y=0;y<d.length;y++)d[y].isInSet(p)||(o&&o.to==f&&o.mark.eq(d[y])?o.to=h:s.push(o=new zt(f,h,d[y])));l&&l.to==f?l.to=h:i.push(l=new Yn(f,h,r))}}),s.forEach(a=>t.step(a)),i.forEach(a=>t.step(a))}function jM(t,e,n,r){let s=[],i=0;t.doc.nodesBetween(e,n,(o,l)=>{if(!o.isInline)return;i++;let a=null;if(r instanceof Zu){let u=o.marks,c;for(;c=r.isInSet(u);)(a||(a=[])).push(c),u=c.removeFromSet(u)}else r?r.isInSet(o.marks)&&(a=[r]):a=o.marks;if(a&&a.length){let u=Math.min(l+o.nodeSize,n);for(let c=0;c<a.length;c++){let d=a[c],f;for(let h=0;h<s.length;h++){let p=s[h];p.step==i-1&&d.eq(s[h].style)&&(f=p)}f?(f.to=u,f.step=i):s.push({style:d,from:Math.max(l,e),to:u,step:i})}}}),s.forEach(o=>t.step(new zt(o.from,o.to,o.style)))}function Tp(t,e,n,r=n.contentMatch,s=!0){let i=t.doc.nodeAt(e),o=[],l=e+1;for(let a=0;a<i.childCount;a++){let u=i.child(a),c=l+u.nodeSize,d=r.matchType(u.type);if(!d)o.push(new Ce(l,c,M.empty));else{r=d;for(let f=0;f<u.marks.length;f++)n.allowsMarkType(u.marks[f].type)||t.step(new zt(l,c,u.marks[f]));if(s&&u.isText&&n.whitespace!="pre"){let f,h=/\r?\n|\r/g,p;for(;f=h.exec(u.text);)p||(p=new M(_.from(n.schema.text(" ",n.allowedMarks(u.marks))),0,0)),o.push(new Ce(l+f.index,l+f.index+f[0].length,p))}}l=c}if(!r.validEnd){let a=r.fillBefore(_.empty,!0);t.replace(l,l,new M(a,0,0))}for(let a=o.length-1;a>=0;a--)t.step(o[a])}function DM(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Ei(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let s=t.$from.node(r),i=t.$from.index(r),o=t.$to.indexAfter(r);if(r<t.depth&&s.canReplace(i,o,n))return r;if(r==0||s.type.spec.isolating||!DM(s,i,o))break}return null}function LM(t,e,n){let{$from:r,$to:s,depth:i}=e,o=r.before(i+1),l=s.after(i+1),a=o,u=l,c=_.empty,d=0;for(let p=i,y=!1;p>n;p--)y||r.index(p)>0?(y=!0,c=_.from(r.node(p).copy(c)),d++):a--;let f=_.empty,h=0;for(let p=i,y=!1;p>n;p--)y||s.after(p+1)<s.end(p)?(y=!0,f=_.from(s.node(p).copy(f)),h++):u++;t.step(new _e(a,u,o,l,new M(c.append(f),d,h),c.size-d,!0))}function _p(t,e,n=null,r=t){let s=$M(t,e),i=s&&zM(r,e);return i?s.map(ny).concat({type:e,attrs:n}).concat(i.map(ny)):null}function ny(t){return{type:t,attrs:null}}function $M(t,e){let{parent:n,startIndex:r,endIndex:s}=t,i=n.contentMatchAt(r).findWrapping(e);if(!i)return null;let o=i.length?i[0]:e;return n.canReplaceWith(r,s,o)?i:null}function zM(t,e){let{parent:n,startIndex:r,endIndex:s}=t,i=n.child(r),o=e.contentMatch.findWrapping(i.type);if(!o)return null;let a=(o.length?o[o.length-1]:e).contentMatch;for(let u=r;a&&u<s;u++)a=a.matchType(n.child(u).type);return!a||!a.validEnd?null:o}function BM(t,e,n){let r=_.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let l=n[o].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=_.from(n[o].type.create(n[o].attrs,r))}let s=e.start,i=e.end;t.step(new _e(s,i,s,i,new M(r,0,0),n.length,!0))}function FM(t,e,n,r,s){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=t.steps.length;t.doc.nodesBetween(e,n,(o,l)=>{let a=typeof s=="function"?s(o):s;if(o.isTextblock&&!o.hasMarkup(r,a)&&UM(t.doc,t.mapping.slice(i).map(l),r)){let u=null;if(r.schema.linebreakReplacement){let h=r.whitespace=="pre",p=!!r.contentMatch.matchType(r.schema.linebreakReplacement);h&&!p?u=!1:!h&&p&&(u=!0)}u===!1&&Gw(t,o,l,i),Tp(t,t.mapping.slice(i).map(l,1),r,void 0,u===null);let c=t.mapping.slice(i),d=c.map(l,1),f=c.map(l+o.nodeSize,1);return t.step(new _e(d,f,d+1,f-1,new M(_.from(r.create(a,null,o.marks)),0,0),1,!0)),u===!0&&Jw(t,o,l,i),!1}})}function Jw(t,e,n,r){e.forEach((s,i)=>{if(s.isText){let o,l=/\r?\n|\r/g;for(;o=l.exec(s.text);){let a=t.mapping.slice(r).map(n+1+i+o.index);t.replaceWith(a,a+1,e.type.schema.linebreakReplacement.create())}}})}function Gw(t,e,n,r){e.forEach((s,i)=>{if(s.type==s.type.schema.linebreakReplacement){let o=t.mapping.slice(r).map(n+1+i);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function UM(t,e,n){let r=t.resolve(e),s=r.index();return r.parent.canReplaceWith(s,s+1,n)}function HM(t,e,n,r,s){let i=t.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");n||(n=i.type);let o=n.create(r,null,s||i.marks);if(i.isLeaf)return t.replaceWith(e,e+i.nodeSize,o);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new _e(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new M(_.from(o),0,0),1,!0))}function Qs(t,e,n=1,r){let s=t.resolve(e),i=s.depth-n,o=r&&r[r.length-1]||s.parent;if(i<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!o.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let u=s.depth-1,c=n-2;u>i;u--,c--){let d=s.node(u),f=s.index(u);if(d.type.spec.isolating)return!1;let h=d.content.cutByIndex(f,d.childCount),p=r&&r[c+1];p&&(h=h.replaceChild(0,p.type.create(p.attrs)));let y=r&&r[c]||d;if(!d.canReplace(f+1,d.childCount)||!y.type.validContent(h))return!1}let l=s.indexAfter(i),a=r&&r[0];return s.node(i).canReplaceWith(l,l,a?a.type:s.node(i+1).type)}function VM(t,e,n=1,r){let s=t.doc.resolve(e),i=_.empty,o=_.empty;for(let l=s.depth,a=s.depth-n,u=n-1;l>a;l--,u--){i=_.from(s.node(l).copy(i));let c=r&&r[u];o=_.from(c?c.type.create(c.attrs,o):s.node(l).copy(o))}t.step(new Ce(e,e,new M(i.append(o),n,n),!0))}function kr(t,e){let n=t.resolve(e),r=n.index();return Qw(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function WM(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let s=0;s<e.childCount;s++){let i=e.child(s),o=i.type==r?t.type.schema.nodes.text:i.type;if(n=n.matchType(o),!n||!t.type.allowsMarks(i.marks))return!1}return n.validEnd}function Qw(t,e){return!!(t&&e&&!t.isLeaf&&WM(t,e))}function ec(t,e,n=-1){let r=t.resolve(e);for(let s=r.depth;;s--){let i,o,l=r.index(s);if(s==r.depth?(i=r.nodeBefore,o=r.nodeAfter):n>0?(i=r.node(s+1),l++,o=r.node(s).maybeChild(l)):(i=r.node(s).maybeChild(l-1),o=r.node(s+1)),i&&!i.isTextblock&&Qw(i,o)&&r.node(s).canReplace(l,l+1))return e;if(s==0)break;e=n<0?r.before(s):r.after(s)}}function KM(t,e,n){let r=null,{linebreakReplacement:s}=t.doc.type.schema,i=t.doc.resolve(e-n),o=i.node().type;if(s&&o.inlineContent){let c=o.whitespace=="pre",d=!!o.contentMatch.matchType(s);c&&!d?r=!1:!c&&d&&(r=!0)}let l=t.steps.length;if(r===!1){let c=t.doc.resolve(e+n);Gw(t,c.node(),c.before(),l)}o.inlineContent&&Tp(t,e+n-1,o,i.node().contentMatchAt(i.index()),r==null);let a=t.mapping.slice(l),u=a.map(e-n);if(t.step(new Ce(u,a.map(e+n,-1),M.empty,!0)),r===!0){let c=t.doc.resolve(u);Jw(t,c.node(),c.before(),t.steps.length)}return t}function qM(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let s=r.depth-1;s>=0;s--){let i=r.index(s);if(r.node(s).canReplaceWith(i,i,n))return r.before(s+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(let s=r.depth-1;s>=0;s--){let i=r.indexAfter(s);if(r.node(s).canReplaceWith(i,i,n))return r.after(s+1);if(i<r.node(s).childCount)return null}return null}function Yw(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let s=n.content;for(let i=0;i<n.openStart;i++)s=s.firstChild.content;for(let i=1;i<=(n.openStart==0&&n.size?2:1);i++)for(let o=r.depth;o>=0;o--){let l=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,a=r.index(o)+(l>0?1:0),u=r.node(o),c=!1;if(i==1)c=u.canReplace(a,a,s);else{let d=u.contentMatchAt(a).findWrapping(s.firstChild.type);c=d&&u.canReplaceWith(a,a,d[0])}if(c)return l==0?r.pos:l<0?r.before(o+1):r.after(o+1)}return null}function tc(t,e,n=e,r=M.empty){if(e==n&&!r.size)return null;let s=t.resolve(e),i=t.resolve(n);return Xw(s,i,r)?new Ce(e,n,r):new JM(s,i,r).fit()}function Xw(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class JM{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=_.empty;for(let s=0;s<=e.depth;s++){let i=e.node(s);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=_.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,s=this.close(e<0?this.$to:r.doc.resolve(e));if(!s)return null;let i=this.placed,o=r.depth,l=s.depth;for(;o&&l&&i.childCount==1;)i=i.firstChild.content,o--,l--;let a=new M(i,o,l);return e>-1?new _e(r.pos,e,this.$to.pos,this.$to.end(),a,n):a.size||r.pos!=this.$to.pos?new Ce(r.pos,s.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,s=this.unplaced.openEnd;r<e;r++){let i=n.firstChild;if(n.childCount>1&&(s=0),i.type.spec.isolating&&s<=r){e=r;break}n=i.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let s,i=null;r?(i=id(this.unplaced.content,r-1).firstChild,s=i.content):s=this.unplaced.content;let o=s.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:u}=this.frontier[l],c,d=null;if(n==1&&(o?u.matchType(o.type)||(d=u.fillBefore(_.from(o),!1)):i&&a.compatibleContent(i.type)))return{sliceDepth:r,frontierDepth:l,parent:i,inject:d};if(n==2&&o&&(c=u.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:l,parent:i,wrap:c};if(i&&u.matchType(i.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,s=id(e,n);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new M(e,n+1,Math.max(r,s.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,s=id(e,n);if(s.childCount<=1&&n>0){let i=e.size-n<=n+s.size;this.unplaced=new M(Vi(e,n-1,1),n-1,i?n-1:r)}else this.unplaced=new M(Vi(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:s,wrap:i}){for(;this.depth>n;)this.closeFrontierNode();if(i)for(let y=0;y<i.length;y++)this.openFrontierNode(i[y]);let o=this.unplaced,l=r?r.content:o.content,a=o.openStart-e,u=0,c=[],{match:d,type:f}=this.frontier[n];if(s){for(let y=0;y<s.childCount;y++)c.push(s.child(y));d=d.matchFragment(s)}let h=l.size+e-(o.content.size-o.openEnd);for(;u<l.childCount;){let y=l.child(u),w=d.matchType(y.type);if(!w)break;u++,(u>1||a==0||y.content.size)&&(d=w,c.push(Zw(y.mark(f.allowedMarks(y.marks)),u==1?a:0,u==l.childCount?h:-1)))}let p=u==l.childCount;p||(h=-1),this.placed=Wi(this.placed,n,_.from(c)),this.frontier[n].match=d,p&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let y=0,w=l;y<h;y++){let m=w.lastChild;this.frontier.push({type:m.type,match:m.contentMatchAt(m.childCount)}),w=m.content}this.unplaced=p?e==0?M.empty:new M(Vi(o.content,e-1,1),e-1,h<0?o.openEnd:e-1):new M(Vi(o.content,e,u),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!od(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,s=this.$to.after(r);for(;r>1&&s==this.$to.end(--r);)++s;return s}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:s}=this.frontier[n],i=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=od(e,n,s,r,i);if(o){for(let l=n-1;l>=0;l--){let{match:a,type:u}=this.frontier[l],c=od(e,l,u,a,!0);if(!c||c.childCount)continue e}return{depth:n,fit:o,move:i?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Wi(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let s=e.node(r),i=s.type.contentMatch.fillBefore(s.content,!0,e.index(r));this.openFrontierNode(s.type,s.attrs,i)}return e}openFrontierNode(e,n=null,r){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=Wi(this.placed,this.depth,_.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(_.empty,!0);n.childCount&&(this.placed=Wi(this.placed,this.frontier.length,n))}}function Vi(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Vi(t.firstChild.content,e-1,n)))}function Wi(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Wi(t.lastChild.content,e-1,n)))}function id(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function Zw(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,Zw(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(_.empty,!0)))),t.copy(r)}function od(t,e,n,r,s){let i=t.node(e),o=s?t.indexAfter(e):t.index(e);if(o==i.childCount&&!n.compatibleContent(i.type))return null;let l=r.fillBefore(i.content,!0,o);return l&&!GM(n,i.content,o)?l:null}function GM(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function QM(t){return t.spec.defining||t.spec.definingForContent}function YM(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let s=t.doc.resolve(e),i=t.doc.resolve(n);if(Xw(s,i,r))return t.step(new Ce(e,n,r));let o=tx(s,t.doc.resolve(n));o[o.length-1]==0&&o.pop();let l=-(s.depth+1);o.unshift(l);for(let f=s.depth,h=s.pos-1;f>0;f--,h--){let p=s.node(f).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(f)>-1?l=f:s.before(f)==h&&o.splice(1,0,-f)}let a=o.indexOf(l),u=[],c=r.openStart;for(let f=r.content,h=0;;h++){let p=f.firstChild;if(u.push(p),h==r.openStart)break;f=p.content}for(let f=c-1;f>=0;f--){let h=u[f],p=QM(h.type);if(p&&!h.sameMarkup(s.node(Math.abs(l)-1)))c=f;else if(p||!h.type.isTextblock)break}for(let f=r.openStart;f>=0;f--){let h=(f+c+1)%(r.openStart+1),p=u[h];if(p)for(let y=0;y<o.length;y++){let w=o[(y+a)%o.length],m=!0;w<0&&(m=!1,w=-w);let v=s.node(w-1),x=s.index(w-1);if(v.canReplaceWith(x,x,p.type,p.marks))return t.replace(s.before(w),m?i.after(w):n,new M(ex(r.content,0,r.openStart,h),h,r.openEnd))}}let d=t.steps.length;for(let f=o.length-1;f>=0&&(t.replace(e,n,r),!(t.steps.length>d));f--){let h=o[f];h<0||(e=s.before(h),n=i.after(h))}}function ex(t,e,n,r,s){if(e<n){let i=t.firstChild;t=t.replaceChild(0,i.copy(ex(i.content,e+1,n,r,i)))}if(e>r){let i=s.contentMatchAt(0),o=i.fillBefore(t).append(t);t=o.append(i.matchFragment(o).fillBefore(_.empty,!0))}return t}function XM(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let s=qM(t.doc,e,r.type);s!=null&&(e=n=s)}t.replaceRange(e,n,new M(_.from(r),0,0))}function ZM(t,e,n){let r=t.doc.resolve(e),s=t.doc.resolve(n),i=tx(r,s);for(let o=0;o<i.length;o++){let l=i[o],a=o==i.length-1;if(a&&l==0||r.node(l).type.contentMatch.validEnd)return t.delete(r.start(l),s.end(l));if(l>0&&(a||r.node(l-1).canReplace(r.index(l-1),s.indexAfter(l-1))))return t.delete(r.before(l),s.after(l))}for(let o=1;o<=r.depth&&o<=s.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&s.end(o)-n!=s.depth-o&&r.start(o-1)==s.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),s.index(o-1)))return t.delete(r.before(o),n);t.delete(e,n)}function tx(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let s=r;s>=0;s--){let i=t.start(s);if(i<t.pos-(t.depth-s)||e.end(s)>e.pos+(e.depth-s)||t.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(i==e.start(s)||s==t.depth&&s==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==i-1)&&n.push(s)}return n}class Ys extends He{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return me.fail("No node at attribute step's position");let r=Object.create(null);for(let i in n.attrs)r[i]=n.attrs[i];r[this.attr]=this.value;let s=n.type.create(r,null,n.marks);return me.fromReplace(e,this.pos,this.pos+1,new M(_.from(s),0,n.isLeaf?0:1))}getMap(){return ct.empty}invert(e){return new Ys(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ys(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ys(n.pos,n.attr,n.value)}}He.jsonID("attr",Ys);class Bo extends He{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let s in e.attrs)n[s]=e.attrs[s];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return me.ok(r)}getMap(){return ct.empty}invert(e){return new Bo(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Bo(n.attr,n.value)}}He.jsonID("docAttr",Bo);let ai=class extends Error{};ai=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};ai.prototype=Object.create(Error.prototype);ai.prototype.constructor=ai;ai.prototype.name="TransformError";class nx{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new zo}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new ai(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=M.empty){let s=tc(this.doc,e,n,r);return s&&this.step(s),this}replaceWith(e,n,r){return this.replace(e,n,new M(_.from(r),0,0))}delete(e,n){return this.replace(e,n,M.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return YM(this,e,n,r),this}replaceRangeWith(e,n,r){return XM(this,e,n,r),this}deleteRange(e,n){return ZM(this,e,n),this}lift(e,n){return LM(this,e,n),this}join(e,n=1){return KM(this,e,n),this}wrap(e,n){return BM(this,e,n),this}setBlockType(e,n=e,r,s=null){return FM(this,e,n,r,s),this}setNodeMarkup(e,n,r=null,s){return HM(this,e,n,r,s),this}setNodeAttribute(e,n,r){return this.step(new Ys(e,n,r)),this}setDocAttribute(e,n){return this.step(new Bo(e,n)),this}addNodeMark(e,n){return this.step(new Xn(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof G)n.isInSet(r.marks)&&this.step(new es(e,n));else{let s=r.marks,i,o=[];for(;i=n.isInSet(s);)o.push(new es(e,i)),s=i.removeFromSet(s);for(let l=o.length-1;l>=0;l--)this.step(o[l])}return this}split(e,n=1,r){return VM(this,e,n,r),this}addMark(e,n,r){return IM(this,e,n,r),this}removeMark(e,n,r){return jM(this,e,n,r),this}clearIncompatible(e,n,r){return Tp(this,e,n,r),this}}const ld=Object.create(null);class B{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new eA(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=M.empty){let r=n.content.lastChild,s=null;for(let l=0;l<n.openEnd;l++)s=r,r=r.lastChild;let i=e.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:a,$to:u}=o[l],c=e.mapping.slice(i);e.replaceRange(c.map(a.pos),c.map(u.pos),l?M.empty:n),l==0&&iy(e,i,(r?r.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,s=this.ranges;for(let i=0;i<s.length;i++){let{$from:o,$to:l}=s[i],a=e.mapping.slice(r),u=a.map(o.pos),c=a.map(l.pos);i?e.deleteRange(u,c):(e.replaceRangeWith(u,c,n),iy(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let s=e.parent.inlineContent?new L(e):Cs(e.node(0),e.parent,e.pos,e.index(),n,r);if(s)return s;for(let i=e.depth-1;i>=0;i--){let o=n<0?Cs(e.node(0),e.node(i),e.before(i+1),e.index(i),n,r):Cs(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Tt(e.node(0))}static atStart(e){return Cs(e,e,0,0,1)||new Tt(e)}static atEnd(e){return Cs(e,e,e.content.size,e.childCount,-1)||new Tt(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=ld[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in ld)throw new RangeError("Duplicate use of selection JSON ID "+e);return ld[e]=n,n.prototype.jsonID=e,n}getBookmark(){return L.between(this.$anchor,this.$head).getBookmark()}}B.prototype.visible=!0;class eA{constructor(e,n){this.$from=e,this.$to=n}}let ry=!1;function sy(t){!ry&&!t.parent.inlineContent&&(ry=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class L extends B{constructor(e,n=e){sy(e),sy(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return B.near(r);let s=e.resolve(n.map(this.anchor));return new L(s.parent.inlineContent?s:r,r)}replace(e,n=M.empty){if(super.replace(e,n),n==M.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof L&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new nc(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new L(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let s=e.resolve(n);return new this(s,r==n?s:e.resolve(r))}static between(e,n,r){let s=e.pos-n.pos;if((!r||s)&&(r=s>=0?1:-1),!n.parent.inlineContent){let i=B.findFrom(n,r,!0)||B.findFrom(n,-r,!0);if(i)n=i.$head;else return B.near(n,r)}return e.parent.inlineContent||(s==0?e=n:(e=(B.findFrom(e,-r,!0)||B.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=s<0&&(e=n))),new L(e,n)}}B.jsonID("text",L);class nc{constructor(e,n){this.anchor=e,this.head=n}map(e){return new nc(e.map(this.anchor),e.map(this.head))}resolve(e){return L.between(e.resolve(this.anchor),e.resolve(this.head))}}class D extends B{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:s}=n.mapResult(this.anchor),i=e.resolve(s);return r?B.near(i):new D(i)}content(){return new M(_.from(this.node),0,0)}eq(e){return e instanceof D&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Np(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new D(e.resolve(n.anchor))}static create(e,n){return new D(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}D.prototype.visible=!1;B.jsonID("node",D);class Np{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new nc(r,r):new Np(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&D.isSelectable(r)?new D(n):B.near(n)}}class Tt extends B{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=M.empty){if(n==M.empty){e.delete(0,e.doc.content.size);let r=B.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Tt(e)}map(e){return new Tt(e)}eq(e){return e instanceof Tt}getBookmark(){return tA}}B.jsonID("all",Tt);const tA={map(){return this},resolve(t){return new Tt(t)}};function Cs(t,e,n,r,s,i=!1){if(e.inlineContent)return L.create(t,n);for(let o=r-(s>0?0:1);s>0?o<e.childCount:o>=0;o+=s){let l=e.child(o);if(l.isAtom){if(!i&&D.isSelectable(l))return D.create(t,n-(s<0?l.nodeSize:0))}else{let a=Cs(t,l,n+s,s<0?l.childCount:0,s,i);if(a)return a}n+=l.nodeSize*s}return null}function iy(t,e,n){let r=t.steps.length-1;if(r<e)return;let s=t.steps[r];if(!(s instanceof Ce||s instanceof _e))return;let i=t.mapping.maps[r],o;i.forEach((l,a,u,c)=>{o==null&&(o=c)}),t.setSelection(B.near(t.doc.resolve(o),n))}const oy=1,Il=2,ly=4;class nA extends nx{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|oy)&~Il,this.storedMarks=null,this}get selectionSet(){return(this.updated&oy)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Il,this}ensureMarks(e){return G.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Il)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Il,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||G.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let s=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(s.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let i=this.storedMarks;if(!i){let o=this.doc.resolve(n);i=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,s.text(e,i)),this.selection.empty||this.setSelection(B.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=ly,this}get scrolledIntoView(){return(this.updated&ly)>0}}function ay(t,e){return!e||!t?t:t.bind(e)}class Ki{constructor(e,n,r){this.name=e,this.init=ay(n.init,r),this.apply=ay(n.apply,r)}}const rA=[new Ki("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Ki("selection",{init(t,e){return t.selection||B.atStart(e.doc)},apply(t){return t.selection}}),new Ki("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Ki("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class ad{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=rA.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Ki(r.key,r.spec.state,r))})}}class Fs{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let s=this.config.plugins[r];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),s=null;for(;;){let i=!1;for(let o=0;o<this.config.plugins.length;o++){let l=this.config.plugins[o];if(l.spec.appendTransaction){let a=s?s[o].n:0,u=s?s[o].state:this,c=a<n.length&&l.spec.appendTransaction.call(l,a?n.slice(a):n,u,r);if(c&&r.filterTransaction(c,o)){if(c.setMeta("appendedTransaction",e),!s){s=[];for(let d=0;d<this.config.plugins.length;d++)s.push(d<o?{state:r,n:n.length}:{state:this,n:0})}n.push(c),r=r.applyInner(c),i=!0}s&&(s[o]={state:r,n:n.length})}}if(!i)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Fs(this.config),r=this.config.fields;for(let s=0;s<r.length;s++){let i=r[s];n[i.name]=i.apply(e,this[i.name],this,n)}return n}get tr(){return new nA(this)}static create(e){let n=new ad(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Fs(n);for(let s=0;s<n.fields.length;s++)r[n.fields[s].name]=n.fields[s].init(e,r);return r}reconfigure(e){let n=new ad(this.schema,e.plugins),r=n.fields,s=new Fs(n);for(let i=0;i<r.length;i++){let o=r[i].name;s[o]=this.hasOwnProperty(o)?this[o]:r[i].init(e,s)}return s}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[r],i=s.spec.state;i&&i.toJSON&&(n[r]=i.toJSON.call(s,this[s.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new ad(e.schema,e.plugins),i=new Fs(s);return s.fields.forEach(o=>{if(o.name=="doc")i.doc=Ut.fromJSON(e.schema,n.doc);else if(o.name=="selection")i.selection=B.fromJSON(i.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(i.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let a=r[l],u=a.spec.state;if(a.key==o.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){i[o.name]=u.fromJSON.call(a,e,n[l],i);return}}i[o.name]=o.init(e,i)}}),i}}function rx(t,e,n){for(let r in t){let s=t[r];s instanceof Function?s=s.bind(e):r=="handleDOMEvents"&&(s=rx(s,e,{})),n[r]=s}return n}class ce{constructor(e){this.spec=e,this.props={},e.props&&rx(e.props,this,this.props),this.key=e.key?e.key.key:sx("plugin")}getState(e){return e[this.key]}}const ud=Object.create(null);function sx(t){return t in ud?t+"$"+ ++ud[t]:(ud[t]=0,t+"$")}class Oe{constructor(e="key"){this.key=sx(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Re=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},ui=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Wf=null;const yn=function(t,e,n){let r=Wf||(Wf=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},sA=function(){Wf=null},ts=function(t,e,n,r){return n&&(uy(t,e,n,r,-1)||uy(t,e,n,r,1))},iA=/^(img|br|input|textarea|hr)$/i;function uy(t,e,n,r,s){for(var i;;){if(t==n&&e==r)return!0;if(e==(s<0?0:bt(t))){let o=t.parentNode;if(!o||o.nodeType!=1||rl(t)||iA.test(t.nodeName)||t.contentEditable=="false")return!1;e=Re(t)+(s<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(s<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((i=o.pmViewDesc)===null||i===void 0)&&i.ignoreForSelection)e+=s;else return!1;else t=o,e=s<0?bt(t):0}else return!1}}function bt(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function oA(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=bt(t)}else if(t.parentNode&&!rl(t))e=Re(t),t=t.parentNode;else return null}}function lA(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!rl(t))e=Re(t)+1,t=t.parentNode;else return null}}function aA(t,e,n){for(let r=e==0,s=e==bt(t);r||s;){if(t==n)return!0;let i=Re(t);if(t=t.parentNode,!t)return!1;r=r&&i==0,s=s&&i==bt(t)}}function rl(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const rc=function(t){return t.focusNode&&ts(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Pr(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function uA(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function cA(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(bt(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(bt(r.startContainer),r.startOffset)}}}const rn=typeof navigator<"u"?navigator:null,cy=typeof document<"u"?document:null,Sr=rn&&rn.userAgent||"",Kf=/Edge\/(\d+)/.exec(Sr),ix=/MSIE \d/.exec(Sr),qf=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Sr),lt=!!(ix||qf||Kf),ur=ix?document.documentMode:qf?+qf[1]:Kf?+Kf[1]:0,Wt=!lt&&/gecko\/(\d+)/i.test(Sr);Wt&&+(/Firefox\/(\d+)/.exec(Sr)||[0,0])[1];const Jf=!lt&&/Chrome\/(\d+)/.exec(Sr),Fe=!!Jf,ox=Jf?+Jf[1]:0,Je=!lt&&!!rn&&/Apple Computer/.test(rn.vendor),ci=Je&&(/Mobile\/\w+/.test(Sr)||!!rn&&rn.maxTouchPoints>2),xt=ci||(rn?/Mac/.test(rn.platform):!1),dA=rn?/Win/.test(rn.platform):!1,kn=/Android \d/.test(Sr),sl=!!cy&&"webkitFontSmoothing"in cy.documentElement.style,fA=sl?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function hA(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function un(t,e){return typeof t=="number"?t:t[e]}function pA(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function dy(t,e,n){let r=t.someProp("scrollThreshold")||0,s=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument;for(let o=n||t.dom;o;){if(o.nodeType!=1){o=ui(o);continue}let l=o,a=l==i.body,u=a?hA(i):pA(l),c=0,d=0;if(e.top<u.top+un(r,"top")?d=-(u.top-e.top+un(s,"top")):e.bottom>u.bottom-un(r,"bottom")&&(d=e.bottom-e.top>u.bottom-u.top?e.top+un(s,"top")-u.top:e.bottom-u.bottom+un(s,"bottom")),e.left<u.left+un(r,"left")?c=-(u.left-e.left+un(s,"left")):e.right>u.right-un(r,"right")&&(c=e.right-u.right+un(s,"right")),c||d)if(a)i.defaultView.scrollBy(c,d);else{let h=l.scrollLeft,p=l.scrollTop;d&&(l.scrollTop+=d),c&&(l.scrollLeft+=c);let y=l.scrollLeft-h,w=l.scrollTop-p;e={left:e.left-y,top:e.top-w,right:e.right-y,bottom:e.bottom-w}}let f=a?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(f))break;o=f=="absolute"?o.offsetParent:ui(o)}}function mA(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,s;for(let i=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let l=t.root.elementFromPoint(i,o);if(!l||l==t.dom||!t.dom.contains(l))continue;let a=l.getBoundingClientRect();if(a.top>=n-20){r=l,s=a.top;break}}return{refDOM:r,refTop:s,stack:lx(t.dom)}}function lx(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=ui(r));return e}function gA({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;ax(n,r==0?0:r-e)}function ax(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:s,left:i}=t[n];r.scrollTop!=s+e&&(r.scrollTop=s+e),r.scrollLeft!=i&&(r.scrollLeft=i)}}let ks=null;function yA(t){if(t.setActive)return t.setActive();if(ks)return t.focus(ks);let e=lx(t);t.focus(ks==null?{get preventScroll(){return ks={preventScroll:!0},!0}}:void 0),ks||(ks=!1,ax(e,0))}function ux(t,e){let n,r=2e8,s,i=0,o=e.top,l=e.top,a,u;for(let c=t.firstChild,d=0;c;c=c.nextSibling,d++){let f;if(c.nodeType==1)f=c.getClientRects();else if(c.nodeType==3)f=yn(c).getClientRects();else continue;for(let h=0;h<f.length;h++){let p=f[h];if(p.top<=o&&p.bottom>=l){o=Math.max(p.bottom,o),l=Math.min(p.top,l);let y=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(y<r){n=c,r=y,s=y&&n.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,c.nodeType==1&&y&&(i=d+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!a&&p.left<=e.left&&p.right>=e.left&&(a=c,u={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(i=d+1)}}return!n&&a&&(n=a,s=u,r=0),n&&n.nodeType==3?vA(n,s):!n||r&&n.nodeType==1?{node:t,offset:i}:ux(n,s)}function vA(t,e){let n=t.nodeValue.length,r=document.createRange();for(let s=0;s<n;s++){r.setEnd(t,s+1),r.setStart(t,s);let i=$n(r,1);if(i.top!=i.bottom&&Op(e,i))return{node:t,offset:s+(e.left>=(i.left+i.right)/2?1:0)}}return{node:t,offset:0}}function Op(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function wA(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function xA(t,e,n){let{node:r,offset:s}=ux(e,n),i=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();i=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,s,i)}function kA(t,e,n,r){let s=-1;for(let i=e,o=!1;i!=t.dom;){let l=t.docView.nearestDesc(i,!0),a;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((a=l.dom.getBoundingClientRect()).width||a.height)&&(l.node.isBlock&&l.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(l.dom.nodeName)&&(!o&&a.left>r.left||a.top>r.top?s=l.posBefore:(!o&&a.right<r.left||a.bottom<r.top)&&(s=l.posAfter),o=!0),!l.contentDOM&&s<0&&!l.node.isText))return(l.node.isBlock?r.top<(a.top+a.bottom)/2:r.left<(a.left+a.right)/2)?l.posBefore:l.posAfter;i=l.dom.parentNode}return s>-1?s:t.docView.posFromDOM(e,n,-1)}function cx(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let s=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),i=s;;){let o=t.childNodes[i];if(o.nodeType==1){let l=o.getClientRects();for(let a=0;a<l.length;a++){let u=l[a];if(Op(e,u))return cx(o,e,u)}}if((i=(i+1)%r)==s)break}return t}function SA(t,e){let n=t.dom.ownerDocument,r,s=0,i=cA(n,e.left,e.top);i&&({node:r,offset:s}=i);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),l;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let u=t.dom.getBoundingClientRect();if(!Op(e,u)||(o=cx(t.dom,e,u),!o))return null}if(Je)for(let u=o;r&&u;u=ui(u))u.draggable&&(r=void 0);if(o=wA(o,e),r){if(Wt&&r.nodeType==1&&(s=Math.min(s,r.childNodes.length),s<r.childNodes.length)){let c=r.childNodes[s],d;c.nodeName=="IMG"&&(d=c.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&s++}let u;sl&&s&&r.nodeType==1&&(u=r.childNodes[s-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=e.top&&s--,r==t.dom&&s==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:(s==0||r.nodeType!=1||r.childNodes[s-1].nodeName!="BR")&&(l=kA(t,r,s,e))}l==null&&(l=xA(t,o,e));let a=t.docView.nearestDesc(o,!0);return{pos:l,inside:a?a.posAtStart-a.border:-1}}function fy(t){return t.top<t.bottom||t.left<t.right}function $n(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(fy(r))return r}return Array.prototype.find.call(n,fy)||t.getBoundingClientRect()}const bA=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function dx(t,e,n){let{node:r,offset:s,atom:i}=t.docView.domFromPos(e,n<0?-1:1),o=sl||Wt;if(r.nodeType==3)if(o&&(bA.test(r.nodeValue)||(n<0?!s:s==r.nodeValue.length))){let a=$n(yn(r,s,s),n);if(Wt&&s&&/\s/.test(r.nodeValue[s-1])&&s<r.nodeValue.length){let u=$n(yn(r,s-1,s-1),-1);if(u.top==a.top){let c=$n(yn(r,s,s+1),-1);if(c.top!=a.top)return Li(c,c.left<u.left)}}return a}else{let a=s,u=s,c=n<0?1:-1;return n<0&&!s?(u++,c=-1):n>=0&&s==r.nodeValue.length?(a--,c=1):n<0?a--:u++,Li($n(yn(r,a,u),c),c<0)}if(!t.state.doc.resolve(e-(i||0)).parent.inlineContent){if(i==null&&s&&(n<0||s==bt(r))){let a=r.childNodes[s-1];if(a.nodeType==1)return cd(a.getBoundingClientRect(),!1)}if(i==null&&s<bt(r)){let a=r.childNodes[s];if(a.nodeType==1)return cd(a.getBoundingClientRect(),!0)}return cd(r.getBoundingClientRect(),n>=0)}if(i==null&&s&&(n<0||s==bt(r))){let a=r.childNodes[s-1],u=a.nodeType==3?yn(a,bt(a)-(o?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(u)return Li($n(u,1),!1)}if(i==null&&s<bt(r)){let a=r.childNodes[s];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let u=a?a.nodeType==3?yn(a,0,o?0:1):a.nodeType==1?a:null:null;if(u)return Li($n(u,-1),!0)}return Li($n(r.nodeType==3?yn(r):r,-n),n>=0)}function Li(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function cd(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function fx(t,e,n){let r=t.state,s=t.root.activeElement;r!=e&&t.updateState(e),s!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),s!=t.dom&&s&&s.focus()}}function EA(t,e,n){let r=e.selection,s=n=="up"?r.$from:r.$to;return fx(t,e,()=>{let{node:i}=t.docView.domFromPos(s.pos,n=="up"?-1:1);for(;;){let l=t.docView.nearestDesc(i,!0);if(!l)break;if(l.node.isBlock){i=l.contentDOM||l.dom;break}i=l.dom.parentNode}let o=dx(t,s.pos,1);for(let l=i.firstChild;l;l=l.nextSibling){let a;if(l.nodeType==1)a=l.getClientRects();else if(l.nodeType==3)a=yn(l,0,l.nodeValue.length).getClientRects();else continue;for(let u=0;u<a.length;u++){let c=a[u];if(c.bottom>c.top+1&&(n=="up"?o.top-c.top>(c.bottom-o.top)*2:c.bottom-o.bottom>(o.bottom-c.top)*2))return!1}}return!0})}const CA=/[\u0590-\u08ac]/;function TA(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let s=r.parentOffset,i=!s,o=s==r.parent.content.size,l=t.domSelection();return l?!CA.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?i:o:fx(t,e,()=>{let{focusNode:a,focusOffset:u,anchorNode:c,anchorOffset:d}=t.domSelectionRange(),f=l.caretBidiLevel;l.modify("move",n,"character");let h=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:p,focusOffset:y}=t.domSelectionRange(),w=p&&!h.contains(p.nodeType==1?p:p.parentNode)||a==p&&u==y;try{l.collapse(c,d),a&&(a!=c||u!=d)&&l.extend&&l.extend(a,u)}catch{}return f!=null&&(l.caretBidiLevel=f),w}):r.pos==r.start()||r.pos==r.end()}let hy=null,py=null,my=!1;function _A(t,e,n){return hy==e&&py==n?my:(hy=e,py=n,my=n=="up"||n=="down"?EA(t,e,n):TA(t,e,n))}const _t=0,gy=1,Dr=2,sn=3;class il{constructor(e,n,r,s){this.parent=e,this.children=n,this.dom=r,this.contentDOM=s,this.dirty=_t,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let s=this.children[n];if(s==e)return r;r+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let i,o;if(e==this.contentDOM)i=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.previousSibling}for(;i&&!((o=i.pmViewDesc)&&o.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(o)+o.size:this.posAtStart}else{let i,o;if(e==this.contentDOM)i=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&!((o=i.pmViewDesc)&&o.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(o):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=n>Re(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let i=e;;i=i.parentNode){if(i==this.dom){s=!1;break}if(i.previousSibling)break}if(s==null&&n==e.childNodes.length)for(let i=e;;i=i.parentNode){if(i==this.dom){s=!0;break}if(i.nextSibling)break}}return s??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,s=e;s;s=s.parentNode){let i=this.getDesc(s),o;if(i&&(!n||i.node))if(r&&(o=i.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return i}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let s=e;s;s=s.parentNode){let i=this.getDesc(s);if(i)return i.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let s=this.children[n],i=r+s.size;if(r==e&&i!=r){for(;!s.border&&s.children.length;)for(let o=0;o<s.children.length;o++){let l=s.children[o];if(l.size){s=l;break}}return s}if(e<i)return s.descAt(e-r-s.border);r=i}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,s=0;for(let i=0;r<this.children.length;r++){let o=this.children[r],l=i+o.size;if(l>e||o instanceof px){s=e-i;break}i=l}if(s)return this.children[r].domFromPos(s-this.children[r].border,n);for(let i;r&&!(i=this.children[r-1]).size&&i instanceof hx&&i.side>=0;r--);if(n<=0){let i,o=!0;for(;i=r?this.children[r-1]:null,!(!i||i.dom.parentNode==this.contentDOM);r--,o=!1);return i&&n&&o&&!i.border&&!i.domAtom?i.domFromPos(i.size,n):{node:this.contentDOM,offset:i?Re(i.dom)+1:0}}else{let i,o=!0;for(;i=r<this.children.length?this.children[r]:null,!(!i||i.dom.parentNode==this.contentDOM);r++,o=!1);return i&&o&&!i.border&&!i.domAtom?i.domFromPos(0,n):{node:this.contentDOM,offset:i?Re(i.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,i=-1;for(let o=r,l=0;;l++){let a=this.children[l],u=o+a.size;if(s==-1&&e<=u){let c=o+a.border;if(e>=c&&n<=u-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,n,c);e=o;for(let d=l;d>0;d--){let f=this.children[d-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){s=Re(f.dom)+1;break}e-=f.size}s==-1&&(s=0)}if(s>-1&&(u>n||l==this.children.length-1)){n=u;for(let c=l+1;c<this.children.length;c++){let d=this.children[c];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){i=Re(d.dom);break}n+=d.size}i==-1&&(i=this.contentDOM.childNodes.length);break}o=u}return{node:this.contentDOM,from:e,to:n,fromOffset:s,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,s=!1){let i=Math.min(e,n),o=Math.max(e,n);for(let h=0,p=0;h<this.children.length;h++){let y=this.children[h],w=p+y.size;if(i>p&&o<w)return y.setSelection(e-p-y.border,n-p-y.border,r,s);p=w}let l=this.domFromPos(e,e?-1:1),a=n==e?l:this.domFromPos(n,n?-1:1),u=r.root.getSelection(),c=r.domSelectionRange(),d=!1;if((Wt||Je)&&e==n){let{node:h,offset:p}=l;if(h.nodeType==3){if(d=!!(p&&h.nodeValue[p-1]==`
`),d&&p==h.nodeValue.length)for(let y=h,w;y;y=y.parentNode){if(w=y.nextSibling){w.nodeName=="BR"&&(l=a={node:w.parentNode,offset:Re(w)+1});break}let m=y.pmViewDesc;if(m&&m.node&&m.node.isBlock)break}}else{let y=h.childNodes[p-1];d=y&&(y.nodeName=="BR"||y.contentEditable=="false")}}if(Wt&&c.focusNode&&c.focusNode!=a.node&&c.focusNode.nodeType==1){let h=c.focusNode.childNodes[c.focusOffset];h&&h.contentEditable=="false"&&(s=!0)}if(!(s||d&&Je)&&ts(l.node,l.offset,c.anchorNode,c.anchorOffset)&&ts(a.node,a.offset,c.focusNode,c.focusOffset))return;let f=!1;if((u.extend||e==n)&&!d){u.collapse(l.node,l.offset);try{e!=n&&u.extend(a.node,a.offset),f=!0}catch{}}if(!f){if(e>n){let p=l;l=a,a=p}let h=document.createRange();h.setEnd(a.node,a.offset),h.setStart(l.node,l.offset),u.removeAllRanges(),u.addRange(h)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,s=0;s<this.children.length;s++){let i=this.children[s],o=r+i.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let l=r+i.border,a=o-i.border;if(e>=l&&n<=a){this.dirty=e==r||n==o?Dr:gy,e==l&&n==a&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=sn:i.markDirty(e-l,n-l);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM&&!i.children.length?Dr:sn}r=o}this.dirty=Dr}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Dr:gy;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class hx extends il{constructor(e,n,r,s){let i,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!i)return s;if(i.parent)return i.parent.posBeforeChild(i)})),!n.type.spec.raw){if(o.nodeType!=1){let l=document.createElement("span");l.appendChild(o),o=l}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,i=this}matchesWidget(e){return this.dirty==_t&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class NA extends il{constructor(e,n,r,s){super(e,[],n,null),this.textDOM=r,this.text=s}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class ns extends il{constructor(e,n,r,s,i){super(e,[],r,s),this.mark=n,this.spec=i}static create(e,n,r,s){let i=s.nodeViews[n.type.name],o=i&&i(n,s,r);return(!o||!o.dom)&&(o=cs.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new ns(e,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&sn||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=sn&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=_t){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=_t}}slice(e,n,r){let s=ns.create(this.parent,this.mark,!0,r),i=this.children,o=this.size;n<o&&(i=Qf(i,n,o,r)),e>0&&(i=Qf(i,0,e,r));for(let l=0;l<i.length;l++)i[l].parent=s;return s.children=i,s}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class cr extends il{constructor(e,n,r,s,i,o,l,a,u){super(e,[],i,o),this.node=n,this.outerDeco=r,this.innerDeco=s,this.nodeDOM=l}static create(e,n,r,s,i,o){let l=i.nodeViews[n.type.name],a,u=l&&l(n,i,()=>{if(!a)return o;if(a.parent)return a.parent.posBeforeChild(a)},r,s),c=u&&u.dom,d=u&&u.contentDOM;if(n.isText){if(!c)c=document.createTextNode(n.text);else if(c.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else c||({dom:c,contentDOM:d}=cs.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&c.nodeName!="BR"&&(c.hasAttribute("contenteditable")||(c.contentEditable="false"),n.type.spec.draggable&&(c.draggable=!0));let f=c;return c=yx(c,r,n),u?a=new OA(e,n,r,s,c,d||null,f,u,i,o+1):n.isText?new sc(e,n,r,s,c,f,i):new cr(e,n,r,s,c,d||null,f,i,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>_.empty)}return e}matchesNode(e,n,r){return this.dirty==_t&&e.eq(this.node)&&Ua(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,s=n,i=e.composing?this.localCompositionInfo(e,n):null,o=i&&i.pos>-1?i:null,l=i&&i.pos<0,a=new AA(this,o&&o.node,e);IA(this.node,this.innerDeco,(u,c,d)=>{u.spec.marks?a.syncToMarks(u.spec.marks,r,e):u.type.side>=0&&!d&&a.syncToMarks(c==this.node.childCount?G.none:this.node.child(c).marks,r,e),a.placeWidget(u,e,s)},(u,c,d,f)=>{a.syncToMarks(u.marks,r,e);let h;a.findNodeMatch(u,c,d,f)||l&&e.state.selection.from>s&&e.state.selection.to<s+u.nodeSize&&(h=a.findIndexWithChild(i.node))>-1&&a.updateNodeAt(u,c,d,h,e)||a.updateNextNode(u,c,d,e,f,s)||a.addNode(u,c,d,e,s),s+=u.nodeSize}),a.syncToMarks([],r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==Dr)&&(o&&this.protectLocalComposition(e,o),mx(this.contentDOM,this.children,e),ci&&jA(this.dom))}localCompositionInfo(e,n){let{from:r,to:s}=e.state.selection;if(!(e.state.selection instanceof L)||r<n||s>n+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let o=i.nodeValue,l=DA(this.node.content,o,r-n,s-n);return l<0?null:{node:i,pos:l,text:o}}else return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:s}){if(this.getDesc(n))return;let i=n;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let o=new NA(this,i,n,s);e.input.compositionNodes.push(o),this.children=Qf(this.children,r,r+s.length,e,o)}update(e,n,r,s){return this.dirty==sn||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,s),!0)}updateInner(e,n,r,s){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=_t}updateOuterDeco(e){if(Ua(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=gx(this.dom,this.nodeDOM,Gf(this.outerDeco,this.node,n),Gf(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function yy(t,e,n,r,s){yx(r,e,t);let i=new cr(void 0,t,e,n,r,r,r,s,0);return i.contentDOM&&i.updateChildren(s,0),i}class sc extends cr{constructor(e,n,r,s,i,o,l){super(e,n,r,s,i,null,o,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,s){return this.dirty==sn||this.dirty!=_t&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=_t||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=_t,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let s=this.node.cut(e,n),i=document.createTextNode(s.text);return new sc(this.parent,s,this.outerDeco,this.innerDeco,i,i,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=sn)}get domAtom(){return!1}isText(e){return this.node.text==e}}class px extends il{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==_t&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class OA extends cr{constructor(e,n,r,s,i,o,l,a,u,c){super(e,n,r,s,i,o,l,u,c),this.spec=a}update(e,n,r,s){if(this.dirty==sn)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,n,r);return i&&this.updateInner(e,n,r,s),i}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,s){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function mx(t,e,n){let r=t.firstChild,s=!1;for(let i=0;i<e.length;i++){let o=e[i],l=o.dom;if(l.parentNode==t){for(;l!=r;)r=vy(r),s=!0;r=r.nextSibling}else s=!0,t.insertBefore(l,r);if(o instanceof ns){let a=r?r.previousSibling:t.lastChild;mx(o.contentDOM,o.children,n),r=a?a.nextSibling:t.firstChild}}for(;r;)r=vy(r),s=!0;s&&n.trackWrites==t&&(n.trackWrites=null)}const ao=function(t){t&&(this.nodeName=t)};ao.prototype=Object.create(null);const Lr=[new ao];function Gf(t,e,n){if(t.length==0)return Lr;let r=n?Lr[0]:new ao,s=[r];for(let i=0;i<t.length;i++){let o=t[i].type.attrs;if(o){o.nodeName&&s.push(r=new ao(o.nodeName));for(let l in o){let a=o[l];a!=null&&(n&&s.length==1&&s.push(r=new ao(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+a:l=="style"?r.style=(r.style?r.style+";":"")+a:l!="nodeName"&&(r[l]=a))}}}return s}function gx(t,e,n,r){if(n==Lr&&r==Lr)return e;let s=e;for(let i=0;i<r.length;i++){let o=r[i],l=n[i];if(i){let a;l&&l.nodeName==o.nodeName&&s!=t&&(a=s.parentNode)&&a.nodeName.toLowerCase()==o.nodeName||(a=document.createElement(o.nodeName),a.pmIsDeco=!0,a.appendChild(s),l=Lr[0]),s=a}MA(s,l||Lr[0],o)}return s}function MA(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],s=n.class?n.class.split(" ").filter(Boolean):[];for(let i=0;i<r.length;i++)s.indexOf(r[i])==-1&&t.classList.remove(r[i]);for(let i=0;i<s.length;i++)r.indexOf(s[i])==-1&&t.classList.add(s[i]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=r.exec(e.style);)t.style.removeProperty(s[1])}n.style&&(t.style.cssText+=n.style)}}function yx(t,e,n){return gx(t,t,Lr,Gf(e,n,t.nodeType!=1))}function Ua(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function vy(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class AA{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=PA(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let s=0,i=this.stack.length>>1,o=Math.min(i,e.length);for(;s<o&&(s==i-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<i;)this.destroyRest(),this.top.dirty=_t,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let a=this.index;a<Math.min(this.index+3,this.top.children.length);a++){let u=this.top.children[a];if(u.matchesMark(e[i])&&!this.isLocked(u.dom)){l=a;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let a=ns.create(this.top,e[i],n,r);this.top.children.splice(this.index,0,a),this.top=a,this.changed=!0}this.index=0,i++}}findNodeMatch(e,n,r,s){let i=-1,o;if(s>=this.preMatch.index&&(o=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))i=this.top.children.indexOf(o,this.index);else for(let l=this.index,a=Math.min(this.top.children.length,l+5);l<a;l++){let u=this.top.children[l];if(u.matchesNode(e,n,r)&&!this.preMatch.matched.has(u)){i=l;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,n,r,s,i){let o=this.top.children[s];return o.dirty==sn&&o.dom==o.contentDOM&&(o.dirty=Dr),o.update(e,n,r,i)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==r)return s}return-1}e=n}}updateNextNode(e,n,r,s,i,o){for(let l=this.index;l<this.top.children.length;l++){let a=this.top.children[l];if(a instanceof cr){let u=this.preMatch.matched.get(a);if(u!=null&&u!=i)return!1;let c=a.dom,d,f=this.isLocked(c)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=sn&&Ua(n,a.outerDeco));if(!f&&a.update(e,n,r,s))return this.destroyBetween(this.index,l),a.dom!=c&&(this.changed=!0),this.index++,!0;if(!f&&(d=this.recreateWrapper(a,e,n,r,s,o)))return this.destroyBetween(this.index,l),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=Dr,d.updateChildren(s,o+1),d.dirty=_t),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,s,i,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Ua(r,e.outerDeco)||!s.eq(e.innerDeco))return null;let l=cr.create(this.top,n,r,s,i,o);if(l.contentDOM){l.children=e.children,e.children=[];for(let a of l.children)a.parent=l}return e.destroy(),l}addNode(e,n,r,s,i){let o=cr.create(this.top,e,n,r,s,i);o.contentDOM&&o.updateChildren(s,i+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let i=new hx(this.top,e,n,r);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof ns;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof sc)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Je||Fe)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let s=new px(this.top,[],r,null);n!=this.top?n.children.push(s):n.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function PA(t,e){let n=e,r=n.children.length,s=t.childCount,i=new Map,o=[];e:for(;s>0;){let l;for(;;)if(r){let u=n.children[r-1];if(u instanceof ns)n=u,r=u.children.length;else{l=u,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let a=l.node;if(a){if(a!=t.child(s-1))break;--s,i.set(l,s),o.push(l)}}return{index:s,matched:i,matches:o.reverse()}}function RA(t,e){return t.type.side-e.type.side}function IA(t,e,n,r){let s=e.locals(t),i=0;if(s.length==0){for(let u=0;u<t.childCount;u++){let c=t.child(u);r(c,s,e.forChild(i,c),u),i+=c.nodeSize}return}let o=0,l=[],a=null;for(let u=0;;){let c,d;for(;o<s.length&&s[o].to==i;){let w=s[o++];w.widget&&(c?(d||(d=[c])).push(w):c=w)}if(c)if(d){d.sort(RA);for(let w=0;w<d.length;w++)n(d[w],u,!!a)}else n(c,u,!!a);let f,h;if(a)h=-1,f=a,a=null;else if(u<t.childCount)h=u,f=t.child(u++);else break;for(let w=0;w<l.length;w++)l[w].to<=i&&l.splice(w--,1);for(;o<s.length&&s[o].from<=i&&s[o].to>i;)l.push(s[o++]);let p=i+f.nodeSize;if(f.isText){let w=p;o<s.length&&s[o].from<w&&(w=s[o].from);for(let m=0;m<l.length;m++)l[m].to<w&&(w=l[m].to);w<p&&(a=f.cut(w-i),f=f.cut(0,w-i),p=w,h=-1)}else for(;o<s.length&&s[o].to<p;)o++;let y=f.isInline&&!f.isLeaf?l.filter(w=>!w.inline):l.slice();r(f,y,e.forChild(i,f),h),i=p}}function jA(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function DA(t,e,n,r){for(let s=0,i=0;s<t.childCount&&i<=r;){let o=t.child(s++),l=i;if(i+=o.nodeSize,!o.isText)continue;let a=o.text;for(;s<t.childCount;){let u=t.child(s++);if(i+=u.nodeSize,!u.isText)break;a+=u.text}if(i>=n){if(i>=r&&a.slice(r-e.length-l,r-l)==e)return r-e.length;let u=l<r?a.lastIndexOf(e,r-l-1):-1;if(u>=0&&u+e.length+l>=n)return l+u;if(n==r&&a.length>=r+e.length-l&&a.slice(r-l,r-l+e.length)==e)return r}}return-1}function Qf(t,e,n,r,s){let i=[];for(let o=0,l=0;o<t.length;o++){let a=t[o],u=l,c=l+=a.size;u>=n||c<=e?i.push(a):(u<e&&i.push(a.slice(0,e-u,r)),s&&(i.push(s),s=void 0),c>n&&i.push(a.slice(n-u,a.size,r)))}return i}function Mp(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let s=t.docView.nearestDesc(n.focusNode),i=s&&s.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let l=r.resolve(o),a,u;if(rc(n)){for(a=o;s&&!s.node;)s=s.parent;let d=s.node;if(s&&d.isAtom&&D.isSelectable(d)&&s.parent&&!(d.isInline&&aA(n.focusNode,n.focusOffset,s.dom))){let f=s.posBefore;u=new D(o==f?l:r.resolve(f))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=o,f=o;for(let h=0;h<n.rangeCount;h++){let p=n.getRangeAt(h);d=Math.min(d,t.docView.posFromDOM(p.startContainer,p.startOffset,1)),f=Math.max(f,t.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(d<0)return null;[a,o]=f==t.state.selection.anchor?[f,d]:[d,f],l=r.resolve(o)}else a=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(a<0)return null}let c=r.resolve(a);if(!u){let d=e=="pointer"||t.state.selection.head<l.pos&&!i?1:-1;u=Ap(t,c,l,d)}return u}function vx(t){return t.editable?t.hasFocus():xx(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function En(t,e=!1){let n=t.state.selection;if(wx(t,n),!!vx(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Fe){let r=t.domSelectionRange(),s=t.domObserver.currentSelection;if(r.anchorNode&&s.anchorNode&&ts(r.anchorNode,r.anchorOffset,s.anchorNode,s.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)$A(t);else{let{anchor:r,head:s}=n,i,o;wy&&!(n instanceof L)&&(n.$from.parent.inlineContent||(i=xy(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=xy(t,n.to))),t.docView.setSelection(r,s,t,e),wy&&(i&&ky(i),o&&ky(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&LA(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const wy=Je||Fe&&ox<63;function xy(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),s=r<n.childNodes.length?n.childNodes[r]:null,i=r?n.childNodes[r-1]:null;if(Je&&s&&s.contentEditable=="false")return dd(s);if((!s||s.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(s)return dd(s);if(i)return dd(i)}}function dd(t){return t.contentEditable="true",Je&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function ky(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function LA(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,s=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=s)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!vx(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function $A(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,s=r.nodeName=="IMG";s?n.setStart(r.parentNode,Re(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!s&&!t.state.selection.visible&&lt&&ur<=11&&(r.disabled=!0,r.disabled=!1)}function wx(t,e){if(e instanceof D){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(Sy(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else Sy(t)}function Sy(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Ap(t,e,n,r){return t.someProp("createSelectionBetween",s=>s(t,e,n))||L.between(e,n,r)}function by(t){return t.editable&&!t.hasFocus()?!1:xx(t)}function xx(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function zA(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return ts(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Yf(t,e){let{$anchor:n,$head:r}=t.selection,s=e>0?n.max(r):n.min(r),i=s.parent.inlineContent?s.depth?t.doc.resolve(e>0?s.after():s.before()):null:s;return i&&B.findFrom(i,e)}function Fn(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Ey(t,e,n){let r=t.state.selection;if(r instanceof L)if(n.indexOf("s")>-1){let{$head:s}=r,i=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let o=t.state.doc.resolve(s.pos+i.nodeSize*(e<0?-1:1));return Fn(t,new L(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let s=Yf(t.state,e);return s&&s instanceof D?Fn(t,s):!1}else if(!(xt&&n.indexOf("m")>-1)){let s=r.$head,i=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,o;if(!i||i.isText)return!1;let l=e<0?s.pos-i.nodeSize:s.pos;return i.isAtom||(o=t.docView.descAt(l))&&!o.contentDOM?D.isSelectable(i)?Fn(t,new D(e<0?t.state.doc.resolve(s.pos-i.nodeSize):s)):sl?Fn(t,new L(t.state.doc.resolve(e<0?l:l+i.nodeSize))):!1:!1}}else return!1;else{if(r instanceof D&&r.node.isInline)return Fn(t,new L(e>0?r.$to:r.$from));{let s=Yf(t.state,e);return s?Fn(t,s):!1}}}function Ha(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function uo(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Ss(t,e){return e<0?BA(t):FA(t)}function BA(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let s,i,o=!1;for(Wt&&n.nodeType==1&&r<Ha(n)&&uo(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(uo(l,-1))s=n,i=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(kx(n))break;{let l=n.previousSibling;for(;l&&uo(l,-1);)s=n.parentNode,i=Re(l),l=l.previousSibling;if(l)n=l,r=Ha(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?Xf(t,n,r):s&&Xf(t,s,i)}function FA(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let s=Ha(n),i,o;for(;;)if(r<s){if(n.nodeType!=1)break;let l=n.childNodes[r];if(uo(l,1))i=n,o=++r;else break}else{if(kx(n))break;{let l=n.nextSibling;for(;l&&uo(l,1);)i=l.parentNode,o=Re(l)+1,l=l.nextSibling;if(l)n=l,r=0,s=Ha(n);else{if(n=n.parentNode,n==t.dom)break;r=s=0}}}i&&Xf(t,i,o)}function kx(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function UA(t,e){for(;t&&e==t.childNodes.length&&!rl(t);)e=Re(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function HA(t,e){for(;t&&!e&&!rl(t);)e=Re(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function Xf(t,e,n){if(e.nodeType!=3){let i,o;(o=UA(e,n))?(e=o,n=0):(i=HA(e,n))&&(e=i,n=i.nodeValue.length)}let r=t.domSelection();if(!r)return;if(rc(r)){let i=document.createRange();i.setEnd(e,n),i.setStart(e,n),r.removeAllRanges(),r.addRange(i)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:s}=t;setTimeout(()=>{t.state==s&&En(t)},50)}function Cy(t,e){let n=t.state.doc.resolve(e);if(!(Fe||dA)&&n.parent.inlineContent){let s=t.coordsAtPos(e);if(e>n.start()){let i=t.coordsAtPos(e-1),o=(i.top+i.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(i.left-s.left)>1)return i.left<s.left?"ltr":"rtl"}if(e<n.end()){let i=t.coordsAtPos(e+1),o=(i.top+i.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(i.left-s.left)>1)return i.left>s.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function Ty(t,e,n){let r=t.state.selection;if(r instanceof L&&!r.empty||n.indexOf("s")>-1||xt&&n.indexOf("m")>-1)return!1;let{$from:s,$to:i}=r;if(!s.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=Yf(t.state,e);if(o&&o instanceof D)return Fn(t,o)}if(!s.parent.inlineContent){let o=e<0?s:i,l=r instanceof Tt?B.near(o,e):B.findFrom(o,e);return l?Fn(t,l):!1}return!1}function _y(t,e){if(!(t.state.selection instanceof L))return!0;let{$head:n,$anchor:r,empty:s}=t.state.selection;if(!n.sameParent(r))return!0;if(!s)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let i=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(i&&!i.isText){let o=t.state.tr;return e<0?o.delete(n.pos-i.nodeSize,n.pos):o.delete(n.pos,n.pos+i.nodeSize),t.dispatch(o),!0}return!1}function Ny(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function VA(t){if(!Je||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Ny(t,r,"true"),setTimeout(()=>Ny(t,r,"false"),20)}return!1}function WA(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function KA(t,e){let n=e.keyCode,r=WA(e);if(n==8||xt&&n==72&&r=="c")return _y(t,-1)||Ss(t,-1);if(n==46&&!e.shiftKey||xt&&n==68&&r=="c")return _y(t,1)||Ss(t,1);if(n==13||n==27)return!0;if(n==37||xt&&n==66&&r=="c"){let s=n==37?Cy(t,t.state.selection.from)=="ltr"?-1:1:-1;return Ey(t,s,r)||Ss(t,s)}else if(n==39||xt&&n==70&&r=="c"){let s=n==39?Cy(t,t.state.selection.from)=="ltr"?1:-1:1;return Ey(t,s,r)||Ss(t,s)}else{if(n==38||xt&&n==80&&r=="c")return Ty(t,-1,r)||Ss(t,-1);if(n==40||xt&&n==78&&r=="c")return VA(t)||Ty(t,1,r)||Ss(t,1);if(r==(xt?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function Pp(t,e){t.someProp("transformCopied",h=>{e=h(e,t)});let n=[],{content:r,openStart:s,openEnd:i}=e;for(;s>1&&i>1&&r.childCount==1&&r.firstChild.childCount==1;){s--,i--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let o=t.someProp("clipboardSerializer")||cs.fromSchema(t.state.schema),l=_x(),a=l.createElement("div");a.appendChild(o.serializeFragment(r,{document:l}));let u=a.firstChild,c,d=0;for(;u&&u.nodeType==1&&(c=Tx[u.nodeName.toLowerCase()]);){for(let h=c.length-1;h>=0;h--){let p=l.createElement(c[h]);for(;a.firstChild;)p.appendChild(a.firstChild);a.appendChild(p),d++}u=a.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${s} ${i}${d?` -${d}`:""} ${JSON.stringify(n)}`);let f=t.someProp("clipboardTextSerializer",h=>h(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:a,text:f,slice:e}}function Sx(t,e,n,r,s){let i=s.parent.type.spec.code,o,l;if(!n&&!e)return null;let a=e&&(r||i||!n);if(a){if(t.someProp("transformPastedText",f=>{e=f(e,i||r,t)}),i)return e?new M(_.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):M.empty;let d=t.someProp("clipboardTextParser",f=>f(e,s,r,t));if(d)l=d;else{let f=s.marks(),{schema:h}=t.state,p=cs.fromSchema(h);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(y=>{let w=o.appendChild(document.createElement("p"));y&&w.appendChild(p.serializeNode(h.text(y,f)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),o=QA(n),sl&&YA(o);let u=o&&o.querySelector("[data-pm-slice]"),c=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let d=+c[3];d>0;d--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(l||(l=(t.someProp("clipboardParser")||t.someProp("domParser")||ar.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(a||c),context:s,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!qA.test(f.parentNode.nodeName)?{ignore:!0}:null}})),c)l=XA(Oy(l,+c[1],+c[2]),c[4]);else if(l=M.maxOpen(JA(l.content,s),!0),l.openStart||l.openEnd){let d=0,f=0;for(let h=l.content.firstChild;d<l.openStart&&!h.type.spec.isolating;d++,h=h.firstChild);for(let h=l.content.lastChild;f<l.openEnd&&!h.type.spec.isolating;f++,h=h.lastChild);l=Oy(l,d,f)}return t.someProp("transformPasted",d=>{l=d(l,t)}),l}const qA=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function JA(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let s=e.node(n).contentMatchAt(e.index(n)),i,o=[];if(t.forEach(l=>{if(!o)return;let a=s.findWrapping(l.type),u;if(!a)return o=null;if(u=o.length&&i.length&&Ex(a,i,l,o[o.length-1],0))o[o.length-1]=u;else{o.length&&(o[o.length-1]=Cx(o[o.length-1],i.length));let c=bx(l,a);o.push(c),s=s.matchType(c.type),i=a}}),o)return _.from(o)}return t}function bx(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,_.from(t));return t}function Ex(t,e,n,r,s){if(s<t.length&&s<e.length&&t[s]==e[s]){let i=Ex(t,e,n,r.lastChild,s+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(s==t.length-1?n.type:t[s+1]))return r.copy(r.content.append(_.from(bx(n,t,s+1))))}}function Cx(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,Cx(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(_.empty,!0);return t.copy(n.append(r))}function Zf(t,e,n,r,s,i){let o=e<0?t.firstChild:t.lastChild,l=o.content;return t.childCount>1&&(i=0),s<r-1&&(l=Zf(l,e,n,r,s+1,i)),s>=n&&(l=e<0?o.contentMatchAt(0).fillBefore(l,i<=s).append(l):l.append(o.contentMatchAt(o.childCount).fillBefore(_.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(l))}function Oy(t,e,n){return e<t.openStart&&(t=new M(Zf(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new M(Zf(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const Tx={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let My=null;function _x(){return My||(My=document.implementation.createHTMLDocument("title"))}let fd=null;function GA(t){let e=window.trustedTypes;return e?(fd||(fd=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),fd.createHTML(t)):t}function QA(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=_x().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),s;if((s=r&&Tx[r[1].toLowerCase()])&&(t=s.map(i=>"<"+i+">").join("")+t+s.map(i=>"</"+i+">").reverse().join("")),n.innerHTML=GA(t),s)for(let i=0;i<s.length;i++)n=n.querySelector(s[i])||n;return n}function YA(t){let e=t.querySelectorAll(Fe?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function XA(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:s,openStart:i,openEnd:o}=t;for(let l=r.length-2;l>=0;l-=2){let a=n.nodes[r[l]];if(!a||a.hasRequiredAttrs())break;s=_.from(a.create(r[l+1],s)),i++,o++}return new M(s,i,o)}const Ge={},Qe={},ZA={touchstart:!0,touchmove:!0};class e2{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function t2(t){for(let e in Ge){let n=Ge[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{r2(t,r)&&!Rp(t,r)&&(t.editable||!(r.type in Qe))&&n(t,r)},ZA[e]?{passive:!0}:void 0)}Je&&t.dom.addEventListener("input",()=>null),eh(t)}function Zn(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function n2(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function eh(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>Rp(t,r))})}function Rp(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function r2(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function s2(t,e){!Rp(t,e)&&Ge[e.type]&&(t.editable||!(e.type in Qe))&&Ge[e.type](t,e)}Qe.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!Ox(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(kn&&Fe&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),ci&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",s=>s(t,Pr(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||KA(t,n)?n.preventDefault():Zn(t,"key")};Qe.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Qe.keypress=(t,e)=>{let n=e;if(Ox(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||xt&&n.metaKey)return;if(t.someProp("handleKeyPress",s=>s(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof L)||!r.$from.sameParent(r.$to)){let s=String.fromCharCode(n.charCode),i=()=>t.state.tr.insertText(s).scrollIntoView();!/[\r\n]/.test(s)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,s,i))&&t.dispatch(i()),n.preventDefault()}};function ic(t){return{left:t.clientX,top:t.clientY}}function i2(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Ip(t,e,n,r,s){if(r==-1)return!1;let i=t.state.doc.resolve(r);for(let o=i.depth+1;o>0;o--)if(t.someProp(e,l=>o>i.depth?l(t,n,i.nodeAfter,i.before(o),s,!0):l(t,n,i.node(o),i.before(o),s,!1)))return!0;return!1}function Xs(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function o2(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&D.isSelectable(r)?(Xs(t,new D(n)),!0):!1}function l2(t,e){if(e==-1)return!1;let n=t.state.selection,r,s;n instanceof D&&(r=n.node);let i=t.state.doc.resolve(e);for(let o=i.depth+1;o>0;o--){let l=o>i.depth?i.nodeAfter:i.node(o);if(D.isSelectable(l)){r&&n.$from.depth>0&&o>=n.$from.depth&&i.before(n.$from.depth+1)==n.$from.pos?s=i.before(n.$from.depth):s=i.before(o);break}}return s!=null?(Xs(t,D.create(t.state.doc,s)),!0):!1}function a2(t,e,n,r,s){return Ip(t,"handleClickOn",e,n,r)||t.someProp("handleClick",i=>i(t,e,r))||(s?l2(t,n):o2(t,n))}function u2(t,e,n,r){return Ip(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",s=>s(t,e,r))}function c2(t,e,n,r){return Ip(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",s=>s(t,e,r))||d2(t,n,r)}function d2(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Xs(t,L.create(r,0,r.content.size)),!0):!1;let s=r.resolve(e);for(let i=s.depth+1;i>0;i--){let o=i>s.depth?s.nodeAfter:s.node(i),l=s.before(i);if(o.inlineContent)Xs(t,L.create(r,l+1,l+1+o.content.size));else if(D.isSelectable(o))Xs(t,D.create(r,l));else continue;return!0}}function jp(t){return Va(t)}const Nx=xt?"metaKey":"ctrlKey";Ge.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=jp(t),s=Date.now(),i="singleClick";s-t.input.lastClick.time<500&&i2(n,t.input.lastClick)&&!n[Nx]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?i="doubleClick":t.input.lastClick.type=="doubleClick"&&(i="tripleClick")),t.input.lastClick={time:s,x:n.clientX,y:n.clientY,type:i,button:n.button};let o=t.posAtCoords(ic(n));o&&(i=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new f2(t,o,n,!!r)):(i=="doubleClick"?u2:c2)(t,o.pos,o.inside,n)?n.preventDefault():Zn(t,"pointer"))};class f2{constructor(e,n,r,s){this.view=e,this.pos=n,this.event=r,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[Nx],this.allowDefault=r.shiftKey;let i,o;if(n.inside>-1)i=e.state.doc.nodeAt(n.inside),o=n.inside;else{let c=e.state.doc.resolve(n.pos);i=c.parent,o=c.depth?c.before():0}const l=s?null:r.target,a=l?e.docView.nearestDesc(l,!0):null;this.target=a&&a.dom.nodeType==1?a.dom:null;let{selection:u}=e.state;(r.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||u instanceof D&&u.from<=o&&u.to>o)&&(this.mightDrag={node:i,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Wt&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Zn(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>En(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(ic(e))),this.updateAllowDefault(e),this.allowDefault||!n?Zn(this.view,"pointer"):a2(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Je&&this.mightDrag&&!this.mightDrag.node.isAtom||Fe&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Xs(this.view,B.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):Zn(this.view,"pointer")}move(e){this.updateAllowDefault(e),Zn(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Ge.touchstart=t=>{t.input.lastTouch=Date.now(),jp(t),Zn(t,"pointer")};Ge.touchmove=t=>{t.input.lastTouch=Date.now(),Zn(t,"pointer")};Ge.contextmenu=t=>jp(t);function Ox(t,e){return t.composing?!0:Je&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const h2=kn?5e3:-1;Qe.compositionstart=Qe.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof L&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Va(t,!0),t.markCursor=null;else if(Va(t,!e.selection.empty),Wt&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let s=r.focusNode,i=r.focusOffset;s&&s.nodeType==1&&i!=0;){let o=i<0?s.lastChild:s.childNodes[i-1];if(!o)break;if(o.nodeType==3){let l=t.domSelection();l&&l.collapse(o,o.nodeValue.length);break}else s=o,i=-1}}t.input.composing=!0}Mx(t,h2)};Qe.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,Mx(t,20))};function Mx(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Va(t),e))}function Ax(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=m2());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function p2(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=oA(e.focusNode,e.focusOffset),r=lA(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let s=r.pmViewDesc,i=t.domObserver.lastChangedTextNode;if(n==i||r==i)return i;if(!s||!s.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function m2(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Va(t,e=!1){if(!(kn&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),Ax(t),e||t.docView&&t.docView.dirty){let n=Mp(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function g2(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),s=document.createRange();s.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(s),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Fo=lt&&ur<15||ci&&fA<604;Ge.copy=Qe.cut=(t,e)=>{let n=e,r=t.state.selection,s=n.type=="cut";if(r.empty)return;let i=Fo?null:n.clipboardData,o=r.content(),{dom:l,text:a}=Pp(t,o);i?(n.preventDefault(),i.clearData(),i.setData("text/html",l.innerHTML),i.setData("text/plain",a)):g2(t,l),s&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function y2(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function v2(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let s=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Uo(t,r.value,null,s,e):Uo(t,r.textContent,r.innerHTML,s,e)},50)}function Uo(t,e,n,r,s){let i=Sx(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",a=>a(t,s,i||M.empty)))return!0;if(!i)return!1;let o=y2(i),l=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(i);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Px(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Qe.paste=(t,e)=>{let n=e;if(t.composing&&!kn)return;let r=Fo?null:n.clipboardData,s=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Uo(t,Px(r),r.getData("text/html"),s,n)?n.preventDefault():v2(t,n)};class Rx{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const w2=xt?"altKey":"ctrlKey";function Ix(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[w2]}Ge.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let s=t.state.selection,i=s.empty?null:t.posAtCoords(ic(n)),o;if(!(i&&i.pos>=s.from&&i.pos<=(s instanceof D?s.to-1:s.to))){if(r&&r.mightDrag)o=D.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(o=D.create(t.state.doc,d.posBefore))}}let l=(o||t.state.selection).content(),{dom:a,text:u,slice:c}=Pp(t,l);(!n.dataTransfer.files.length||!Fe||ox>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Fo?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",Fo||n.dataTransfer.setData("text/plain",u),t.dragging=new Rx(c,Ix(t,n),o)};Ge.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Qe.dragover=Qe.dragenter=(t,e)=>e.preventDefault();Qe.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let s=t.posAtCoords(ic(n));if(!s)return;let i=t.state.doc.resolve(s.pos),o=r&&r.slice;o?t.someProp("transformPasted",p=>{o=p(o,t)}):o=Sx(t,Px(n.dataTransfer),Fo?null:n.dataTransfer.getData("text/html"),!1,i);let l=!!(r&&Ix(t,n));if(t.someProp("handleDrop",p=>p(t,n,o||M.empty,l))){n.preventDefault();return}if(!o)return;n.preventDefault();let a=o?Yw(t.state.doc,i.pos,o):i.pos;a==null&&(a=i.pos);let u=t.state.tr;if(l){let{node:p}=r;p?p.replace(u):u.deleteSelection()}let c=u.mapping.map(a),d=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,f=u.doc;if(d?u.replaceRangeWith(c,c,o.content.firstChild):u.replaceRange(c,c,o),u.doc.eq(f))return;let h=u.doc.resolve(c);if(d&&D.isSelectable(o.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(o.content.firstChild))u.setSelection(new D(h));else{let p=u.mapping.map(a);u.mapping.maps[u.mapping.maps.length-1].forEach((y,w,m,v)=>p=v),u.setSelection(Ap(t,h,u.doc.resolve(p)))}t.focus(),t.dispatch(u.setMeta("uiEvent","drop"))};Ge.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&En(t)},20))};Ge.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Ge.beforeinput=(t,e)=>{if(Fe&&kn&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",i=>i(t,Pr(8,"Backspace")))))return;let{$cursor:s}=t.state.selection;s&&s.pos>0&&t.dispatch(t.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let t in Qe)Ge[t]=Qe[t];function Ho(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Wa{constructor(e,n){this.toDOM=e,this.spec=n||Wr,this.side=this.spec.side||0}map(e,n,r,s){let{pos:i,deleted:o}=e.mapResult(n.from+s,this.side<0?-1:1);return o?null:new Ke(i-r,i-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Wa&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Ho(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class dr{constructor(e,n){this.attrs=e,this.spec=n||Wr}map(e,n,r,s){let i=e.map(n.from+s,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+s,this.spec.inclusiveEnd?1:-1)-r;return i>=o?null:new Ke(i,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof dr&&Ho(this.attrs,e.attrs)&&Ho(this.spec,e.spec)}static is(e){return e.type instanceof dr}destroy(){}}class Dp{constructor(e,n){this.attrs=e,this.spec=n||Wr}map(e,n,r,s){let i=e.mapResult(n.from+s,1);if(i.deleted)return null;let o=e.mapResult(n.to+s,-1);return o.deleted||o.pos<=i.pos?null:new Ke(i.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:s}=e.content.findIndex(n.from),i;return s==n.from&&!(i=e.child(r)).isText&&s+i.nodeSize==n.to}eq(e){return this==e||e instanceof Dp&&Ho(this.attrs,e.attrs)&&Ho(this.spec,e.spec)}destroy(){}}class Ke{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Ke(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Ke(e,e,new Wa(n,r))}static inline(e,n,r,s){return new Ke(e,n,new dr(r,s))}static node(e,n,r,s){return new Ke(e,n,new Dp(r,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof dr}get widget(){return this.type instanceof Wa}}const Ts=[],Wr={};class se{constructor(e,n){this.local=e.length?e:Ts,this.children=n.length?n:Ts}static create(e,n){return n.length?Ka(n,e,0,Wr):ze}find(e,n,r){let s=[];return this.findInner(e??0,n??1e9,s,0,r),s}findInner(e,n,r,s,i){for(let o=0;o<this.local.length;o++){let l=this.local[o];l.from<=n&&l.to>=e&&(!i||i(l.spec))&&r.push(l.copy(l.from+s,l.to+s))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let l=this.children[o]+1;this.children[o+2].findInner(e-l,n-l,r,s+l,i)}}map(e,n,r){return this==ze||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Wr)}mapInner(e,n,r,s,i){let o;for(let l=0;l<this.local.length;l++){let a=this.local[l].map(e,r,s);a&&a.type.valid(n,a)?(o||(o=[])).push(a):i.onRemove&&i.onRemove(this.local[l].spec)}return this.children.length?x2(this.children,o||[],e,n,r,s,i):o?new se(o.sort(Kr),Ts):ze}add(e,n){return n.length?this==ze?se.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let s,i=0;e.forEach((l,a)=>{let u=a+r,c;if(c=Dx(n,l,u)){for(s||(s=this.children.slice());i<s.length&&s[i]<a;)i+=3;s[i]==a?s[i+2]=s[i+2].addInner(l,c,u+1):s.splice(i,0,a,a+l.nodeSize,Ka(c,l,u+1,Wr)),i+=3}});let o=jx(i?Lx(n):n,-r);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||o.splice(l--,1);return new se(o.length?this.local.concat(o).sort(Kr):this.local,s||this.children)}remove(e){return e.length==0||this==ze?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,s=this.local;for(let i=0;i<r.length;i+=3){let o,l=r[i]+n,a=r[i+1]+n;for(let c=0,d;c<e.length;c++)(d=e[c])&&d.from>l&&d.to<a&&(e[c]=null,(o||(o=[])).push(d));if(!o)continue;r==this.children&&(r=this.children.slice());let u=r[i+2].removeInner(o,l+1);u!=ze?r[i+2]=u:(r.splice(i,3),i-=3)}if(s.length){for(let i=0,o;i<e.length;i++)if(o=e[i])for(let l=0;l<s.length;l++)s[l].eq(o,n)&&(s==this.local&&(s=this.local.slice()),s.splice(l--,1))}return r==this.children&&s==this.local?this:s.length||r.length?new se(s,r):ze}forChild(e,n){if(this==ze)return this;if(n.isLeaf)return se.empty;let r,s;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let i=e+1,o=i+n.content.size;for(let l=0;l<this.local.length;l++){let a=this.local[l];if(a.from<o&&a.to>i&&a.type instanceof dr){let u=Math.max(i,a.from)-i,c=Math.min(o,a.to)-i;u<c&&(s||(s=[])).push(a.copy(u,c))}}if(s){let l=new se(s.sort(Kr),Ts);return r?new qn([l,r]):l}return r||ze}eq(e){if(this==e)return!0;if(!(e instanceof se)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return Lp(this.localsInner(e))}localsInner(e){if(this==ze)return Ts;if(e.inlineContent||!this.local.some(dr.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof dr||n.push(this.local[r]);return n}forEachSet(e){e(this)}}se.empty=new se([],[]);se.removeOverlap=Lp;const ze=se.empty;class qn{constructor(e){this.members=e}map(e,n){const r=this.members.map(s=>s.map(e,n,Wr));return qn.from(r)}forChild(e,n){if(n.isLeaf)return se.empty;let r=[];for(let s=0;s<this.members.length;s++){let i=this.members[s].forChild(e,n);i!=ze&&(i instanceof qn?r=r.concat(i.members):r.push(i))}return qn.from(r)}eq(e){if(!(e instanceof qn)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let s=0;s<this.members.length;s++){let i=this.members[s].localsInner(e);if(i.length)if(!n)n=i;else{r&&(n=n.slice(),r=!1);for(let o=0;o<i.length;o++)n.push(i[o])}}return n?Lp(r?n:n.sort(Kr)):Ts}static from(e){switch(e.length){case 0:return ze;case 1:return e[0];default:return new qn(e.every(n=>n instanceof se)?e:e.reduce((n,r)=>n.concat(r instanceof se?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function x2(t,e,n,r,s,i,o){let l=t.slice();for(let u=0,c=i;u<n.maps.length;u++){let d=0;n.maps[u].forEach((f,h,p,y)=>{let w=y-p-(h-f);for(let m=0;m<l.length;m+=3){let v=l[m+1];if(v<0||f>v+c-d)continue;let x=l[m]+c-d;h>=x?l[m+1]=f<=x?-2:-1:f>=c&&w&&(l[m]+=w,l[m+1]+=w)}d+=w}),c=n.maps[u].map(c,-1)}let a=!1;for(let u=0;u<l.length;u+=3)if(l[u+1]<0){if(l[u+1]==-2){a=!0,l[u+1]=-1;continue}let c=n.map(t[u]+i),d=c-s;if(d<0||d>=r.content.size){a=!0;continue}let f=n.map(t[u+1]+i,-1),h=f-s,{index:p,offset:y}=r.content.findIndex(d),w=r.maybeChild(p);if(w&&y==d&&y+w.nodeSize==h){let m=l[u+2].mapInner(n,w,c+1,t[u]+i+1,o);m!=ze?(l[u]=d,l[u+1]=h,l[u+2]=m):(l[u+1]=-2,a=!0)}else a=!0}if(a){let u=k2(l,t,e,n,s,i,o),c=Ka(u,r,0,o);e=c.local;for(let d=0;d<l.length;d+=3)l[d+1]<0&&(l.splice(d,3),d-=3);for(let d=0,f=0;d<c.children.length;d+=3){let h=c.children[d];for(;f<l.length&&l[f]<h;)f+=3;l.splice(f,0,c.children[d],c.children[d+1],c.children[d+2])}}return new se(e.sort(Kr),l)}function jx(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let s=t[r];n.push(new Ke(s.from+e,s.to+e,s.type))}return n}function k2(t,e,n,r,s,i,o){function l(a,u){for(let c=0;c<a.local.length;c++){let d=a.local[c].map(r,s,u);d?n.push(d):o.onRemove&&o.onRemove(a.local[c].spec)}for(let c=0;c<a.children.length;c+=3)l(a.children[c+2],a.children[c]+u+1)}for(let a=0;a<t.length;a+=3)t[a+1]==-1&&l(t[a+2],e[a]+i+1);return n}function Dx(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,s=null;for(let i=0,o;i<t.length;i++)(o=t[i])&&o.from>n&&o.to<r&&((s||(s=[])).push(o),t[i]=null);return s}function Lx(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Ka(t,e,n,r){let s=[],i=!1;e.forEach((l,a)=>{let u=Dx(t,l,a+n);if(u){i=!0;let c=Ka(u,l,n+a+1,r);c!=ze&&s.push(a,a+l.nodeSize,c)}});let o=jx(i?Lx(t):t,-n).sort(Kr);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||(r.onRemove&&r.onRemove(o[l].spec),o.splice(l--,1));return o.length||s.length?new se(o,s):ze}function Kr(t,e){return t.from-e.from||t.to-e.to}function Lp(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let s=n+1;s<e.length;s++){let i=e[s];if(i.from==r.from){i.to!=r.to&&(e==t&&(e=t.slice()),e[s]=i.copy(i.from,r.to),Ay(e,s+1,i.copy(r.to,i.to)));continue}else{i.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,i.from),Ay(e,s,r.copy(i.from,r.to)));break}}}return e}function Ay(t,e,n){for(;e<t.length&&Kr(n,t[e])>0;)e++;t.splice(e,0,n)}function hd(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=ze&&e.push(r)}),t.cursorWrapper&&e.push(se.create(t.state.doc,[t.cursorWrapper.deco])),qn.from(e)}const S2={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},b2=lt&&ur<=11;class E2{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class C2{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new E2,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let s=0;s<r.length;s++)this.queue.push(r[s]);lt&&ur<=11&&r.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),b2&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,S2)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(by(this.view)){if(this.suppressingSelectionUpdates)return En(this.view);if(lt&&ur<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&ts(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let i=e.focusNode;i;i=ui(i))n.add(i);for(let i=e.anchorNode;i;i=ui(i))if(n.has(i)){r=i;break}let s=r&&this.view.docView.nearestDesc(r);if(s&&s.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&by(e)&&!this.ignoreSelectionChange(r),i=-1,o=-1,l=!1,a=[];if(e.editable)for(let c=0;c<n.length;c++){let d=this.registerMutation(n[c],a);d&&(i=i<0?d.from:Math.min(d.from,i),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(l=!0))}if(Wt&&a.length){let c=a.filter(d=>d.nodeName=="BR");if(c.length==2){let[d,f]=c;d.parentNode&&d.parentNode.parentNode==f.parentNode?f.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let f of c){let h=f.parentNode;h&&h.nodeName=="LI"&&(!d||N2(e,d)!=h)&&f.remove()}}}let u=null;i<0&&s&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&rc(r)&&(u=Mp(e))&&u.eq(B.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,En(e),this.currentSelection.set(r),e.scrollToSelection()):(i>-1||s)&&(i>-1&&(e.docView.markDirty(i,o),T2(e)),this.handleDOMChange(i,o,l,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||En(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let c=0;c<e.addedNodes.length;c++){let d=e.addedNodes[c];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let s=e.previousSibling,i=e.nextSibling;if(lt&&ur<=11&&e.addedNodes.length)for(let c=0;c<e.addedNodes.length;c++){let{previousSibling:d,nextSibling:f}=e.addedNodes[c];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(s=d),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f)}let o=s&&s.parentNode==e.target?Re(s)+1:0,l=r.localPosFromDOM(e.target,o,-1),a=i&&i.parentNode==e.target?Re(i):e.target.childNodes.length,u=r.localPosFromDOM(e.target,a,1);return{from:l,to:u}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Py=new WeakMap,Ry=!1;function T2(t){if(!Py.has(t)&&(Py.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Wt,Ry)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Ry=!0}}function Iy(t,e){let n=e.startContainer,r=e.startOffset,s=e.endContainer,i=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return ts(o.node,o.offset,s,i)&&([n,r,s,i]=[s,i,n,r]),{anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:i}}function _2(t,e){if(e.getComposedRanges){let s=e.getComposedRanges(t.root)[0];if(s)return Iy(t,s)}let n;function r(s){s.preventDefault(),s.stopImmediatePropagation(),n=s.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?Iy(t,n):null}function N2(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function O2(t,e,n){let{node:r,fromOffset:s,toOffset:i,from:o,to:l}=t.docView.parseRange(e,n),a=t.domSelectionRange(),u,c=a.anchorNode;if(c&&t.dom.contains(c.nodeType==1?c:c.parentNode)&&(u=[{node:c,offset:a.anchorOffset}],rc(a)||u.push({node:a.focusNode,offset:a.focusOffset})),Fe&&t.input.lastKeyCode===8)for(let w=i;w>s;w--){let m=r.childNodes[w-1],v=m.pmViewDesc;if(m.nodeName=="BR"&&!v){i=w;break}if(!v||v.size)break}let d=t.state.doc,f=t.someProp("domParser")||ar.fromSchema(t.state.schema),h=d.resolve(o),p=null,y=f.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:s,to:i,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:M2,context:h});if(u&&u[0].pos!=null){let w=u[0].pos,m=u[1]&&u[1].pos;m==null&&(m=w),p={anchor:w+o,head:m+o}}return{doc:y,sel:p,from:o,to:l}}function M2(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Je&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Je&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const A2=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function P2(t,e,n,r,s){let i=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let T=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,I=Mp(t,T);if(I&&!t.state.selection.eq(I)){if(Fe&&kn&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",ve=>ve(t,Pr(13,"Enter"))))return;let R=t.state.tr.setSelection(I);T=="pointer"?R.setMeta("pointer",!0):T=="key"&&R.scrollIntoView(),i&&R.setMeta("composition",i),t.dispatch(R)}return}let o=t.state.doc.resolve(e),l=o.sharedDepth(n);e=o.before(l+1),n=t.state.doc.resolve(n).after(l+1);let a=t.state.selection,u=O2(t,e,n),c=t.state.doc,d=c.slice(u.from,u.to),f,h;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,h="end"):(f=t.state.selection.from,h="start"),t.input.lastKeyCode=null;let p=j2(d.content,u.doc.content,u.from,f,h);if(p&&t.input.domChangeCount++,(ci&&t.input.lastIOSEnter>Date.now()-225||kn)&&s.some(T=>T.nodeType==1&&!A2.test(T.nodeName))&&(!p||p.endA>=p.endB)&&t.someProp("handleKeyDown",T=>T(t,Pr(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!p)if(r&&a instanceof L&&!a.empty&&a.$head.sameParent(a.$anchor)&&!t.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))p={start:a.from,endA:a.to,endB:a.to};else{if(u.sel){let T=jy(t,t.state.doc,u.sel);if(T&&!T.eq(t.state.selection)){let I=t.state.tr.setSelection(T);i&&I.setMeta("composition",i),t.dispatch(I)}}return}t.state.selection.from<t.state.selection.to&&p.start==p.endB&&t.state.selection instanceof L&&(p.start>t.state.selection.from&&p.start<=t.state.selection.from+2&&t.state.selection.from>=u.from?p.start=t.state.selection.from:p.endA<t.state.selection.to&&p.endA>=t.state.selection.to-2&&t.state.selection.to<=u.to&&(p.endB+=t.state.selection.to-p.endA,p.endA=t.state.selection.to)),lt&&ur<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>u.from&&u.doc.textBetween(p.start-u.from-1,p.start-u.from+1)==" "&&(p.start--,p.endA--,p.endB--);let y=u.doc.resolveNoCache(p.start-u.from),w=u.doc.resolveNoCache(p.endB-u.from),m=c.resolve(p.start),v=y.sameParent(w)&&y.parent.inlineContent&&m.end()>=p.endA,x;if((ci&&t.input.lastIOSEnter>Date.now()-225&&(!v||s.some(T=>T.nodeName=="DIV"||T.nodeName=="P"))||!v&&y.pos<u.doc.content.size&&(!y.sameParent(w)||!y.parent.inlineContent)&&!/\S/.test(u.doc.textBetween(y.pos,w.pos,"",""))&&(x=B.findFrom(u.doc.resolve(y.pos+1),1,!0))&&x.head>y.pos)&&t.someProp("handleKeyDown",T=>T(t,Pr(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>p.start&&I2(c,p.start,p.endA,y,w)&&t.someProp("handleKeyDown",T=>T(t,Pr(8,"Backspace")))){kn&&Fe&&t.domObserver.suppressSelectionUpdates();return}Fe&&p.endB==p.start&&(t.input.lastChromeDelete=Date.now()),kn&&!v&&y.start()!=w.start()&&w.parentOffset==0&&y.depth==w.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==p.endA&&(p.endB-=2,w=u.doc.resolveNoCache(p.endB-u.from),setTimeout(()=>{t.someProp("handleKeyDown",function(T){return T(t,Pr(13,"Enter"))})},20));let S=p.start,b=p.endA,E=T=>{let I=T||t.state.tr.replace(S,b,u.doc.slice(p.start-u.from,p.endB-u.from));if(u.sel){let R=jy(t,I.doc,u.sel);R&&!(Fe&&t.composing&&R.empty&&(p.start!=p.endB||t.input.lastChromeDelete<Date.now()-100)&&(R.head==S||R.head==I.mapping.map(b)-1)||lt&&R.empty&&R.head==S)&&I.setSelection(R)}return i&&I.setMeta("composition",i),I.scrollIntoView()},C;if(v){if(y.pos==w.pos){lt&&ur<=11&&y.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>En(t),20));let T=E(t.state.tr.delete(S,b)),I=c.resolve(p.start).marksAcross(c.resolve(p.endA));I&&T.ensureMarks(I),t.dispatch(T)}else if(p.endA==p.endB&&(C=R2(y.parent.content.cut(y.parentOffset,w.parentOffset),m.parent.content.cut(m.parentOffset,p.endA-m.start())))){let T=E(t.state.tr);C.type=="add"?T.addMark(S,b,C.mark):T.removeMark(S,b,C.mark),t.dispatch(T)}else if(y.parent.child(y.index()).isText&&y.index()==w.index()-(w.textOffset?0:1)){let T=y.parent.textBetween(y.parentOffset,w.parentOffset),I=()=>E(t.state.tr.insertText(T,S,b));t.someProp("handleTextInput",R=>R(t,S,b,T,I))||t.dispatch(I())}}else t.dispatch(E())}function jy(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Ap(t,e.resolve(n.anchor),e.resolve(n.head))}function R2(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,s=n,i=r,o,l,a;for(let c=0;c<r.length;c++)s=r[c].removeFromSet(s);for(let c=0;c<n.length;c++)i=n[c].removeFromSet(i);if(s.length==1&&i.length==0)l=s[0],o="add",a=c=>c.mark(l.addToSet(c.marks));else if(s.length==0&&i.length==1)l=i[0],o="remove",a=c=>c.mark(l.removeFromSet(c.marks));else return null;let u=[];for(let c=0;c<e.childCount;c++)u.push(a(e.child(c)));if(_.from(u).eq(t))return{mark:l,type:o}}function I2(t,e,n,r,s){if(n-e<=s.pos-r.pos||pd(r,!0,!1)<s.pos)return!1;let i=t.resolve(e);if(!r.parent.isTextblock){let l=i.nodeAfter;return l!=null&&n==e+l.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let o=t.resolve(pd(i,!0,!0));return!o.parent.isTextblock||o.pos>n||pd(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function pd(t,e,n){let r=t.depth,s=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,s++,e=!1;if(n){let i=t.node(r).maybeChild(t.indexAfter(r));for(;i&&!i.isLeaf;)i=i.firstChild,s++}return s}function j2(t,e,n,r,s){let i=t.findDiffStart(e,n);if(i==null)return null;let{a:o,b:l}=t.findDiffEnd(e,n+t.size,n+e.size);if(s=="end"){let a=Math.max(0,i-Math.min(o,l));r-=o+a-i}if(o<i&&t.size<e.size){let a=r<=i&&r>=o?i-r:0;i-=a,i&&i<e.size&&Dy(e.textBetween(i-1,i+1))&&(i+=a?1:-1),l=i+(l-o),o=i}else if(l<i){let a=r<=i&&r>=l?i-r:0;i-=a,i&&i<t.size&&Dy(t.textBetween(i-1,i+1))&&(i+=a?1:-1),o=i+(o-l),l=i}return{start:i,endA:o,endB:l}}function Dy(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class $x{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new e2,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Fy),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=zy(this),$y(this),this.nodeViews=By(this),this.docView=yy(this.state.doc,Ly(this),hd(this),this.dom,this),this.domObserver=new C2(this,(r,s,i,o)=>P2(this,r,s,i,o)),this.domObserver.start(),t2(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&eh(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Fy),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let s=this.state,i=!1,o=!1;e.storedMarks&&this.composing&&(Ax(this),o=!0),this.state=e;let l=s.plugins!=e.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=By(this);L2(h,this.nodeViews)&&(this.nodeViews=h,i=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&eh(this),this.editable=zy(this),$y(this);let a=hd(this),u=Ly(this),c=s.plugins!=e.plugins&&!s.doc.eq(e.doc)?"reset":e.scrollToSelection>s.scrollToSelection?"to selection":"preserve",d=i||!this.docView.matchesNode(e.doc,u,a);(d||!e.selection.eq(s.selection))&&(o=!0);let f=c=="preserve"&&o&&this.dom.style.overflowAnchor==null&&mA(this);if(o){this.domObserver.stop();let h=d&&(lt||Fe)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&D2(s.selection,e.selection);if(d){let p=Fe?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=p2(this)),(i||!this.docView.update(e.doc,u,a,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=yy(e.doc,u,a,this.dom,this)),p&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&zA(this))?En(this,h):(wx(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((r=this.dragging)===null||r===void 0)&&r.node&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():f&&gA(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof D){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&dy(this,n.getBoundingClientRect(),e)}else dy(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,s=-1;if(this.state.doc.nodeAt(r.from)==r.node)s=r.from;else{let i=r.from+(this.state.doc.content.size-n.doc.content.size);(i>0&&this.state.doc.nodeAt(i))==r.node&&(s=i)}this.dragging=new Rx(e.slice,e.move,s<0?void 0:D.create(this.state.doc,s))}someProp(e,n){let r=this._props&&this._props[e],s;if(r!=null&&(s=n?n(r):r))return s;for(let o=0;o<this.directPlugins.length;o++){let l=this.directPlugins[o].props[e];if(l!=null&&(s=n?n(l):l))return s}let i=this.state.plugins;if(i)for(let o=0;o<i.length;o++){let l=i[o].props[e];if(l!=null&&(s=n?n(l):l))return s}}hasFocus(){if(lt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&yA(this.dom),En(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return SA(this,e)}coordsAtPos(e,n=1){return dx(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let s=this.docView.posFromDOM(e,n,r);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(e,n){return _A(this,n||this.state,e)}pasteHTML(e,n){return Uo(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Uo(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return Pp(this,e)}destroy(){this.docView&&(n2(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],hd(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,sA())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return s2(this,e)}domSelectionRange(){let e=this.domSelection();return e?Je&&this.root.nodeType===11&&uA(this.dom.ownerDocument)==this.dom&&_2(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}$x.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function Ly(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Ke.node(0,t.state.doc.content.size,e)]}function $y(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Ke.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function zy(t){return!t.someProp("editable",e=>e(t.state)===!1)}function D2(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function By(t){let e=Object.create(null);function n(r){for(let s in r)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=r[s])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function L2(t,e){let n=0,r=0;for(let s in t){if(t[s]!=e[s])return!0;n++}for(let s in e)r++;return n!=r}function Fy(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var pr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},qa={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},$2=typeof navigator<"u"&&/Mac/.test(navigator.platform),z2=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ie=0;Ie<10;Ie++)pr[48+Ie]=pr[96+Ie]=String(Ie);for(var Ie=1;Ie<=24;Ie++)pr[Ie+111]="F"+Ie;for(var Ie=65;Ie<=90;Ie++)pr[Ie]=String.fromCharCode(Ie+32),qa[Ie]=String.fromCharCode(Ie);for(var md in pr)qa.hasOwnProperty(md)||(qa[md]=pr[md]);function B2(t){var e=$2&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||z2&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?qa:pr)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const F2=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),U2=typeof navigator<"u"&&/Win/.test(navigator.platform);function H2(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,s,i,o;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))s=!0;else if(/^s(hift)?$/i.test(a))i=!0;else if(/^mod$/i.test(a))F2?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(n="Alt-"+n),s&&(n="Ctrl-"+n),o&&(n="Meta-"+n),i&&(n="Shift-"+n),n}function V2(t){let e=Object.create(null);for(let n in t)e[H2(n)]=t[n];return e}function gd(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function W2(t){return new ce({props:{handleKeyDown:zx(t)}})}function zx(t){let e=V2(t);return function(n,r){let s=B2(r),i,o=e[gd(s,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(s.length==1&&s!=" "){if(r.shiftKey){let l=e[gd(s,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(U2&&r.ctrlKey&&r.altKey)&&(i=pr[r.keyCode])&&i!=s){let l=e[gd(i,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}const K2=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function Bx(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const q2=(t,e,n)=>{let r=Bx(t,n);if(!r)return!1;let s=$p(r);if(!s){let o=r.blockRange(),l=o&&Ei(o);return l==null?!1:(e&&e(t.tr.lift(o,l).scrollIntoView()),!0)}let i=s.nodeBefore;if(Vx(t,s,e,-1))return!0;if(r.parent.content.size==0&&(di(i,"end")||D.isSelectable(i)))for(let o=r.depth;;o--){let l=tc(t.doc,r.before(o),r.after(o),M.empty);if(l&&l.slice.size<l.to-l.from){if(e){let a=t.tr.step(l);a.setSelection(di(i,"end")?B.findFrom(a.doc.resolve(a.mapping.map(s.pos,-1)),-1):D.create(a.doc,s.pos-i.nodeSize)),e(a.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return i.isAtom&&s.depth==r.depth-1?(e&&e(t.tr.delete(s.pos-i.nodeSize,s.pos).scrollIntoView()),!0):!1},J2=(t,e,n)=>{let r=Bx(t,n);if(!r)return!1;let s=$p(r);return s?Fx(t,s,e):!1},G2=(t,e,n)=>{let r=Ux(t,n);if(!r)return!1;let s=zp(r);return s?Fx(t,s,e):!1};function Fx(t,e,n){let r=e.nodeBefore,s=r,i=e.pos-1;for(;!s.isTextblock;i--){if(s.type.spec.isolating)return!1;let c=s.lastChild;if(!c)return!1;s=c}let o=e.nodeAfter,l=o,a=e.pos+1;for(;!l.isTextblock;a++){if(l.type.spec.isolating)return!1;let c=l.firstChild;if(!c)return!1;l=c}let u=tc(t.doc,i,a,M.empty);if(!u||u.from!=i||u instanceof Ce&&u.slice.size>=a-i)return!1;if(n){let c=t.tr.step(u);c.setSelection(L.create(c.doc,i)),n(c.scrollIntoView())}return!0}function di(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const Q2=(t,e,n)=>{let{$head:r,empty:s}=t.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;i=$p(r)}let o=i&&i.nodeBefore;return!o||!D.isSelectable(o)?!1:(e&&e(t.tr.setSelection(D.create(t.doc,i.pos-o.nodeSize)).scrollIntoView()),!0)};function $p(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function Ux(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const Y2=(t,e,n)=>{let r=Ux(t,n);if(!r)return!1;let s=zp(r);if(!s)return!1;let i=s.nodeAfter;if(Vx(t,s,e,1))return!0;if(r.parent.content.size==0&&(di(i,"start")||D.isSelectable(i))){let o=tc(t.doc,r.before(),r.after(),M.empty);if(o&&o.slice.size<o.to-o.from){if(e){let l=t.tr.step(o);l.setSelection(di(i,"start")?B.findFrom(l.doc.resolve(l.mapping.map(s.pos)),1):D.create(l.doc,l.mapping.map(s.pos))),e(l.scrollIntoView())}return!0}}return i.isAtom&&s.depth==r.depth-1?(e&&e(t.tr.delete(s.pos,s.pos+i.nodeSize).scrollIntoView()),!0):!1},X2=(t,e,n)=>{let{$head:r,empty:s}=t.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;i=zp(r)}let o=i&&i.nodeAfter;return!o||!D.isSelectable(o)?!1:(e&&e(t.tr.setSelection(D.create(t.doc,i.pos)).scrollIntoView()),!0)};function zp(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const Z2=(t,e)=>{let n=t.selection,r=n instanceof D,s;if(r){if(n.node.isTextblock||!kr(t.doc,n.from))return!1;s=n.from}else if(s=ec(t.doc,n.from,-1),s==null)return!1;if(e){let i=t.tr.join(s);r&&i.setSelection(D.create(i.doc,s-t.doc.resolve(s).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},eP=(t,e)=>{let n=t.selection,r;if(n instanceof D){if(n.node.isTextblock||!kr(t.doc,n.to))return!1;r=n.to}else if(r=ec(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},tP=(t,e)=>{let{$from:n,$to:r}=t.selection,s=n.blockRange(r),i=s&&Ei(s);return i==null?!1:(e&&e(t.tr.lift(s,i).scrollIntoView()),!0)},nP=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function Hx(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const rP=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let s=n.node(-1),i=n.indexAfter(-1),o=Hx(s.contentMatchAt(i));if(!o||!s.canReplaceWith(i,i,o))return!1;if(e){let l=n.after(),a=t.tr.replaceWith(l,l,o.createAndFill());a.setSelection(B.near(a.doc.resolve(l),1)),e(a.scrollIntoView())}return!0},sP=(t,e)=>{let n=t.selection,{$from:r,$to:s}=n;if(n instanceof Tt||r.parent.inlineContent||s.parent.inlineContent)return!1;let i=Hx(s.parent.contentMatchAt(s.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){let o=(!r.parentOffset&&s.index()<s.parent.childCount?r:s).pos,l=t.tr.insert(o,i.createAndFill());l.setSelection(L.create(l.doc,o+1)),e(l.scrollIntoView())}return!0},iP=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let i=n.before();if(Qs(t.doc,i))return e&&e(t.tr.split(i).scrollIntoView()),!0}let r=n.blockRange(),s=r&&Ei(r);return s==null?!1:(e&&e(t.tr.lift(r,s).scrollIntoView()),!0)},oP=(t,e)=>{let{$from:n,to:r}=t.selection,s,i=n.sharedDepth(r);return i==0?!1:(s=n.before(i),e&&e(t.tr.setSelection(D.create(t.doc,s))),!0)};function lP(t,e,n){let r=e.nodeBefore,s=e.nodeAfter,i=e.index();return!r||!s||!r.type.compatibleContent(s.type)?!1:!r.content.size&&e.parent.canReplace(i-1,i)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(i,i+1)||!(s.isTextblock||kr(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function Vx(t,e,n,r){let s=e.nodeBefore,i=e.nodeAfter,o,l,a=s.type.spec.isolating||i.type.spec.isolating;if(!a&&lP(t,e,n))return!0;let u=!a&&e.parent.canReplace(e.index(),e.index()+1);if(u&&(o=(l=s.contentMatchAt(s.childCount)).findWrapping(i.type))&&l.matchType(o[0]||i.type).validEnd){if(n){let h=e.pos+i.nodeSize,p=_.empty;for(let m=o.length-1;m>=0;m--)p=_.from(o[m].create(null,p));p=_.from(s.copy(p));let y=t.tr.step(new _e(e.pos-1,h,e.pos,h,new M(p,1,0),o.length,!0)),w=y.doc.resolve(h+2*o.length);w.nodeAfter&&w.nodeAfter.type==s.type&&kr(y.doc,w.pos)&&y.join(w.pos),n(y.scrollIntoView())}return!0}let c=i.type.spec.isolating||r>0&&a?null:B.findFrom(e,1),d=c&&c.$from.blockRange(c.$to),f=d&&Ei(d);if(f!=null&&f>=e.depth)return n&&n(t.tr.lift(d,f).scrollIntoView()),!0;if(u&&di(i,"start",!0)&&di(s,"end")){let h=s,p=[];for(;p.push(h),!h.isTextblock;)h=h.lastChild;let y=i,w=1;for(;!y.isTextblock;y=y.firstChild)w++;if(h.canReplace(h.childCount,h.childCount,y.content)){if(n){let m=_.empty;for(let x=p.length-1;x>=0;x--)m=_.from(p[x].copy(m));let v=t.tr.step(new _e(e.pos-p.length,e.pos+i.nodeSize,e.pos+w,e.pos+i.nodeSize-w,new M(m,p.length,0),0,!0));n(v.scrollIntoView())}return!0}}return!1}function Wx(t){return function(e,n){let r=e.selection,s=t<0?r.$from:r.$to,i=s.depth;for(;s.node(i).isInline;){if(!i)return!1;i--}return s.node(i).isTextblock?(n&&n(e.tr.setSelection(L.create(e.doc,t<0?s.start(i):s.end(i)))),!0):!1}}const aP=Wx(-1),uP=Wx(1);function cP(t,e=null){return function(n,r){let{$from:s,$to:i}=n.selection,o=s.blockRange(i),l=o&&_p(o,t,e);return l?(r&&r(n.tr.wrap(o,l).scrollIntoView()),!0):!1}}function Uy(t,e=null){return function(n,r){let s=!1;for(let i=0;i<n.selection.ranges.length&&!s;i++){let{$from:{pos:o},$to:{pos:l}}=n.selection.ranges[i];n.doc.nodesBetween(o,l,(a,u)=>{if(s)return!1;if(!(!a.isTextblock||a.hasMarkup(t,e)))if(a.type==t)s=!0;else{let c=n.doc.resolve(u),d=c.index();s=c.parent.canReplaceWith(d,d+1,t)}})}if(!s)return!1;if(r){let i=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:l},$to:{pos:a}}=n.selection.ranges[o];i.setBlockType(l,a,t,e)}r(i.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function dP(t,e=null){return function(n,r){let{$from:s,$to:i}=n.selection,o=s.blockRange(i);if(!o)return!1;let l=r?n.tr:null;return fP(l,o,t,e)?(r&&r(l.scrollIntoView()),!0):!1}}function fP(t,e,n,r=null){let s=!1,i=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let a=o.resolve(e.start-2);i=new Ba(a,a,e.depth),e.endIndex<e.parent.childCount&&(e=new Ba(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),s=!0}let l=_p(i,n,r,e);return l?(t&&hP(t,e,l,s,n),!0):!1}function hP(t,e,n,r,s){let i=_.empty;for(let c=n.length-1;c>=0;c--)i=_.from(n[c].type.create(n[c].attrs,i));t.step(new _e(e.start-(r?2:0),e.end,e.start,e.end,new M(i,0,0),n.length,!0));let o=0;for(let c=0;c<n.length;c++)n[c].type==s&&(o=c+1);let l=n.length-o,a=e.start+n.length-(r?2:0),u=e.parent;for(let c=e.startIndex,d=e.endIndex,f=!0;c<d;c++,f=!1)!f&&Qs(t.doc,a,l)&&(t.split(a,l),a+=2*l),a+=u.child(c).nodeSize;return t}function pP(t){return function(e,n){let{$from:r,$to:s}=e.selection,i=r.blockRange(s,o=>o.childCount>0&&o.firstChild.type==t);return i?n?r.node(i.depth-1).type==t?mP(e,n,t,i):gP(e,n,i):!0:!1}}function mP(t,e,n,r){let s=t.tr,i=r.end,o=r.$to.end(r.depth);i<o&&(s.step(new _e(i-1,o,i,o,new M(_.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Ba(s.doc.resolve(r.$from.pos),s.doc.resolve(o),r.depth));const l=Ei(r);if(l==null)return!1;s.lift(r,l);let a=s.doc.resolve(s.mapping.map(i,-1)-1);return kr(s.doc,a.pos)&&a.nodeBefore.type==a.nodeAfter.type&&s.join(a.pos),e(s.scrollIntoView()),!0}function gP(t,e,n){let r=t.tr,s=n.parent;for(let h=n.end,p=n.endIndex-1,y=n.startIndex;p>y;p--)h-=s.child(p).nodeSize,r.delete(h-1,h+1);let i=r.doc.resolve(n.start),o=i.nodeAfter;if(r.mapping.map(n.end)!=n.start+i.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,a=n.endIndex==s.childCount,u=i.node(-1),c=i.index(-1);if(!u.canReplace(c+(l?0:1),c+1,o.content.append(a?_.empty:_.from(s))))return!1;let d=i.pos,f=d+o.nodeSize;return r.step(new _e(d-(l?1:0),f+(a?1:0),d+1,f-1,new M((l?_.empty:_.from(s.copy(_.empty))).append(a?_.empty:_.from(s.copy(_.empty))),l?0:1,a?0:1),l?0:1)),e(r.scrollIntoView()),!0}function yP(t){return function(e,n){let{$from:r,$to:s}=e.selection,i=r.blockRange(s,u=>u.childCount>0&&u.firstChild.type==t);if(!i)return!1;let o=i.startIndex;if(o==0)return!1;let l=i.parent,a=l.child(o-1);if(a.type!=t)return!1;if(n){let u=a.lastChild&&a.lastChild.type==l.type,c=_.from(u?t.create():null),d=new M(_.from(t.create(null,_.from(l.type.create(null,c)))),u?3:1,0),f=i.start,h=i.end;n(e.tr.step(new _e(f-(u?3:1),h,f,h,d,1,!0)).scrollIntoView())}return!0}}var vP=Object.defineProperty,Kx=(t,e)=>{for(var n in e)vP(t,n,{get:e[n],enumerable:!0})};function oc(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:s}=n,{storedMarks:i}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return r},get doc(){return s},get tr(){return r=n.selection,s=n.doc,i=n.storedMarks,n}}}var lc=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:s}=n,i=this.buildProps(s);return Object.fromEntries(Object.entries(t).map(([o,l])=>[o,(...u)=>{const c=l(...u)(i);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(s),c}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:s}=this,{view:i}=r,o=[],l=!!t,a=t||s.tr,u=()=>(!l&&e&&!a.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(a),o.every(d=>d===!0)),c={...Object.fromEntries(Object.entries(n).map(([d,f])=>[d,(...p)=>{const y=this.buildProps(a,e),w=f(...p)(y);return o.push(w),c}])),run:u};return c}createCan(t){const{rawCommands:e,state:n}=this,r=!1,s=t||n.tr,i=this.buildProps(s,r);return{...Object.fromEntries(Object.entries(e).map(([l,a])=>[l,(...u)=>a(...u)({...i,dispatch:void 0})])),chain:()=>this.createChain(s,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:s}=this,{view:i}=r,o={tr:t,editor:r,view:i,state:oc({state:s,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([l,a])=>[l,(...u)=>a(...u)(o)]))}};return o}},wP=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}};function qx(t,e){const n=new nx(t);return e.forEach(r=>{r.steps.forEach(s=>{n.step(s)})}),n}var Jx=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&Jx(r)}return t};function jl(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return Jx(n)}function Vo(t,e,n){if(t instanceof Ut||t instanceof _)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,s=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return _.fromArray(t.map(l=>e.nodeFromJSON(l)));const o=e.nodeFromJSON(t);return n.errorOnInvalidContent&&o.check(),o}catch(i){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",i),Vo("",e,n)}if(s){if(n.errorOnInvalidContent){let o=!1,l="";const a=new Bw({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:u=>(o=!0,l=typeof u=="string"?u:u.outerHTML,null)}]}})});if(n.slice?ar.fromSchema(a).parseSlice(jl(t),n.parseOptions):ar.fromSchema(a).parse(jl(t),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const i=ar.fromSchema(e);return n.slice?i.parseSlice(jl(t),n.parseOptions).content:i.parse(jl(t),n.parseOptions)}return Vo("",e,n)}function th(t,e,n={},r={}){return Vo(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}function xP(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function kP(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(s,i)=>{n(s)&&r.push({node:s,pos:i})}),r}function SP(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function ac(t){return e=>SP(e.$from,t)}function j(t,e,n){return t.config[e]===void 0&&t.parent?j(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?j(t.parent,e,n):null}):t.config[e]}function Bp(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=j(e,"addExtensions",n);return r?[e,...Bp(r())]:e}).flat(10)}function Fp(t,e){const n=cs.fromSchema(e).serializeFragment(t),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(n),s.innerHTML}function Gx(t){return typeof t=="function"}function K(t,e=void 0,...n){return Gx(t)?e?t.bind(e)(...n):t(...n):t}function bP(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Wo(t){const e=t.filter(s=>s.type==="extension"),n=t.filter(s=>s.type==="node"),r=t.filter(s=>s.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function Qx(t){const e=[],{nodeExtensions:n,markExtensions:r}=Wo(t),s=[...n,...r],i={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage,extensions:s},a=j(o,"addGlobalAttributes",l);if(!a)return;a().forEach(c=>{c.types.forEach(d=>{Object.entries(c.attributes).forEach(([f,h])=>{e.push({type:d,name:f,attribute:{...i,...h}})})})})}),s.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage},a=j(o,"addAttributes",l);if(!a)return;const u=a();Object.entries(u).forEach(([c,d])=>{const f={...i,...d};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:o.name,name:c,attribute:f})})}),e}function he(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([s,i])=>{if(!r[s]){r[s]=i;return}if(s==="class"){const l=i?String(i).split(" "):[],a=r[s]?r[s].split(" "):[],u=l.filter(c=>!a.includes(c));r[s]=[...a,...u].join(" ")}else if(s==="style"){const l=i?i.split(";").map(c=>c.trim()).filter(Boolean):[],a=r[s]?r[s].split(";").map(c=>c.trim()).filter(Boolean):[],u=new Map;a.forEach(c=>{const[d,f]=c.split(":").map(h=>h.trim());u.set(d,f)}),l.forEach(c=>{const[d,f]=c.split(":").map(h=>h.trim());u.set(d,f)}),r[s]=Array.from(u.entries()).map(([c,d])=>`${c}: ${d}`).join("; ")}else r[s]=i}),r},{})}function Ja(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>he(n,r),{})}function EP(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function Hy(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const s=e.reduce((i,o)=>{const l=o.attribute.parseHTML?o.attribute.parseHTML(n):EP(n.getAttribute(o.name));return l==null?i:{...i,[o.name]:l}},{});return{...r,...s}}}}function Vy(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&bP(n)?!1:n!=null))}function CP(t,e){var n;const r=Qx(t),{nodeExtensions:s,markExtensions:i}=Wo(t),o=(n=s.find(u=>j(u,"topNode")))==null?void 0:n.name,l=Object.fromEntries(s.map(u=>{const c=r.filter(m=>m.type===u.name),d={name:u.name,options:u.options,storage:u.storage,editor:e},f=t.reduce((m,v)=>{const x=j(v,"extendNodeSchema",d);return{...m,...x?x(u):{}}},{}),h=Vy({...f,content:K(j(u,"content",d)),marks:K(j(u,"marks",d)),group:K(j(u,"group",d)),inline:K(j(u,"inline",d)),atom:K(j(u,"atom",d)),selectable:K(j(u,"selectable",d)),draggable:K(j(u,"draggable",d)),code:K(j(u,"code",d)),whitespace:K(j(u,"whitespace",d)),linebreakReplacement:K(j(u,"linebreakReplacement",d)),defining:K(j(u,"defining",d)),isolating:K(j(u,"isolating",d)),attrs:Object.fromEntries(c.map(m=>{var v,x;return[m.name,{default:(v=m==null?void 0:m.attribute)==null?void 0:v.default,validate:(x=m==null?void 0:m.attribute)==null?void 0:x.validate}]}))}),p=K(j(u,"parseHTML",d));p&&(h.parseDOM=p.map(m=>Hy(m,c)));const y=j(u,"renderHTML",d);y&&(h.toDOM=m=>y({node:m,HTMLAttributes:Ja(m,c)}));const w=j(u,"renderText",d);return w&&(h.toText=w),[u.name,h]})),a=Object.fromEntries(i.map(u=>{const c=r.filter(w=>w.type===u.name),d={name:u.name,options:u.options,storage:u.storage,editor:e},f=t.reduce((w,m)=>{const v=j(m,"extendMarkSchema",d);return{...w,...v?v(u):{}}},{}),h=Vy({...f,inclusive:K(j(u,"inclusive",d)),excludes:K(j(u,"excludes",d)),group:K(j(u,"group",d)),spanning:K(j(u,"spanning",d)),code:K(j(u,"code",d)),attrs:Object.fromEntries(c.map(w=>{var m,v;return[w.name,{default:(m=w==null?void 0:w.attribute)==null?void 0:m.default,validate:(v=w==null?void 0:w.attribute)==null?void 0:v.validate}]}))}),p=K(j(u,"parseHTML",d));p&&(h.parseDOM=p.map(w=>Hy(w,c)));const y=j(u,"renderHTML",d);return y&&(h.toDOM=w=>y({mark:w,HTMLAttributes:Ja(w,c)})),[u.name,h]}));return new Bw({topNode:o,nodes:l,marks:a})}function TP(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function Up(t){return t.sort((n,r)=>{const s=j(n,"priority")||100,i=j(r,"priority")||100;return s>i?-1:s<i?1:0})}function Yx(t){const e=Up(Bp(t)),n=TP(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function Xx(t,e,n){const{from:r,to:s}=e,{blockSeparator:i=`

`,textSerializers:o={}}=n||{};let l="";return t.nodesBetween(r,s,(a,u,c,d)=>{var f;a.isBlock&&u>r&&(l+=i);const h=o==null?void 0:o[a.type.name];if(h)return c&&(l+=h({node:a,pos:u,parent:c,index:d,range:e})),!1;a.isText&&(l+=(f=a==null?void 0:a.text)==null?void 0:f.slice(Math.max(r,u)-u,s-u))}),l}function _P(t,e){const n={from:0,to:t.content.size};return Xx(t,n,e)}function Zx(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function An(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}function ek(t,e){const n=An(e,t.schema),{from:r,to:s,empty:i}=t.selection,o=[];i?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,s,a=>{o.push(...a.marks)});const l=o.find(a=>a.type.name===n.name);return l?{...l.attrs}:{}}function ge(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function NP(t,e){const n=ge(e,t.schema),{from:r,to:s}=t.selection,i=[];t.doc.nodesBetween(r,s,l=>{i.push(l)});const o=i.reverse().find(l=>l.type.name===n.name);return o?{...o.attrs}:{}}function uc(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function tk(t,e){const n=uc(typeof e=="string"?e:e.name,t.schema);return n==="node"?NP(t,e):n==="mark"?ek(t,e):{}}function OP(t,e=JSON.stringify){const n={};return t.filter(r=>{const s=e(r);return Object.prototype.hasOwnProperty.call(n,s)?!1:n[s]=!0})}function MP(t){const e=OP(t);return e.length===1?e:e.filter((n,r)=>!e.filter((i,o)=>o!==r).some(i=>n.oldRange.from>=i.oldRange.from&&n.oldRange.to<=i.oldRange.to&&n.newRange.from>=i.newRange.from&&n.newRange.to<=i.newRange.to))}function nk(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((s,i)=>{const o=[];if(s.ranges.length)s.forEach((l,a)=>{o.push({from:l,to:a})});else{const{from:l,to:a}=n[i];if(l===void 0||a===void 0)return;o.push({from:l,to:a})}o.forEach(({from:l,to:a})=>{const u=e.slice(i).map(l,-1),c=e.slice(i).map(a),d=e.invert().map(u,-1),f=e.invert().map(c);r.push({oldRange:{from:d,to:f},newRange:{from:u,to:c}})})}),MP(r)}function Hp(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Ga(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(s=>n.strict?e[s]===t[s]:Hp(e[s])?e[s].test(t[s]):e[s]===t[s]):!0}function rk(t,e,n={}){return t.find(r=>r.type===e&&Ga(Object.fromEntries(Object.keys(n).map(s=>[s,r.attrs[s]])),n))}function Wy(t,e,n={}){return!!rk(t,e,n)}function Vp(t,e,n){var r;if(!t||!e)return;let s=t.parent.childAfter(t.parentOffset);if((!s.node||!s.node.marks.some(c=>c.type===e))&&(s=t.parent.childBefore(t.parentOffset)),!s.node||!s.node.marks.some(c=>c.type===e)||(n=n||((r=s.node.marks[0])==null?void 0:r.attrs),!rk([...s.node.marks],e,n)))return;let o=s.index,l=t.start()+s.offset,a=o+1,u=l+s.node.nodeSize;for(;o>0&&Wy([...t.parent.child(o-1).marks],e,n);)o-=1,l-=t.parent.child(o).nodeSize;for(;a<t.parent.childCount&&Wy([...t.parent.child(a).marks],e,n);)u+=t.parent.child(a).nodeSize,a+=1;return{from:l,to:u}}function Wp(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(s=>{const i=n.resolve(t),o=Vp(i,s.type);o&&r.push({mark:s,...o})}):n.nodesBetween(t,e,(s,i)=>{!s||(s==null?void 0:s.nodeSize)===void 0||r.push(...s.marks.map(o=>({from:i,to:i+s.nodeSize,mark:o})))}),r}var AP=(t,e,n,r=20)=>{const s=t.doc.resolve(n);let i=r,o=null;for(;i>0&&o===null;){const l=s.node(i);(l==null?void 0:l.type.name)===e?o=l:i-=1}return[o,i]};function yd(t,e){return e.nodes[t]||e.marks[t]||null}function la(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const s=t.find(i=>i.type===e&&i.name===r);return s?s.attribute.keepOnSplit:!1}))}var PP=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(s,i,o,l)=>{var a,u;const c=((u=(a=s.type.spec).toText)==null?void 0:u.call(a,{node:s,pos:i,parent:o,index:l}))||s.textContent||"%leaf%";n+=s.isAtom&&!s.isText?c:c.slice(0,Math.max(0,r-i))}),n};function nh(t,e,n={}){const{empty:r,ranges:s}=t.selection,i=e?An(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>i?i.name===d.type.name:!0).find(d=>Ga(d.attrs,n,{strict:!1}));let o=0;const l=[];if(s.forEach(({$from:d,$to:f})=>{const h=d.pos,p=f.pos;t.doc.nodesBetween(h,p,(y,w)=>{if(!y.isText&&!y.marks.length)return;const m=Math.max(h,w),v=Math.min(p,w+y.nodeSize),x=v-m;o+=x,l.push(...y.marks.map(S=>({mark:S,from:m,to:v})))})}),o===0)return!1;const a=l.filter(d=>i?i.name===d.mark.type.name:!0).filter(d=>Ga(d.mark.attrs,n,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),u=l.filter(d=>i?d.mark.type!==i&&d.mark.type.excludes(i):!0).reduce((d,f)=>d+f.to-f.from,0);return(a>0?a+u:a)>=o}function mr(t,e,n={}){const{from:r,to:s,empty:i}=t.selection,o=e?ge(e,t.schema):null,l=[];t.doc.nodesBetween(r,s,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),p=Math.min(s,f+d.nodeSize);l.push({node:d,from:h,to:p})});const a=s-r,u=l.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>Ga(d.node.attrs,n,{strict:!1}));return i?!!u.length:u.reduce((d,f)=>d+f.to-f.from,0)>=a}function RP(t,e,n={}){if(!e)return mr(t,null,n)||nh(t,null,n);const r=uc(e,t.schema);return r==="node"?mr(t,e,n):r==="mark"?nh(t,e,n):!1}var IP=(t,e)=>{const{$from:n,$to:r,$anchor:s}=t.selection;if(e){const i=ac(l=>l.type.name===e)(t.selection);if(!i)return!1;const o=t.doc.resolve(i.pos+1);return s.pos+1===o.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},jP=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function Ky(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function qy(t,e){const{nodeExtensions:n}=Wo(e),r=n.find(o=>o.name===t);if(!r)return!1;const s={name:r.name,options:r.options,storage:r.storage},i=K(j(r,"group",s));return typeof i!="string"?!1:i.split(" ").includes("list")}function cc(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let s=!0;return t.content.forEach(i=>{s!==!1&&(cc(i,{ignoreWhitespace:n,checkChildren:e})||(s=!1))}),s}return!1}function sk(t){return t instanceof D}function ik(t){return t instanceof L}function $r(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function ok(t,e=null){if(!e)return null;const n=B.atStart(t),r=B.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const s=n.from,i=r.to;return e==="all"?L.create(t,$r(0,s,i),$r(t.content.size,s,i)):L.create(t,$r(e,s,i),$r(e,s,i))}function DP(t,e,n){const r=t.steps.length-1;if(r<e)return;const s=t.steps[r];if(!(s instanceof Ce||s instanceof _e))return;const i=t.mapping.maps[r];let o=0;i.forEach((l,a,u,c)=>{o===0&&(o=c)}),t.setSelection(B.near(t.doc.resolve(o),n))}var dc=class{constructor(t){this.find=t.find,this.handler=t.handler}},LP=(t,e)=>{if(Hp(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Dl(t){var e;const{editor:n,from:r,to:s,text:i,rules:o,plugin:l}=t,{view:a}=n;if(a.composing)return!1;const u=a.state.doc.resolve(r);if(u.parent.type.spec.code||(e=u.nodeBefore||u.nodeAfter)!=null&&e.marks.find(f=>f.type.spec.code))return!1;let c=!1;const d=PP(u)+i;return o.forEach(f=>{if(c)return;const h=LP(d,f.find);if(!h)return;const p=a.state.tr,y=oc({state:a.state,transaction:p}),w={from:r-(h[0].length-i.length),to:s},{commands:m,chain:v,can:x}=new lc({editor:n,state:y});f.handler({state:y,range:w,match:h,commands:m,chain:v,can:x})===null||!p.steps.length||(p.setMeta(l,{transform:p,from:r,to:s,text:i}),a.dispatch(p),c=!0)}),c}function $P(t){const{editor:e,rules:n}=t,r=new ce({state:{init(){return null},apply(s,i,o){const l=s.getMeta(r);if(l)return l;const a=s.getMeta("applyInputRules");return!!a&&setTimeout(()=>{let{text:c}=a;typeof c=="string"?c=c:c=Fp(_.from(c),o.schema);const{from:d}=a,f=d+c.length;Dl({editor:e,from:d,to:f,text:c,rules:n,plugin:r})}),s.selectionSet||s.docChanged?null:i}},props:{handleTextInput(s,i,o,l){return Dl({editor:e,from:i,to:o,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:i}=s.state.selection;i&&Dl({editor:e,from:i.pos,to:i.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(s,i){if(i.key!=="Enter")return!1;const{$cursor:o}=s.state.selection;return o?Dl({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function zP(t){return Object.prototype.toString.call(t).slice(8,-1)}function Ll(t){return zP(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function lk(t,e){const n={...t};return Ll(t)&&Ll(e)&&Object.keys(e).forEach(r=>{Ll(e[r])&&Ll(t[r])?n[r]=lk(t[r],e[r]):n[r]=e[r]}),n}var Kp=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...K(j(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...K(j(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>lk(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},ds=class ak extends Kp{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new ak(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,s=e.state.selection.$from;if(s.pos===s.end()){const o=s.marks();if(!!!o.find(u=>(u==null?void 0:u.type.name)===n.name))return!1;const a=o.find(u=>(u==null?void 0:u.type.name)===n.name);return a&&r.removeStoredMark(a),r.insertText(" ",s.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function BP(t){return typeof t=="number"}var FP=class{constructor(t){this.find=t.find,this.handler=t.handler}},UP=(t,e,n)=>{if(Hp(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(s=>{const i=[s.text];return i.index=s.index,i.input=t,i.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(s.replaceWith)),i}):[]};function HP(t){const{editor:e,state:n,from:r,to:s,rule:i,pasteEvent:o,dropEvent:l}=t,{commands:a,chain:u,can:c}=new lc({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,s,(h,p)=>{if(!h.isTextblock||h.type.spec.code)return;const y=Math.max(r,p),w=Math.min(s,p+h.content.size),m=h.textBetween(y-p,w-p,void 0,"");UP(m,i.find,o).forEach(x=>{if(x.index===void 0)return;const S=y+x.index+1,b=S+x[0].length,E={from:n.tr.mapping.map(S),to:n.tr.mapping.map(b)},C=i.handler({state:n,range:E,match:x,commands:a,chain:u,can:c,pasteEvent:o,dropEvent:l});d.push(C)})}),d.every(h=>h!==null)}var $l=null,VP=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function WP(t){const{editor:e,rules:n}=t;let r=null,s=!1,i=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const a=({state:c,from:d,to:f,rule:h,pasteEvt:p})=>{const y=c.tr,w=oc({state:c,transaction:y});if(!(!HP({editor:e,state:w,from:Math.max(d-1,0),to:f.b-1,rule:h,pasteEvent:p,dropEvent:l})||!y.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,y}};return n.map(c=>new ce({view(d){const f=p=>{var y;r=(y=d.dom.parentElement)!=null&&y.contains(p.target)?d.dom.parentElement:null,r&&($l=e)},h=()=>{$l&&($l=null)};return window.addEventListener("dragstart",f),window.addEventListener("dragend",h),{destroy(){window.removeEventListener("dragstart",f),window.removeEventListener("dragend",h)}}},props:{handleDOMEvents:{drop:(d,f)=>{if(i=r===d.dom.parentElement,l=f,!i){const h=$l;h!=null&&h.isEditable&&setTimeout(()=>{const p=h.state.selection;p&&h.commands.deleteRange({from:p.from,to:p.to})},10)}return!1},paste:(d,f)=>{var h;const p=(h=f.clipboardData)==null?void 0:h.getData("text/html");return o=f,s=!!(p!=null&&p.includes("data-pm-slice")),!1}}},appendTransaction:(d,f,h)=>{const p=d[0],y=p.getMeta("uiEvent")==="paste"&&!s,w=p.getMeta("uiEvent")==="drop"&&!i,m=p.getMeta("applyPasteRules"),v=!!m;if(!y&&!w&&!v)return;if(v){let{text:b}=m;typeof b=="string"?b=b:b=Fp(_.from(b),h.schema);const{from:E}=m,C=E+b.length,T=VP(b);return a({rule:c,state:h,from:E,to:{b:C},pasteEvt:T})}const x=f.doc.content.findDiffStart(h.doc.content),S=f.doc.content.findDiffEnd(h.doc.content);if(!(!BP(x)||!S||x===S.b))return a({rule:c,state:h,from:x,to:S,pasteEvt:o})}}))}var fc=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.extensions=Yx(t),this.schema=CP(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:yd(e.name,this.schema)},r=j(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this,e=Up([...this.extensions].reverse()),n=[],r=[],s=e.map(i=>{const o={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:t,type:yd(i.name,this.schema)},l=[],a=j(i,"addKeyboardShortcuts",o);let u={};if(i.type==="mark"&&j(i,"exitable",o)&&(u.ArrowRight=()=>ds.handleExit({editor:t,mark:i})),a){const p=Object.fromEntries(Object.entries(a()).map(([y,w])=>[y,()=>w({editor:t})]));u={...u,...p}}const c=W2(u);l.push(c);const d=j(i,"addInputRules",o);Ky(i,t.options.enableInputRules)&&d&&n.push(...d());const f=j(i,"addPasteRules",o);Ky(i,t.options.enablePasteRules)&&f&&r.push(...f());const h=j(i,"addProseMirrorPlugins",o);if(h){const p=h();l.push(...p)}return l}).flat();return[$P({editor:t,rules:n}),...WP({editor:t,rules:r}),...s]}get attributes(){return Qx(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=Wo(this.extensions);return Object.fromEntries(e.filter(n=>!!j(n,"addNodeView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),s={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:ge(n.name,this.schema)},i=j(n,"addNodeView",s);if(!i)return[];const o=(l,a,u,c,d)=>{const f=Ja(l,r);return i()({node:l,view:a,getPos:u,decorations:c,innerDecorations:d,editor:t,extension:n,HTMLAttributes:f})};return[n.name,o]}))}get markViews(){const{editor:t}=this,{markExtensions:e}=Wo(this.extensions);return Object.fromEntries(e.filter(n=>!!j(n,"addMarkView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),s={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:An(n.name,this.schema)},i=j(n,"addMarkView",s);if(!i)return[];const o=(l,a,u)=>{const c=Ja(l,r);return i()({mark:l,view:a,inline:u,editor:t,extension:n,HTMLAttributes:c,updateAttributes:d=>{oI(l,t,d)}})};return[n.name,o]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:yd(e.name,this.schema)};e.type==="mark"&&((n=K(j(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const s=j(e,"onBeforeCreate",r),i=j(e,"onCreate",r),o=j(e,"onUpdate",r),l=j(e,"onSelectionUpdate",r),a=j(e,"onTransaction",r),u=j(e,"onFocus",r),c=j(e,"onBlur",r),d=j(e,"onDestroy",r);s&&this.editor.on("beforeCreate",s),i&&this.editor.on("create",i),o&&this.editor.on("update",o),l&&this.editor.on("selectionUpdate",l),a&&this.editor.on("transaction",a),u&&this.editor.on("focus",u),c&&this.editor.on("blur",c),d&&this.editor.on("destroy",d)})}};fc.resolve=Yx;fc.sort=Up;fc.flatten=Bp;var KP={};Kx(KP,{ClipboardTextSerializer:()=>ck,Commands:()=>hk,Delete:()=>pk,Drop:()=>mk,Editable:()=>gk,FocusEvents:()=>vk,Keymap:()=>wk,Paste:()=>xk,Tabindex:()=>kk,focusEventsPluginKey:()=>yk});var ye=class uk extends Kp{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new uk(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},ck=ye.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new ce({key:new Oe("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:s}=e,{ranges:i}=s,o=Math.min(...i.map(c=>c.$from.pos)),l=Math.max(...i.map(c=>c.$to.pos)),a=Zx(n);return Xx(r,{from:o,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:a})}}})]}}),dk={};Kx(dk,{blur:()=>qP,clearContent:()=>JP,clearNodes:()=>GP,command:()=>QP,createParagraphNear:()=>YP,cut:()=>XP,deleteCurrentNode:()=>ZP,deleteNode:()=>eR,deleteRange:()=>tR,deleteSelection:()=>nR,enter:()=>rR,exitCode:()=>sR,extendMarkRange:()=>iR,first:()=>oR,focus:()=>aR,forEach:()=>uR,insertContent:()=>cR,insertContentAt:()=>fR,joinBackward:()=>mR,joinDown:()=>pR,joinForward:()=>gR,joinItemBackward:()=>yR,joinItemForward:()=>vR,joinTextblockBackward:()=>wR,joinTextblockForward:()=>xR,joinUp:()=>hR,keyboardShortcut:()=>SR,lift:()=>bR,liftEmptyBlock:()=>ER,liftListItem:()=>CR,newlineInCode:()=>TR,resetAttributes:()=>_R,scrollIntoView:()=>NR,selectAll:()=>OR,selectNodeBackward:()=>MR,selectNodeForward:()=>AR,selectParentNode:()=>PR,selectTextblockEnd:()=>RR,selectTextblockStart:()=>IR,setContent:()=>jR,setMark:()=>LR,setMeta:()=>$R,setNode:()=>zR,setNodeSelection:()=>BR,setTextSelection:()=>FR,sinkListItem:()=>UR,splitBlock:()=>HR,splitListItem:()=>VR,toggleList:()=>WR,toggleMark:()=>KR,toggleNode:()=>qR,toggleWrap:()=>JR,undoInputRule:()=>GR,unsetAllMarks:()=>QR,unsetMark:()=>YR,updateAttributes:()=>XR,wrapIn:()=>ZR,wrapInList:()=>eI});var qP=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),JP=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),GP=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:s}=r;return n&&s.forEach(({$from:i,$to:o})=>{t.doc.nodesBetween(i.pos,o.pos,(l,a)=>{if(l.type.isText)return;const{doc:u,mapping:c}=e,d=u.resolve(c.map(a)),f=u.resolve(c.map(a+l.nodeSize)),h=d.blockRange(f);if(!h)return;const p=Ei(h);if(l.type.isTextblock){const{defaultType:y}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,y)}(p||p===0)&&e.lift(h,p)})}),!0},QP=t=>e=>t(e),YP=()=>({state:t,dispatch:e})=>sP(t,e),XP=(t,e)=>({editor:n,tr:r})=>{const{state:s}=n,i=s.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,i.content),r.setSelection(new L(r.doc.resolve(Math.max(o-1,0)))),!0},ZP=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const s=t.selection.$anchor;for(let i=s.depth;i>0;i-=1)if(s.node(i).type===r.type){if(e){const l=s.before(i),a=s.after(i);t.delete(l,a).scrollIntoView()}return!0}return!1},eR=t=>({tr:e,state:n,dispatch:r})=>{const s=ge(t,n.schema),i=e.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===s){if(r){const a=i.before(o),u=i.after(o);e.delete(a,u).scrollIntoView()}return!0}return!1},tR=t=>({tr:e,dispatch:n})=>{const{from:r,to:s}=t;return n&&e.delete(r,s),!0},nR=()=>({state:t,dispatch:e})=>K2(t,e),rR=()=>({commands:t})=>t.keyboardShortcut("Enter"),sR=()=>({state:t,dispatch:e})=>rP(t,e),iR=(t,e={})=>({tr:n,state:r,dispatch:s})=>{const i=An(t,r.schema),{doc:o,selection:l}=n,{$from:a,from:u,to:c}=l;if(s){const d=Vp(a,i,e);if(d&&d.from<=u&&d.to>=c){const f=L.create(o,d.from,d.to);n.setSelection(f)}}return!0},oR=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function lR(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function qp(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var aR=(t=null,e={})=>({editor:n,view:r,tr:s,dispatch:i})=>{e={scrollIntoView:!0,...e};const o=()=>{(qp()||lR())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(i&&t===null&&!ik(n.state.selection))return o(),!0;const l=ok(s.doc,t)||n.state.selection,a=n.state.selection.eq(l);return i&&(a||s.setSelection(l),a&&s.storedMarks&&s.setStoredMarks(s.storedMarks),o()),!0},uR=(t,e)=>n=>t.every((r,s)=>e(r,{...n,index:s})),cR=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),dR=t=>!("type"in t),fR=(t,e,n)=>({tr:r,dispatch:s,editor:i})=>{var o;if(s){n={parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;const{selection:a}=i.state,u=m=>{i.emit("contentError",{editor:i,error:m,disableCollaboration:()=>{"collaboration"in i.storage&&typeof i.storage.collaboration=="object"&&i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!i.options.enableContentCheck&&i.options.emitContentError)try{Vo(e,i.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(m){u(m)}try{l=Vo(e,i.schema,{parseOptions:c,errorOnInvalidContent:(o=n.errorOnInvalidContent)!=null?o:i.options.enableContentCheck})}catch(m){return u(m),!1}let{from:d,to:f}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},h=!0,p=!0;if((dR(l)?l:[l]).forEach(m=>{m.check(),h=h?m.isText&&m.marks.length===0:!1,p=p?m.isBlock:!1}),d===f&&p){const{parent:m}=r.doc.resolve(d);m.isTextblock&&!m.type.spec.code&&!m.childCount&&(d-=1,f+=1)}let w;if(h){if(Array.isArray(e))w=e.map(m=>m.text||"").join("");else if(e instanceof _){let m="";e.forEach(v=>{v.text&&(m+=v.text)}),w=m}else typeof e=="object"&&e&&e.text?w=e.text:w=e;r.insertText(w,d,f)}else{w=l;const m=a.$from.parentOffset===0,v=a.$from.node().isText||a.$from.node().isTextblock,x=a.$from.node().content.size>0;m&&v&&x&&(d=Math.max(0,d-1)),r.replaceWith(d,f,w)}n.updateSelection&&DP(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:d,text:w}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:d,text:w})}return!0},hR=()=>({state:t,dispatch:e})=>Z2(t,e),pR=()=>({state:t,dispatch:e})=>eP(t,e),mR=()=>({state:t,dispatch:e})=>q2(t,e),gR=()=>({state:t,dispatch:e})=>Y2(t,e),yR=()=>({state:t,dispatch:e,tr:n})=>{try{const r=ec(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},vR=()=>({state:t,dispatch:e,tr:n})=>{try{const r=ec(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},wR=()=>({state:t,dispatch:e})=>J2(t,e),xR=()=>({state:t,dispatch:e})=>G2(t,e);function fk(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function kR(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,s,i,o;for(let l=0;l<e.length-1;l+=1){const a=e[l];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))s=!0;else if(/^s(hift)?$/i.test(a))i=!0;else if(/^mod$/i.test(a))qp()||fk()?o=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${a}`)}return r&&(n=`Alt-${n}`),s&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),i&&(n=`Shift-${n}`),n}var SR=t=>({editor:e,view:n,tr:r,dispatch:s})=>{const i=kR(t).split(/-(?!$)/),o=i.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),l=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),a=e.captureTransaction(()=>{n.someProp("handleKeyDown",u=>u(n,l))});return a==null||a.steps.forEach(u=>{const c=u.map(r.mapping);c&&s&&r.maybeStep(c)}),!0},bR=(t,e={})=>({state:n,dispatch:r})=>{const s=ge(t,n.schema);return mr(n,s,e)?tP(n,r):!1},ER=()=>({state:t,dispatch:e})=>iP(t,e),CR=t=>({state:e,dispatch:n})=>{const r=ge(t,e.schema);return pP(r)(e,n)},TR=()=>({state:t,dispatch:e})=>nP(t,e);function Jy(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,s)=>(n.includes(s)||(r[s]=t[s]),r),{})}var _R=(t,e)=>({tr:n,state:r,dispatch:s})=>{let i=null,o=null;const l=uc(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(i=ge(t,r.schema)),l==="mark"&&(o=An(t,r.schema)),s&&n.selection.ranges.forEach(a=>{r.doc.nodesBetween(a.$from.pos,a.$to.pos,(u,c)=>{i&&i===u.type&&n.setNodeMarkup(c,void 0,Jy(u.attrs,e)),o&&u.marks.length&&u.marks.forEach(d=>{o===d.type&&n.addMark(c,c+u.nodeSize,o.create(Jy(d.attrs,e)))})})}),!0):!1},NR=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),OR=()=>({tr:t,dispatch:e})=>{if(e){const n=new Tt(t.doc);t.setSelection(n)}return!0},MR=()=>({state:t,dispatch:e})=>Q2(t,e),AR=()=>({state:t,dispatch:e})=>X2(t,e),PR=()=>({state:t,dispatch:e})=>oP(t,e),RR=()=>({state:t,dispatch:e})=>uP(t,e),IR=()=>({state:t,dispatch:e})=>aP(t,e),jR=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:s,tr:i,dispatch:o,commands:l})=>{const{doc:a}=i;if(r.preserveWhitespace!=="full"){const u=th(t,s.schema,r,{errorOnInvalidContent:e??s.options.enableContentCheck});return o&&i.replaceWith(0,a.content.size,u).setMeta("preventUpdate",!n),!0}return o&&i.setMeta("preventUpdate",!n),l.insertContentAt({from:0,to:a.content.size},t,{parseOptions:r,errorOnInvalidContent:e??s.options.enableContentCheck})};function DR(t,e,n){var r;const{selection:s}=e;let i=null;if(ik(s)&&(i=s.$cursor),i){const l=(r=t.storedMarks)!=null?r:i.marks();return!!n.isInSet(l)||!l.some(a=>a.type.excludes(n))}const{ranges:o}=s;return o.some(({$from:l,$to:a})=>{let u=l.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(l.pos,a.pos,(c,d,f)=>{if(u)return!1;if(c.isInline){const h=!f||f.type.allowsMarkType(n),p=!!n.isInSet(c.marks)||!c.marks.some(y=>y.type.excludes(n));u=h&&p}return!u}),u})}var LR=(t,e={})=>({tr:n,state:r,dispatch:s})=>{const{selection:i}=n,{empty:o,ranges:l}=i,a=An(t,r.schema);if(s)if(o){const u=ek(r,a);n.addStoredMark(a.create({...u,...e}))}else l.forEach(u=>{const c=u.$from.pos,d=u.$to.pos;r.doc.nodesBetween(c,d,(f,h)=>{const p=Math.max(h,c),y=Math.min(h+f.nodeSize,d);f.marks.find(m=>m.type===a)?f.marks.forEach(m=>{a===m.type&&n.addMark(p,y,a.create({...m.attrs,...e}))}):n.addMark(p,y,a.create(e))})});return DR(r,n,a)},$R=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),zR=(t,e={})=>({state:n,dispatch:r,chain:s})=>{const i=ge(t,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),i.isTextblock?s().command(({commands:l})=>Uy(i,{...o,...e})(n)?!0:l.clearNodes()).command(({state:l})=>Uy(i,{...o,...e})(l,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},BR=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,s=$r(t,0,r.content.size),i=D.create(r,s);e.setSelection(i)}return!0},FR=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:s,to:i}=typeof t=="number"?{from:t,to:t}:t,o=L.atStart(r).from,l=L.atEnd(r).to,a=$r(s,o,l),u=$r(i,o,l),c=L.create(r,a,u);e.setSelection(c)}return!0},UR=t=>({state:e,dispatch:n})=>{const r=ge(t,e.schema);return yP(r)(e,n)};function Gy(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(s=>e==null?void 0:e.includes(s.type.name));t.tr.ensureMarks(r)}}var HR=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:s})=>{const{selection:i,doc:o}=e,{$from:l,$to:a}=i,u=s.extensionManager.attributes,c=la(u,l.node().type.name,l.node().attrs);if(i instanceof D&&i.node.isBlock)return!l.parentOffset||!Qs(o,l.pos)?!1:(r&&(t&&Gy(n,s.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const d=a.parentOffset===a.parent.content.size,f=l.depth===0?void 0:xP(l.node(-1).contentMatchAt(l.indexAfter(-1)));let h=d&&f?[{type:f,attrs:c}]:void 0,p=Qs(e.doc,e.mapping.map(l.pos),1,h);if(!h&&!p&&Qs(e.doc,e.mapping.map(l.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:c}]:void 0),r){if(p&&(i instanceof L&&e.deleteSelection(),e.split(e.mapping.map(l.pos),1,h),f&&!d&&!l.parentOffset&&l.parent.type!==f)){const y=e.mapping.map(l.before()),w=e.doc.resolve(y);l.node(-1).canReplaceWith(w.index(),w.index()+1,f)&&e.setNodeMarkup(e.mapping.map(l.before()),f)}t&&Gy(n,s.extensionManager.splittableMarks),e.scrollIntoView()}return p},VR=(t,e={})=>({tr:n,state:r,dispatch:s,editor:i})=>{var o;const l=ge(t,r.schema),{$from:a,$to:u}=r.selection,c=r.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(u))return!1;const d=a.node(-1);if(d.type!==l)return!1;const f=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==l||a.index(-2)!==a.node(-2).childCount-1)return!1;if(s){let m=_.empty;const v=a.index(-1)?1:a.index(-2)?2:3;for(let T=a.depth-v;T>=a.depth-3;T-=1)m=_.from(a.node(T).copy(m));const x=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,S={...la(f,a.node().type.name,a.node().attrs),...e},b=((o=l.contentMatch.defaultType)==null?void 0:o.createAndFill(S))||void 0;m=m.append(_.from(l.createAndFill(null,b)||void 0));const E=a.before(a.depth-(v-1));n.replace(E,a.after(-x),new M(m,4-v,0));let C=-1;n.doc.nodesBetween(E,n.doc.content.size,(T,I)=>{if(C>-1)return!1;T.isTextblock&&T.content.size===0&&(C=I+1)}),C>-1&&n.setSelection(L.near(n.doc.resolve(C))),n.scrollIntoView()}return!0}const h=u.pos===a.end()?d.contentMatchAt(0).defaultType:null,p={...la(f,d.type.name,d.attrs),...e},y={...la(f,a.node().type.name,a.node().attrs),...e};n.delete(a.pos,u.pos);const w=h?[{type:l,attrs:p},{type:h,attrs:y}]:[{type:l,attrs:p}];if(!Qs(n.doc,a.pos,2))return!1;if(s){const{selection:m,storedMarks:v}=r,{splittableMarks:x}=i.extensionManager,S=v||m.$to.parentOffset&&m.$from.marks();if(n.split(a.pos,2,w).scrollIntoView(),!S||!s)return!0;const b=S.filter(E=>x.includes(E.type.name));n.ensureMarks(b)}return!0},vd=(t,e)=>{const n=ac(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const s=t.doc.nodeAt(r);return n.node.type===(s==null?void 0:s.type)&&kr(t.doc,n.pos)&&t.join(n.pos),!0},wd=(t,e)=>{const n=ac(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const s=t.doc.nodeAt(r);return n.node.type===(s==null?void 0:s.type)&&kr(t.doc,r)&&t.join(r),!0},WR=(t,e,n,r={})=>({editor:s,tr:i,state:o,dispatch:l,chain:a,commands:u,can:c})=>{const{extensions:d,splittableMarks:f}=s.extensionManager,h=ge(t,o.schema),p=ge(e,o.schema),{selection:y,storedMarks:w}=o,{$from:m,$to:v}=y,x=m.blockRange(v),S=w||y.$to.parentOffset&&y.$from.marks();if(!x)return!1;const b=ac(E=>qy(E.type.name,d))(y);if(x.depth>=1&&b&&x.depth-b.depth<=1){if(b.node.type===h)return u.liftListItem(p);if(qy(b.node.type.name,d)&&h.validContent(b.node.content)&&l)return a().command(()=>(i.setNodeMarkup(b.pos,h),!0)).command(()=>vd(i,h)).command(()=>wd(i,h)).run()}return!n||!S||!l?a().command(()=>c().wrapInList(h,r)?!0:u.clearNodes()).wrapInList(h,r).command(()=>vd(i,h)).command(()=>wd(i,h)).run():a().command(()=>{const E=c().wrapInList(h,r),C=S.filter(T=>f.includes(T.type.name));return i.ensureMarks(C),E?!0:u.clearNodes()}).wrapInList(h,r).command(()=>vd(i,h)).command(()=>wd(i,h)).run()},KR=(t,e={},n={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:i=!1}=n,o=An(t,r.schema);return nh(r,o,e)?s.unsetMark(o,{extendEmptyMarkRange:i}):s.setMark(o,e)},qR=(t,e,n={})=>({state:r,commands:s})=>{const i=ge(t,r.schema),o=ge(e,r.schema),l=mr(r,i,n);let a;return r.selection.$anchor.sameParent(r.selection.$head)&&(a=r.selection.$anchor.parent.attrs),l?s.setNode(o,a):s.setNode(i,{...a,...n})},JR=(t,e={})=>({state:n,commands:r})=>{const s=ge(t,n.schema);return mr(n,s,e)?r.lift(s):r.wrapIn(s,e)},GR=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const s=n[r];let i;if(s.spec.isInputRules&&(i=s.getState(t))){if(e){const o=t.tr,l=i.transform;for(let a=l.steps.length-1;a>=0;a-=1)o.step(l.steps[a].invert(l.docs[a]));if(i.text){const a=o.doc.resolve(i.from).marks();o.replaceWith(i.from,i.to,t.schema.text(i.text,a))}else o.delete(i.from,i.to)}return!0}}return!1},QR=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:s}=n;return r||e&&s.forEach(i=>{t.removeMark(i.$from.pos,i.$to.pos)}),!0},YR=(t,e={})=>({tr:n,state:r,dispatch:s})=>{var i;const{extendEmptyMarkRange:o=!1}=e,{selection:l}=n,a=An(t,r.schema),{$from:u,empty:c,ranges:d}=l;if(!s)return!0;if(c&&o){let{from:f,to:h}=l;const p=(i=u.marks().find(w=>w.type===a))==null?void 0:i.attrs,y=Vp(u,a,p);y&&(f=y.from,h=y.to),n.removeMark(f,h,a)}else d.forEach(f=>{n.removeMark(f.$from.pos,f.$to.pos,a)});return n.removeStoredMark(a),!0},XR=(t,e={})=>({tr:n,state:r,dispatch:s})=>{let i=null,o=null;const l=uc(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(i=ge(t,r.schema)),l==="mark"&&(o=An(t,r.schema)),s&&n.selection.ranges.forEach(a=>{const u=a.$from.pos,c=a.$to.pos;let d,f,h,p;n.selection.empty?r.doc.nodesBetween(u,c,(y,w)=>{i&&i===y.type&&(h=Math.max(w,u),p=Math.min(w+y.nodeSize,c),d=w,f=y)}):r.doc.nodesBetween(u,c,(y,w)=>{w<u&&i&&i===y.type&&(h=Math.max(w,u),p=Math.min(w+y.nodeSize,c),d=w,f=y),w>=u&&w<=c&&(i&&i===y.type&&n.setNodeMarkup(w,void 0,{...y.attrs,...e}),o&&y.marks.length&&y.marks.forEach(m=>{if(o===m.type){const v=Math.max(w,u),x=Math.min(w+y.nodeSize,c);n.addMark(v,x,o.create({...m.attrs,...e}))}}))}),f&&(d!==void 0&&n.setNodeMarkup(d,void 0,{...f.attrs,...e}),o&&f.marks.length&&f.marks.forEach(y=>{o===y.type&&n.addMark(h,p,o.create({...y.attrs,...e}))}))}),!0):!1},ZR=(t,e={})=>({state:n,dispatch:r})=>{const s=ge(t,n.schema);return cP(s,e)(n,r)},eI=(t,e={})=>({state:n,dispatch:r})=>{const s=ge(t,n.schema);return dP(s,e)(n,r)},hk=ye.create({name:"commands",addCommands(){return{...dk}}}),pk=ye.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,s;const i=()=>{var o,l,a,u;if((u=(a=(l=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:l.filterTransaction)==null?void 0:a.call(l,t))!=null?u:t.getMeta("y-sync$"))return;const c=qx(t.before,[t,...e]);nk(c).forEach(h=>{c.mapping.mapResult(h.oldRange.from).deletedAfter&&c.mapping.mapResult(h.oldRange.to).deletedBefore&&c.before.nodesBetween(h.oldRange.from,h.oldRange.to,(p,y)=>{const w=y+p.nodeSize-2,m=h.oldRange.from<=y&&w<=h.oldRange.to;this.editor.emit("delete",{type:"node",node:p,from:y,to:w,newFrom:c.mapping.map(y),newTo:c.mapping.map(w),deletedRange:h.oldRange,newRange:h.newRange,partial:!m,editor:this.editor,transaction:t,combinedTransform:c})})});const f=c.mapping;c.steps.forEach((h,p)=>{var y,w;if(h instanceof zt){const m=f.slice(p).map(h.from,-1),v=f.slice(p).map(h.to),x=f.invert().map(m,-1),S=f.invert().map(v),b=(y=c.doc.nodeAt(m-1))==null?void 0:y.marks.some(C=>C.eq(h.mark)),E=(w=c.doc.nodeAt(v))==null?void 0:w.marks.some(C=>C.eq(h.mark));this.editor.emit("delete",{type:"mark",mark:h.mark,from:h.from,to:h.to,deletedRange:{from:x,to:S},newRange:{from:m,to:v},partial:!!(E||b),editor:this.editor,transaction:t,combinedTransform:c})}})};(s=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||s?setTimeout(i,0):i()}}),mk=ye.create({name:"drop",addProseMirrorPlugins(){return[new ce({key:new Oe("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),gk=ye.create({name:"editable",addProseMirrorPlugins(){return[new ce({key:new Oe("editable"),props:{editable:()=>this.editor.options.editable}})]}}),yk=new Oe("focusEvents"),vk=ye.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new ce({key:yk,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),wk=ye.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:l})=>{const{selection:a,doc:u}=l,{empty:c,$anchor:d}=a,{pos:f,parent:h}=d,p=d.parent.isTextblock&&f>0?l.doc.resolve(f-1):d,y=p.parent.type.spec.isolating,w=d.pos-d.parentOffset,m=y&&p.parent.childCount===1?w===d.pos:B.atStart(u).from===f;return!c||!h.type.isTextblock||h.textContent.length||!m||m&&d.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},s={...r},i={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return qp()||fk()?i:s},addProseMirrorPlugins(){return[new ce({key:new Oe("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(y=>y.getMeta("composition")))return;const r=t.some(y=>y.docChanged)&&!e.doc.eq(n.doc),s=t.some(y=>y.getMeta("preventClearDocument"));if(!r||s)return;const{empty:i,from:o,to:l}=e.selection,a=B.atStart(e.doc).from,u=B.atEnd(e.doc).to;if(i||!(o===a&&l===u)||!cc(n.doc))return;const f=n.tr,h=oc({state:n,transaction:f}),{commands:p}=new lc({editor:this.editor,state:h});if(p.clearNodes(),!!f.steps.length)return f}})]}}),xk=ye.create({name:"paste",addProseMirrorPlugins(){return[new ce({key:new Oe("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),kk=ye.create({name:"tabindex",addProseMirrorPlugins(){return[new ce({key:new Oe("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),tI=class _s{constructor(e,n,r=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=s}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new _s(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new _s(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new _s(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const s=n.isBlock&&!n.isTextblock,i=n.isAtom&&!n.isText,o=this.pos+r+(i?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const l=this.resolvedPos.doc.resolve(o);if(!s&&l.depth<=this.depth)return;const a=new _s(l,this.editor,s,s?n:null);s&&(a.actualDepth=this.depth+1),e.push(new _s(l,this.editor,s,s?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,s=this.parent;for(;s&&!r;){if(s.node.type.name===e)if(Object.keys(n).length>0){const i=s.node.attrs,o=Object.keys(n);for(let l=0;l<o.length;l+=1){const a=o[l];if(i[a]!==n[a])break}}else r=s;s=s.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let s=[];if(!this.children||this.children.length===0)return s;const i=Object.keys(n);return this.children.forEach(o=>{r&&s.length>0||(o.node.type.name===e&&i.every(a=>n[a]===o.node.attrs[a])&&s.push(o),!(r&&s.length>0)&&(s=s.concat(o.querySelectorAll(e,n,r))))}),s}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},nI=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function rI(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.setAttribute("data-tiptap-style",""),s.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(s),s}var sI=class extends wP{constructor(t={}){super(),this.css=null,this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:s,moved:i})=>this.options.onDrop(r,s,i)),this.on("paste",({event:r,slice:s})=>this.options.onPaste(r,s)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=ok(e,this.options.autofocus);this.editorState=Fs.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){var t;if(this.editorView){const e=this.editorView.dom;e!=null&&e.editor&&delete e.editor,this.editorView.destroy()}this.editorView=null,this.isInitialized=!1,(t=this.css)==null||t.remove(),this.css=null}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=rI(nI,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.editorState=this.state.apply(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=Gx(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(s=>{const i=typeof s=="string"?`${s}$`:s.key;n=n.filter(o=>!o.key.startsWith(i))}),e.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var t,e;const r=[...this.options.enableCoreExtensions?[gk,ck.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),hk,vk,wk,kk,mk,xk,pk].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new fc(r,this)}createCommandManager(){this.commandManager=new lc({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=th(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=th(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){var e;this.editorView=new $x(t,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)==null?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.createNodeViews(),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(u=>{var c;return(c=this.capturedTransaction)==null?void 0:c.step(u)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),r=!this.state.selection.eq(e.selection),s=n.includes(t),i=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!s)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const o=n.findLast(u=>u.getMeta("focus")||u.getMeta("blur")),l=o==null?void 0:o.getMeta("focus"),a=o==null?void 0:o.getMeta("blur");l&&this.emit("focus",{editor:this,event:l.event,transaction:o}),a&&this.emit("blur",{editor:this,event:a.event,transaction:o}),!(t.getMeta("preventUpdate")||!n.some(u=>u.docChanged)||i.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return tk(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return RP(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Fp(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return _P(this.state.doc,{blockSeparator:e,textSerializers:{...Zx(this.schema),...n}})}get isEmpty(){return cc(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new tI(e,this)}get $doc(){return this.$pos(0)}};function fi(t){return new dc({find:t.find,handler:({state:e,range:n,match:r})=>{const s=K(t.getAttributes,void 0,r);if(s===!1||s===null)return null;const{tr:i}=e,o=r[r.length-1],l=r[0];if(o){const a=l.search(/\S/),u=n.from+l.indexOf(o),c=u+o.length;if(Wp(n.from,n.to,e.doc).filter(h=>h.mark.type.excluded.find(y=>y===t.type&&y!==h.mark.type)).filter(h=>h.to>u).length)return null;c<n.to&&i.delete(c,n.to),u>n.from&&i.delete(n.from+a,u);const f=n.from+a+o.length;i.addMark(n.from+a,f,t.type.create(s||{})),i.removeStoredMark(t.type)}}})}function Sk(t){return new dc({find:t.find,handler:({state:e,range:n,match:r})=>{const s=K(t.getAttributes,void 0,r)||{},{tr:i}=e,o=n.from;let l=n.to;const a=t.type.create(s);if(r[1]){const u=r[0].lastIndexOf(r[1]);let c=o+u;c>l?c=l:l=c+r[1].length;const d=r[0][r[0].length-1];i.insertText(d,o+r[0].length-1),i.replaceWith(c,l,a)}else if(r[0]){const u=t.type.isInline?o:o-1;i.insert(u,t.type.create(s)).delete(i.mapping.map(o),i.mapping.map(l))}i.scrollIntoView()}})}function rh(t){return new dc({find:t.find,handler:({state:e,range:n,match:r})=>{const s=e.doc.resolve(n.from),i=K(t.getAttributes,void 0,r)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,i)}})}function hi(t){return new dc({find:t.find,handler:({state:e,range:n,match:r,chain:s})=>{const i=K(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),a=o.doc.resolve(n.from).blockRange(),u=a&&_p(a,t.type,i);if(!u)return null;if(o.wrap(a,u),t.keepMarks&&t.editor){const{selection:d,storedMarks:f}=e,{splittableMarks:h}=t.editor.extensionManager,p=f||d.$to.parentOffset&&d.$from.marks();if(p){const y=p.filter(w=>h.includes(w.type.name));o.ensureMarks(y)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(d,i).run()}const c=o.doc.resolve(n.from-1).nodeBefore;c&&c.type===t.type&&kr(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,c))&&o.join(n.from-1)}})}function iI(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof D){const i=r.index();return r.parent.canReplaceWith(i,i+1,e)}let s=r.depth;for(;s>=0;){const i=r.index(s);if(r.node(s).contentMatchAt(i).matchType(e))return!0;s-=1}return!1}function oI(t,e,n={}){const{state:r}=e,{doc:s,tr:i}=r,o=t;s.descendants((l,a)=>{const u=i.mapping.map(a),c=i.mapping.map(a)+l.nodeSize;let d=null;if(l.marks.forEach(h=>{if(h!==o)return!1;d=h}),!d)return;let f=!1;if(Object.keys(n).forEach(h=>{n[h]!==d.attrs[h]&&(f=!0)}),f){const h=t.type.create({...t.attrs,...n});i.removeMark(u,c,t.type),i.addMark(u,c,h)}}),i.docChanged&&e.view.dispatch(i)}var at=class bk extends Kp{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new bk(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function rs(t){return new FP({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:s})=>{const i=K(t.getAttributes,void 0,r,s);if(i===!1||i===null)return null;const{tr:o}=e,l=r[r.length-1],a=r[0];let u=n.to;if(l){const c=a.search(/\S/),d=n.from+a.indexOf(l),f=d+l.length;if(Wp(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(w=>w===t.type&&w!==p.mark.type)).filter(p=>p.to>d).length)return null;f<n.to&&o.delete(f,n.to),d>n.from&&o.delete(n.from+c,d),u=n.from+c+l.length,o.addMark(n.from+c,u,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}var lI=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,s,i;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(s=r;s--!==0;)if(!t(e[s],n[s]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(s of e.entries())if(!n.has(s[0]))return!1;for(s of e.entries())if(!t(s[1],n.get(s[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(s of e.entries())if(!n.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(s=r;s--!==0;)if(e[s]!==n[s])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(n).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,i[s]))return!1;for(s=r;s--!==0;){var o=i[s];if(!(o==="_owner"&&e.$$typeof)&&!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n};const aI=pi(lI);var Ek={exports:{}},Ck={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hc=k,uI=Ep;function cI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var dI=typeof Object.is=="function"?Object.is:cI,fI=uI.useSyncExternalStore,hI=hc.useRef,pI=hc.useEffect,mI=hc.useMemo,gI=hc.useDebugValue;Ck.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=hI(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=mI(function(){function a(h){if(!u){if(u=!0,c=h,h=r(h),s!==void 0&&o.hasValue){var p=o.value;if(s(p,h))return d=p}return d=h}if(p=d,dI(c,h))return p;var y=r(h);return s!==void 0&&s(p,y)?(c=h,p):(c=h,d=y)}var u=!1,c,d,f=n===void 0?null:n;return[function(){return a(e())},f===null?void 0:function(){return a(f())}]},[e,n,r,s]);var l=fI(t,i[0],i[1]);return pI(function(){o.hasValue=!0,o.value=l},[l]),gI(l),l};Ek.exports=Ck;var yI=Ek.exports,vI=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},wI=({contentComponent:t})=>{const e=Ep.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return g.jsx(g.Fragment,{children:Object.values(e)})};function xI(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:CE.createPortal(r.reactElement,r.element,n)},t.forEach(s=>s())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(s=>s())}}}var kI=class extends We.Component{constructor(t){var e;super(t),this.editorContentRef=We.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const t=this.props.editor;if(t&&!t.isDestroyed&&t.options.element){if(t.contentComponent)return;const e=this.editorContentRef.current;e.append(...t.options.element.childNodes),t.setOptions({element:e}),t.contentComponent=xI(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=t.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),t.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!((t=e.options.element)!=null&&t.firstChild)))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:t,innerRef:e,...n}=this.props;return g.jsxs(g.Fragment,{children:[g.jsx("div",{ref:vI(e,this.editorContentRef),...n}),(t==null?void 0:t.contentComponent)&&g.jsx(wI,{contentComponent:t.contentComponent})]})}},SI=k.forwardRef((t,e)=>{const n=We.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return We.createElement(kI,{key:n,innerRef:e,...t})}),bI=We.memo(SI),EI=typeof window<"u"?k.useLayoutEffect:k.useEffect,CI=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",e),()=>{n.off("transaction",e)}}}};function TI(t){var e;const[n]=k.useState(()=>new CI(t.editor)),r=yI.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:aI);return EI(()=>n.watch(t.editor),[t.editor,n]),k.useDebugValue(r),r}var _I=!1,sh=typeof window>"u",NI=sh||!!(typeof window<"u"&&window.next),OI=class Tk{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0)return sh||NI?null:this.createEditor();if(this.options.current.immediatelyRender&&sh&&_I)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var s,i;return(i=(s=this.options.current).onBeforeCreate)==null?void 0:i.call(s,...r)},onBlur:(...r)=>{var s,i;return(i=(s=this.options.current).onBlur)==null?void 0:i.call(s,...r)},onCreate:(...r)=>{var s,i;return(i=(s=this.options.current).onCreate)==null?void 0:i.call(s,...r)},onDestroy:(...r)=>{var s,i;return(i=(s=this.options.current).onDestroy)==null?void 0:i.call(s,...r)},onFocus:(...r)=>{var s,i;return(i=(s=this.options.current).onFocus)==null?void 0:i.call(s,...r)},onSelectionUpdate:(...r)=>{var s,i;return(i=(s=this.options.current).onSelectionUpdate)==null?void 0:i.call(s,...r)},onTransaction:(...r)=>{var s,i;return(i=(s=this.options.current).onTransaction)==null?void 0:i.call(s,...r)},onUpdate:(...r)=>{var s,i;return(i=(s=this.options.current).onUpdate)==null?void 0:i.call(s,...r)},onContentError:(...r)=>{var s,i;return(i=(s=this.options.current).onContentError)==null?void 0:i.call(s,...r)},onDrop:(...r)=>{var s,i;return(i=(s=this.options.current).onDrop)==null?void 0:i.call(s,...r)},onPaste:(...r)=>{var s,i;return(i=(s=this.options.current).onPaste)==null?void 0:i.call(s,...r)},onDelete:(...r)=>{var s,i;return(i=(s=this.options.current).onDelete)==null?void 0:i.call(s,...r)}};return new sI(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((s,i)=>{var o;return s===((o=n.extensions)==null?void 0:o[i])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?Tk.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,s)=>r===e[s]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function MI(t={},e=[]){const n=k.useRef(t);n.current=t;const[r]=k.useState(()=>new OI(n)),s=Ep.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return k.useDebugValue(s),k.useEffect(r.onRender(e)),TI({editor:s,selector:({transactionNumber:i})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&i===0?0:i+1}),s}var AI=k.createContext({editor:null});AI.Consumer;var PI=k.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),RI=()=>k.useContext(PI);We.forwardRef((t,e)=>{const{onDragStart:n}=RI(),r=t.as||"div";return g.jsx(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});We.createContext({markViewContentRef:()=>{}});var Qa=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},II=/^\s*>\s$/,jI=at.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return Qa("blockquote",{...he(this.options.HTMLAttributes,t),children:Qa("slot",{})})},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[hi({find:II,type:this.type})]}}),DI=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,LI=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,$I=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,zI=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,BI=ds.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return Qa("strong",{...he(this.options.HTMLAttributes,t),children:Qa("slot",{})})},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[fi({find:DI,type:this.type}),fi({find:$I,type:this.type})]},addPasteRules(){return[rs({find:LI,type:this.type}),rs({find:zI,type:this.type})]}}),FI=/(^|[^`])`([^`]+)`(?!`)/,UI=/(^|[^`])`([^`]+)`(?!`)/g,HI=ds.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",he(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[fi({find:FI,type:this.type})]},addPasteRules(){return[rs({find:UI,type:this.type})]}}),VI=/^```([a-z]+)?[\s\n]$/,WI=/^~~~([a-z]+)?[\s\n]$/,KI=at.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,i=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",he(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:s}=n;if(!s||r.parent.type!==this.type)return!1;const i=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!i||!o?!1:t.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:s,empty:i}=n;if(!i||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const l=s.after();return l===void 0?!1:r.nodeAt(l)?t.commands.command(({tr:u})=>(u.setSelection(B.near(r.resolve(l))),!0)):t.commands.exitCode()}}},addInputRules(){return[rh({find:VI,type:this.type,getAttributes:t=>({language:t[1]})}),rh({find:WI,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new ce({key:new Oe("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,i=s==null?void 0:s.mode;if(!n||!i)return!1;const{tr:o,schema:l}=t.state,a=l.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:i},a)),o.selection.$from.parent.type!==this.type&&o.setSelection(L.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),qI=at.create({name:"doc",topNode:!0,content:"block+"}),JI=at.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",he(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:s,storedMarks:i}=n;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:l}=r.extensionManager,a=i||s.$to.parentOffset&&s.$from.marks();return e().insertContent({type:this.name}).command(({tr:u,dispatch:c})=>{if(c&&a&&o){const d=a.filter(f=>l.includes(f.type.name));u.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),GI=at.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,he(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>rh({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),QI=at.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",he(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!iI(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:r}=n,s=t();return sk(n)?s.insertContentAt(r.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({tr:i,dispatch:o})=>{var l;if(o){const{$to:a}=i.selection,u=a.end();if(a.nodeAfter)a.nodeAfter.isTextblock?i.setSelection(L.create(i.doc,a.pos+1)):a.nodeAfter.isBlock?i.setSelection(D.create(i.doc,a.pos)):i.setSelection(L.create(i.doc,a.pos));else{const c=(l=a.parent.type.contentMatch.defaultType)==null?void 0:l.create();c&&(i.insert(u,c),i.setSelection(L.create(i.doc,u+1)))}i.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Sk({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),YI=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,XI=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,ZI=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,ej=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,tj=ds.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",he(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[fi({find:YI,type:this.type}),fi({find:ZI,type:this.type})]},addPasteRules(){return[rs({find:XI,type:this.type}),rs({find:ej,type:this.type})]}});const nj="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",rj="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",ih="numeric",oh="ascii",lh="alpha",co="asciinumeric",qi="alphanumeric",ah="domain",_k="emoji",sj="scheme",ij="slashscheme",xd="whitespace";function oj(t,e){return t in e||(e[t]=[]),e[t]}function zr(t,e,n){e[ih]&&(e[co]=!0,e[qi]=!0),e[oh]&&(e[co]=!0,e[lh]=!0),e[co]&&(e[qi]=!0),e[lh]&&(e[qi]=!0),e[qi]&&(e[ah]=!0),e[_k]&&(e[ah]=!0);for(const r in e){const s=oj(r,n);s.indexOf(t)<0&&s.push(t)}}function lj(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function nt(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}nt.groups={};nt.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const s=e.jr[r][0],i=e.jr[r][1];if(i&&s.test(t))return i}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let s=0;s<t.length;s++)this.tt(t[s],e,n,r)},tr(t,e,n,r){r=r||nt.groups;let s;return e&&e.j?s=e:(s=new nt(e),n&&r&&zr(e,n,r)),this.jr.push([t,s]),s},ts(t,e,n,r){let s=this;const i=t.length;if(!i)return s;for(let o=0;o<i-1;o++)s=s.tt(t[o]);return s.tt(t[i-1],e,n,r)},tt(t,e,n,r){r=r||nt.groups;const s=this;if(e&&e.j)return s.j[t]=e,e;const i=e;let o,l=s.go(t);if(l?(o=new nt,Object.assign(o.j,l.j),o.jr.push.apply(o.jr,l.jr),o.jd=l.jd,o.t=l.t):o=new nt,i){if(r)if(o.t&&typeof o.t=="string"){const a=Object.assign(lj(o.t,r),n);zr(i,a,r)}else n&&zr(i,n,r);o.t=i}return s.j[t]=o,o}};const F=(t,e,n,r,s)=>t.ta(e,n,r,s),le=(t,e,n,r,s)=>t.tr(e,n,r,s),Qy=(t,e,n,r,s)=>t.ts(e,n,r,s),N=(t,e,n,r,s)=>t.tt(e,n,r,s),hn="WORD",uh="UWORD",Nk="ASCIINUMERICAL",Ok="ALPHANUMERICAL",Ko="LOCALHOST",ch="TLD",dh="UTLD",aa="SCHEME",Ns="SLASH_SCHEME",Jp="NUM",fh="WS",Gp="NL",fo="OPENBRACE",ho="CLOSEBRACE",Ya="OPENBRACKET",Xa="CLOSEBRACKET",Za="OPENPAREN",eu="CLOSEPAREN",tu="OPENANGLEBRACKET",nu="CLOSEANGLEBRACKET",ru="FULLWIDTHLEFTPAREN",su="FULLWIDTHRIGHTPAREN",iu="LEFTCORNERBRACKET",ou="RIGHTCORNERBRACKET",lu="LEFTWHITECORNERBRACKET",au="RIGHTWHITECORNERBRACKET",uu="FULLWIDTHLESSTHAN",cu="FULLWIDTHGREATERTHAN",du="AMPERSAND",fu="APOSTROPHE",hu="ASTERISK",Un="AT",pu="BACKSLASH",mu="BACKTICK",gu="CARET",Jn="COLON",Qp="COMMA",yu="DOLLAR",Yt="DOT",vu="EQUALS",Yp="EXCLAMATION",vt="HYPHEN",po="PERCENT",wu="PIPE",xu="PLUS",ku="POUND",mo="QUERY",Xp="QUOTE",Mk="FULLWIDTHMIDDLEDOT",Zp="SEMI",Xt="SLASH",go="TILDE",Su="UNDERSCORE",Ak="EMOJI",bu="SYM";var Pk=Object.freeze({__proto__:null,ALPHANUMERICAL:Ok,AMPERSAND:du,APOSTROPHE:fu,ASCIINUMERICAL:Nk,ASTERISK:hu,AT:Un,BACKSLASH:pu,BACKTICK:mu,CARET:gu,CLOSEANGLEBRACKET:nu,CLOSEBRACE:ho,CLOSEBRACKET:Xa,CLOSEPAREN:eu,COLON:Jn,COMMA:Qp,DOLLAR:yu,DOT:Yt,EMOJI:Ak,EQUALS:vu,EXCLAMATION:Yp,FULLWIDTHGREATERTHAN:cu,FULLWIDTHLEFTPAREN:ru,FULLWIDTHLESSTHAN:uu,FULLWIDTHMIDDLEDOT:Mk,FULLWIDTHRIGHTPAREN:su,HYPHEN:vt,LEFTCORNERBRACKET:iu,LEFTWHITECORNERBRACKET:lu,LOCALHOST:Ko,NL:Gp,NUM:Jp,OPENANGLEBRACKET:tu,OPENBRACE:fo,OPENBRACKET:Ya,OPENPAREN:Za,PERCENT:po,PIPE:wu,PLUS:xu,POUND:ku,QUERY:mo,QUOTE:Xp,RIGHTCORNERBRACKET:ou,RIGHTWHITECORNERBRACKET:au,SCHEME:aa,SEMI:Zp,SLASH:Xt,SLASH_SCHEME:Ns,SYM:bu,TILDE:go,TLD:ch,UNDERSCORE:Su,UTLD:dh,UWORD:uh,WORD:hn,WS:fh});const cn=/[a-z]/,$i=new RegExp("\\p{L}","u"),kd=new RegExp("\\p{Emoji}","u"),dn=/\d/,Sd=/\s/,Yy="\r",bd=`
`,aj="",uj="",Ed="";let zl=null,Bl=null;function cj(t=[]){const e={};nt.groups=e;const n=new nt;zl==null&&(zl=Xy(nj)),Bl==null&&(Bl=Xy(rj)),N(n,"'",fu),N(n,"{",fo),N(n,"}",ho),N(n,"[",Ya),N(n,"]",Xa),N(n,"(",Za),N(n,")",eu),N(n,"<",tu),N(n,">",nu),N(n,"",ru),N(n,"",su),N(n,"",iu),N(n,"",ou),N(n,"",lu),N(n,"",au),N(n,"",uu),N(n,"",cu),N(n,"&",du),N(n,"*",hu),N(n,"@",Un),N(n,"`",mu),N(n,"^",gu),N(n,":",Jn),N(n,",",Qp),N(n,"$",yu),N(n,".",Yt),N(n,"=",vu),N(n,"!",Yp),N(n,"-",vt),N(n,"%",po),N(n,"|",wu),N(n,"+",xu),N(n,"#",ku),N(n,"?",mo),N(n,'"',Xp),N(n,"/",Xt),N(n,";",Zp),N(n,"~",go),N(n,"_",Su),N(n,"\\",pu),N(n,"",Mk);const r=le(n,dn,Jp,{[ih]:!0});le(r,dn,r);const s=le(r,cn,Nk,{[co]:!0}),i=le(r,$i,Ok,{[qi]:!0}),o=le(n,cn,hn,{[oh]:!0});le(o,dn,s),le(o,cn,o),le(s,dn,s),le(s,cn,s);const l=le(n,$i,uh,{[lh]:!0});le(l,cn),le(l,dn,i),le(l,$i,l),le(i,dn,i),le(i,cn),le(i,$i,i);const a=N(n,bd,Gp,{[xd]:!0}),u=N(n,Yy,fh,{[xd]:!0}),c=le(n,Sd,fh,{[xd]:!0});N(n,Ed,c),N(u,bd,a),N(u,Ed,c),le(u,Sd,c),N(c,Yy),N(c,bd),le(c,Sd,c),N(c,Ed,c);const d=le(n,kd,Ak,{[_k]:!0});N(d,"#"),le(d,kd,d),N(d,aj,d);const f=N(d,uj);N(f,"#"),le(f,kd,d);const h=[[cn,o],[dn,s]],p=[[cn,null],[$i,l],[dn,i]];for(let y=0;y<zl.length;y++)jn(n,zl[y],ch,hn,h);for(let y=0;y<Bl.length;y++)jn(n,Bl[y],dh,uh,p);zr(ch,{tld:!0,ascii:!0},e),zr(dh,{utld:!0,alpha:!0},e),jn(n,"file",aa,hn,h),jn(n,"mailto",aa,hn,h),jn(n,"http",Ns,hn,h),jn(n,"https",Ns,hn,h),jn(n,"ftp",Ns,hn,h),jn(n,"ftps",Ns,hn,h),zr(aa,{scheme:!0,ascii:!0},e),zr(Ns,{slashscheme:!0,ascii:!0},e),t=t.sort((y,w)=>y[0]>w[0]?1:-1);for(let y=0;y<t.length;y++){const w=t[y][0],v=t[y][1]?{[sj]:!0}:{[ij]:!0};w.indexOf("-")>=0?v[ah]=!0:cn.test(w)?dn.test(w)?v[co]=!0:v[oh]=!0:v[ih]=!0,Qy(n,w,w,v)}return Qy(n,"localhost",Ko,{ascii:!0}),n.jd=new nt(bu),{start:n,tokens:Object.assign({groups:e},Pk)}}function Rk(t,e){const n=dj(e.replace(/[A-Z]/g,l=>l.toLowerCase())),r=n.length,s=[];let i=0,o=0;for(;o<r;){let l=t,a=null,u=0,c=null,d=-1,f=-1;for(;o<r&&(a=l.go(n[o]));)l=a,l.accepts()?(d=0,f=0,c=l):d>=0&&(d+=n[o].length,f++),u+=n[o].length,i+=n[o].length,o++;i-=d,o-=f,u-=d,s.push({t:c.t,v:e.slice(i-u,i),s:i-u,e:i})}return s}function dj(t){const e=[],n=t.length;let r=0;for(;r<n;){let s=t.charCodeAt(r),i,o=s<55296||s>56319||r+1===n||(i=t.charCodeAt(r+1))<56320||i>57343?t[r]:t.slice(r,r+2);e.push(o),r+=o.length}return e}function jn(t,e,n,r,s){let i;const o=e.length;for(let l=0;l<o-1;l++){const a=e[l];t.j[a]?i=t.j[a]:(i=new nt(r),i.jr=s.slice(),t.j[a]=i),t=i}return i=new nt(n),i.jr=s.slice(),t.j[e[o-1]]=i,i}function Xy(t){const e=[],n=[];let r=0,s="0123456789";for(;r<t.length;){let i=0;for(;s.indexOf(t[r+i])>=0;)i++;if(i>0){e.push(n.join(""));for(let o=parseInt(t.substring(r,r+i),10);o>0;o--)n.pop();r+=i}else n.push(t[r]),r++}return e}const qo={defaultProtocol:"http",events:null,format:Zy,formatHref:Zy,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function em(t,e=null){let n=Object.assign({},qo);t&&(n=Object.assign(n,t instanceof em?t.o:t));const r=n.ignoreTags,s=[];for(let i=0;i<r.length;i++)s.push(r[i].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=s}em.prototype={o:qo,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let s=this.o[t];return s&&(typeof s=="object"?(s=n.t in s?s[n.t]:qo[t],typeof s=="function"&&r&&(s=s(e,n))):typeof s=="function"&&r&&(s=s(e,n.t,n)),s)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function Zy(t){return t}function Ik(t,e){this.t="token",this.v=t,this.tk=e}Ik.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=qo.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),s=t.get("tagName",n,e),i=this.toFormattedString(t),o={},l=t.get("className",n,e),a=t.get("target",n,e),u=t.get("rel",n,e),c=t.getObj("attributes",n,e),d=t.getObj("events",n,e);return o.href=r,l&&(o.class=l),a&&(o.target=a),u&&(o.rel=u),c&&Object.assign(o,c),{tagName:s,attributes:o,content:i,eventListeners:d}}};function pc(t,e){class n extends Ik{constructor(s,i){super(s,i),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const e0=pc("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),t0=pc("text"),fj=pc("nl"),Fl=pc("url",{isLink:!0,toHref(t=qo.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Ko&&t[1].t===Jn}}),yt=t=>new nt(t);function hj({groups:t}){const e=t.domain.concat([du,hu,Un,pu,mu,gu,yu,vu,vt,Jp,po,wu,xu,ku,Xt,bu,go,Su]),n=[fu,Jn,Qp,Yt,Yp,po,mo,Xp,Zp,tu,nu,fo,ho,Xa,Ya,Za,eu,ru,su,iu,ou,lu,au,uu,cu],r=[du,fu,hu,pu,mu,gu,yu,vu,vt,fo,ho,po,wu,xu,ku,mo,Xt,bu,go,Su],s=yt(),i=N(s,go);F(i,r,i),F(i,t.domain,i);const o=yt(),l=yt(),a=yt();F(s,t.domain,o),F(s,t.scheme,l),F(s,t.slashscheme,a),F(o,r,i),F(o,t.domain,o);const u=N(o,Un);N(i,Un,u),N(l,Un,u),N(a,Un,u);const c=N(i,Yt);F(c,r,i),F(c,t.domain,i);const d=yt();F(u,t.domain,d),F(d,t.domain,d);const f=N(d,Yt);F(f,t.domain,d);const h=yt(e0);F(f,t.tld,h),F(f,t.utld,h),N(u,Ko,h);const p=N(d,vt);N(p,vt,p),F(p,t.domain,d),F(h,t.domain,d),N(h,Yt,f),N(h,vt,p);const y=N(h,Jn);F(y,t.numeric,e0);const w=N(o,vt),m=N(o,Yt);N(w,vt,w),F(w,t.domain,o),F(m,r,i),F(m,t.domain,o);const v=yt(Fl);F(m,t.tld,v),F(m,t.utld,v),F(v,t.domain,o),F(v,r,i),N(v,Yt,m),N(v,vt,w),N(v,Un,u);const x=N(v,Jn),S=yt(Fl);F(x,t.numeric,S);const b=yt(Fl),E=yt();F(b,e,b),F(b,n,E),F(E,e,b),F(E,n,E),N(v,Xt,b),N(S,Xt,b);const C=N(l,Jn),T=N(a,Jn),I=N(T,Xt),R=N(I,Xt);F(l,t.domain,o),N(l,Yt,m),N(l,vt,w),F(a,t.domain,o),N(a,Yt,m),N(a,vt,w),F(C,t.domain,b),N(C,Xt,b),N(C,mo,b),F(R,t.domain,b),F(R,e,b),N(R,Xt,b);const ve=[[fo,ho],[Ya,Xa],[Za,eu],[tu,nu],[ru,su],[iu,ou],[lu,au],[uu,cu]];for(let on=0;on<ve.length;on++){const[Pn,fs]=ve[on],hs=N(b,Pn);N(E,Pn,hs),N(hs,fs,b);const Jt=yt(Fl);F(hs,e,Jt);const ln=yt();F(hs,n),F(Jt,e,Jt),F(Jt,n,ln),F(ln,e,Jt),F(ln,n,ln),N(Jt,fs,b),N(ln,fs,b)}return N(s,Ko,v),N(s,Gp,fj),{start:s,tokens:Pk}}function pj(t,e,n){let r=n.length,s=0,i=[],o=[];for(;s<r;){let l=t,a=null,u=null,c=0,d=null,f=-1;for(;s<r&&!(a=l.go(n[s].t));)o.push(n[s++]);for(;s<r&&(u=a||l.go(n[s].t));)a=null,l=u,l.accepts()?(f=0,d=l):f>=0&&f++,s++,c++;if(f<0)s-=c,s<r&&(o.push(n[s]),s++);else{o.length>0&&(i.push(Cd(t0,e,o)),o=[]),s-=f,c-=f;const h=d.t,p=n.slice(s-c,s);i.push(Cd(h,e,p))}}return o.length>0&&i.push(Cd(t0,e,o)),i}function Cd(t,e,n){const r=n[0].s,s=n[n.length-1].e,i=e.slice(r,s);return new t(i,n)}const mj=typeof console<"u"&&console&&console.warn||(()=>{}),gj="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Z={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function yj(){return nt.groups={},Z.scanner=null,Z.parser=null,Z.tokenQueue=[],Z.pluginQueue=[],Z.customSchemes=[],Z.initialized=!1,Z}function n0(t,e=!1){if(Z.initialized&&mj(`linkifyjs: already initialized - will not register custom scheme "${t}" ${gj}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Z.customSchemes.push([t,e])}function vj(){Z.scanner=cj(Z.customSchemes);for(let t=0;t<Z.tokenQueue.length;t++)Z.tokenQueue[t][1]({scanner:Z.scanner});Z.parser=hj(Z.scanner.tokens);for(let t=0;t<Z.pluginQueue.length;t++)Z.pluginQueue[t][1]({scanner:Z.scanner,parser:Z.parser});return Z.initialized=!0,Z}function tm(t){return Z.initialized||vj(),pj(Z.parser.start,t,Rk(Z.scanner.start,t))}tm.scan=Rk;function jk(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new em(n),s=tm(t),i=[];for(let o=0;o<s.length;o++){const l=s[o];l.isLink&&(!e||l.t===e)&&r.check(l)&&i.push(l.toFormattedObject(r))}return i}var nm="[\0- -\u2029]",wj=new RegExp(nm),xj=new RegExp(`${nm}$`),kj=new RegExp(nm,"g");function Sj(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function bj(t){return new ce({key:new Oe("autolink"),appendTransaction:(e,n,r)=>{const s=e.some(u=>u.docChanged)&&!n.doc.eq(r.doc),i=e.some(u=>u.getMeta("preventAutolink"));if(!s||i)return;const{tr:o}=r,l=qx(n.doc,[...e]);if(nk(l).forEach(({newRange:u})=>{const c=kP(r.doc,u,h=>h.isTextblock);let d,f;if(c.length>1)d=c[0],f=r.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ");else if(c.length){const h=r.doc.textBetween(u.from,u.to," "," ");if(!xj.test(h))return;d=c[0],f=r.doc.textBetween(d.pos,u.to,void 0," ")}if(d&&f){const h=f.split(wj).filter(Boolean);if(h.length<=0)return!1;const p=h[h.length-1],y=d.pos+f.lastIndexOf(p);if(!p)return!1;const w=tm(p).map(m=>m.toObject(t.defaultProtocol));if(!Sj(w))return!1;w.filter(m=>m.isLink).map(m=>({...m,from:y+m.start+1,to:y+m.end+1})).filter(m=>r.schema.marks.code?!r.doc.rangeHasMark(m.from,m.to,r.schema.marks.code):!0).filter(m=>t.validate(m.value)).filter(m=>t.shouldAutoLink(m.value)).forEach(m=>{Wp(m.from,m.to,r.doc).some(v=>v.mark.type===t.type)||o.addMark(m.from,m.to,t.type.create({href:m.href}))})}}),!!o.steps.length)return o}})}function Ej(t){return new ce({key:new Oe("handleClickLink"),props:{handleClick:(e,n,r)=>{var s,i;if(r.button!==0||!e.editable)return!1;let o=null;if(r.target instanceof HTMLAnchorElement)o=r.target;else{let c=r.target;const d=[];for(;c.nodeName!=="DIV";)d.push(c),c=c.parentNode;o=d.find(f=>f.nodeName==="A")}if(!o)return!1;const l=tk(e.state,t.type.name),a=(s=o==null?void 0:o.href)!=null?s:l.href,u=(i=o==null?void 0:o.target)!=null?i:l.target;return t.enableClickSelection&&t.editor.commands.extendMarkRange(t.type.name),o&&a?(window.open(a,u),!0):!1}}})}function Cj(t){return new ce({key:new Oe("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{state:s}=e,{selection:i}=s,{empty:o}=i;if(o)return!1;let l="";r.content.forEach(u=>{l+=u.textContent});const a=jk(l,{defaultProtocol:t.defaultProtocol}).find(u=>u.isLink&&u.value===l);return!l||!a?!1:t.editor.commands.setMark(t.type,{href:a.href})}}})}function _r(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const s=typeof r=="string"?r:r.scheme;s&&n.push(s)}),!t||t.replace(kj,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var Dk=ds.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){n0(t);return}n0(t.scheme,t.optionalSlashes)})},onDestroy(){yj()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!_r(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!_r(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!_r(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",he(this.options.HTMLAttributes,t),0]:["a",he(this.options.HTMLAttributes,{...t,href:""}),0]},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!_r(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!_r(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[rs({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,s=jk(t).filter(i=>i.isLink&&this.options.isAllowedUri(i.value,{defaultValidate:o=>!!_r(o,n),protocols:n,defaultProtocol:r}));s.length&&s.forEach(i=>e.push({text:i.value,data:{href:i.href},index:i.start}))}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(bj({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:s=>!!_r(s,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(Ej({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(Cj({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t}}),Tj=Dk,_j=Object.defineProperty,Nj=(t,e)=>{for(var n in e)_j(t,n,{get:e[n],enumerable:!0})},Oj="listItem",r0="textStyle",s0=/^\s*([-+*])\s$/,Lk=at.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",he(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Oj,this.editor.getAttributes(r0)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=hi({find:s0,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=hi({find:s0,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(r0),editor:this.editor})),[t]}}),$k=at.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",he(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Mj={};Nj(Mj,{findListItemPos:()=>ol,getNextListDepth:()=>rm,handleBackspace:()=>hh,handleDelete:()=>ph,hasListBefore:()=>zk,hasListItemAfter:()=>Aj,hasListItemBefore:()=>Bk,listItemHasSubList:()=>Fk,nextListIsDeeper:()=>Uk,nextListIsHigher:()=>Hk});var ol=(t,e)=>{const{$from:n}=e.selection,r=ge(t,e.schema);let s=null,i=n.depth,o=n.pos,l=null;for(;i>0&&l===null;)s=n.node(i),s.type===r?l=i:(i-=1,o-=1);return l===null?null:{$pos:e.doc.resolve(o),depth:l}},rm=(t,e)=>{const n=ol(t,e);if(!n)return!1;const[,r]=AP(e,t,n.$pos.pos+4);return r},zk=(t,e,n)=>{const{$anchor:r}=t.selection,s=Math.max(0,r.pos-2),i=t.doc.resolve(s).node();return!(!i||!n.includes(i.type.name))},Bk=(t,e)=>{var n;const{$anchor:r}=e.selection,s=e.doc.resolve(r.pos-2);return!(s.index()===0||((n=s.nodeBefore)==null?void 0:n.type.name)!==t)},Fk=(t,e,n)=>{if(!n)return!1;const r=ge(t,e.schema);let s=!1;return n.descendants(i=>{i.type===r&&(s=!0)}),s},hh=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!mr(t.state,e)&&zk(t.state,e,n)){const{$anchor:l}=t.state.selection,a=t.state.doc.resolve(l.before()-1),u=[];a.node().descendants((f,h)=>{f.type.name===e&&u.push({node:f,pos:h})});const c=u.at(-1);if(!c)return!1;const d=t.state.doc.resolve(a.start()+c.pos+1);return t.chain().cut({from:l.start()-1,to:l.end()+1},d.end()).joinForward().run()}if(!mr(t.state,e)||!jP(t.state))return!1;const r=ol(e,t.state);if(!r)return!1;const i=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),o=Fk(e,t.state,i);return Bk(e,t.state)&&!o?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},Uk=(t,e)=>{const n=rm(t,e),r=ol(t,e);return!r||!n?!1:n>r.depth},Hk=(t,e)=>{const n=rm(t,e),r=ol(t,e);return!r||!n?!1:n<r.depth},ph=(t,e)=>{if(!mr(t.state,e)||!IP(t.state,e))return!1;const{selection:n}=t.state,{$from:r,$to:s}=n;return!n.empty&&r.sameParent(s)?!1:Uk(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():Hk(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},Aj=(t,e)=>{var n;const{$anchor:r}=e.selection,s=e.doc.resolve(r.pos-r.parentOffset-2);return!(s.index()===s.parent.childCount-1||((n=s.nodeAfter)==null?void 0:n.type.name)!==t)},Vk=ye.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&ph(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&ph(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&hh(t,n,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&hh(t,n,r)&&(e=!0)}),e}}}}),Pj="listItem",i0="textStyle",o0=/^(\d+)\.\s$/,Wk=at.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",he(this.options.HTMLAttributes,n),0]:["ol",he(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Pj,this.editor.getAttributes(i0)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=hi({find:o0,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=hi({find:o0,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(i0)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),Rj=/^\s*(\[([( |x])?\])\s$/,Ij=at.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",he(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const s=document.createElement("li"),i=document.createElement("label"),o=document.createElement("span"),l=document.createElement("input"),a=document.createElement("div"),u=c=>{var d,f;l.ariaLabel=((f=(d=this.options.a11y)==null?void 0:d.checkboxLabel)==null?void 0:f.call(d,c,l.checked))||`Task item checkbox for ${c.textContent||"empty task item"}`};return u(t),i.contentEditable="false",l.type="checkbox",l.addEventListener("mousedown",c=>c.preventDefault()),l.addEventListener("change",c=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){l.checked=!l.checked;return}const{checked:d}=c.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:f})=>{const h=n();if(typeof h!="number")return!1;const p=f.doc.nodeAt(h);return f.setNodeMarkup(h,void 0,{...p==null?void 0:p.attrs,checked:d}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,d)||(l.checked=!l.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([c,d])=>{s.setAttribute(c,d)}),s.dataset.checked=t.attrs.checked,l.checked=t.attrs.checked,i.append(l,o),s.append(i,a),Object.entries(e).forEach(([c,d])=>{s.setAttribute(c,d)}),{dom:s,contentDOM:a,update:c=>c.type!==this.type?!1:(s.dataset.checked=c.attrs.checked,l.checked=c.attrs.checked,u(c),!0)}}},addInputRules(){return[hi({find:Rj,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),jj=at.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",he(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});ye.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(Lk.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push($k.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(Vk.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(Wk.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(Ij.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(jj.configure(this.options.taskList)),t}});var Dj=at.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",he(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Lj=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,$j=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,zj=ds.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",he(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[fi({find:Lj,type:this.type})]},addPasteRules(){return[rs({find:$j,type:this.type})]}}),Bj=at.create({name:"text",group:"inline"}),Fj=ds.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",he(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function Uj(t={}){return new ce({view(e){return new Hj(e,t)}})}class Hj{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let i=o=>{this[s](o)};return e.dom.addEventListener(s,i),{name:s,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,s=this.editorView.dom,i=s.getBoundingClientRect(),o=i.width/s.offsetWidth,l=i.height/s.offsetHeight;if(n){let d=e.nodeBefore,f=e.nodeAfter;if(d||f){let h=this.editorView.nodeDOM(this.cursorPos-(d?d.nodeSize:0));if(h){let p=h.getBoundingClientRect(),y=d?p.bottom:p.top;d&&f&&(y=(y+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let w=this.width/2*l;r={left:p.left,right:p.right,top:y-w,bottom:y+w}}}}if(!r){let d=this.editorView.coordsAtPos(this.cursorPos),f=this.width/2*o;r={left:d.left-f,right:d.left+f,top:d.top,bottom:d.bottom}}let a=this.editorView.dom.offsetParent;this.element||(this.element=a.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let u,c;if(!a||a==document.body&&getComputedStyle(a).position=="static")u=-pageXOffset,c=-pageYOffset;else{let d=a.getBoundingClientRect(),f=d.width/a.offsetWidth,h=d.height/a.offsetHeight;u=d.left-a.scrollLeft*f,c=d.top-a.scrollTop*h}this.element.style.left=(r.left-u)/o+"px",this.element.style.top=(r.top-c)/l+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/l+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),s=r&&r.type.spec.disableDropCursor,i=typeof s=="function"?s(this.editorView,n,e):s;if(n&&!i){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=Yw(this.editorView.state.doc,o,this.editorView.dragging.slice);l!=null&&(o=l)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class ue extends B{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return ue.valid(r)?new ue(r):B.near(r)}content(){return M.empty}eq(e){return e instanceof ue&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new ue(e.resolve(n.pos))}getBookmark(){return new sm(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!Vj(e)||!Wj(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let s=n.contentMatchAt(e.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&ue.valid(e))return e;let s=e.pos,i=null;for(let o=e.depth;;o--){let l=e.node(o);if(n>0?e.indexAfter(o)<l.childCount:e.index(o)>0){i=l.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;s+=n;let a=e.doc.resolve(s);if(ue.valid(a))return a}for(;;){let o=n>0?i.firstChild:i.lastChild;if(!o){if(i.isAtom&&!i.isText&&!D.isSelectable(i)){e=e.doc.resolve(s+i.nodeSize*n),r=!1;continue e}break}i=o,s+=n;let l=e.doc.resolve(s);if(ue.valid(l))return l}return null}}}ue.prototype.visible=!1;ue.findFrom=ue.findGapCursorFrom;B.jsonID("gapcursor",ue);class sm{constructor(e){this.pos=e}map(e){return new sm(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return ue.valid(n)?new ue(n):B.near(n)}}function Vj(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function Wj(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function Kj(){return new ce({props:{decorations:Qj,createSelectionBetween(t,e,n){return e.pos==n.pos&&ue.valid(n)?new ue(n):null},handleClick:Jj,handleKeyDown:qj,handleDOMEvents:{beforeinput:Gj}}})}const qj=zx({ArrowLeft:Ul("horiz",-1),ArrowRight:Ul("horiz",1),ArrowUp:Ul("vert",-1),ArrowDown:Ul("vert",1)});function Ul(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,s,i){let o=r.selection,l=e>0?o.$to:o.$from,a=o.empty;if(o instanceof L){if(!i.endOfTextblock(n)||l.depth==0)return!1;a=!1,l=r.doc.resolve(e>0?l.after():l.before())}let u=ue.findGapCursorFrom(l,e,a);return u?(s&&s(r.tr.setSelection(new ue(u))),!0):!1}}function Jj(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!ue.valid(r))return!1;let s=t.posAtCoords({left:n.clientX,top:n.clientY});return s&&s.inside>-1&&D.isSelectable(t.state.doc.nodeAt(s.inside))?!1:(t.dispatch(t.state.tr.setSelection(new ue(r))),!0)}function Gj(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof ue))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let s=_.empty;for(let o=r.length-1;o>=0;o--)s=_.from(r[o].createAndFill(null,s));let i=t.state.tr.replace(n.pos,n.pos,new M(s,0,0));return i.setSelection(L.near(i.doc.resolve(n.pos+1))),t.dispatch(i),!1}function Qj(t){if(!(t.selection instanceof ue))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",se.create(t.doc,[Ke.widget(t.selection.head,e,{key:"gapcursor"})])}var Eu=200,Ne=function(){};Ne.prototype.append=function(e){return e.length?(e=Ne.from(e),!this.length&&e||e.length<Eu&&this.leafAppend(e)||this.length<Eu&&e.leafPrepend(this)||this.appendInner(e)):this};Ne.prototype.prepend=function(e){return e.length?Ne.from(e).append(this):this};Ne.prototype.appendInner=function(e){return new Yj(this,e)};Ne.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Ne.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Ne.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Ne.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Ne.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(i,o){return s.push(e(i,o))},n,r),s};Ne.from=function(e){return e instanceof Ne?e:e&&e.length?new Kk(e):Ne.empty};var Kk=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(s,i){return s==0&&i==this.length?this:new e(this.values.slice(s,i))},e.prototype.getInner=function(s){return this.values[s]},e.prototype.forEachInner=function(s,i,o,l){for(var a=i;a<o;a++)if(s(this.values[a],l+a)===!1)return!1},e.prototype.forEachInvertedInner=function(s,i,o,l){for(var a=i-1;a>=o;a--)if(s(this.values[a],l+a)===!1)return!1},e.prototype.leafAppend=function(s){if(this.length+s.length<=Eu)return new e(this.values.concat(s.flatten()))},e.prototype.leafPrepend=function(s){if(this.length+s.length<=Eu)return new e(s.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(Ne);Ne.empty=new Kk([]);var Yj=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,s,i,o){var l=this.left.length;if(s<l&&this.left.forEachInner(r,s,Math.min(i,l),o)===!1||i>l&&this.right.forEachInner(r,Math.max(s-l,0),Math.min(this.length,i)-l,o+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,s,i,o){var l=this.left.length;if(s>l&&this.right.forEachInvertedInner(r,s-l,Math.max(i,l)-l,o+l)===!1||i<l&&this.left.forEachInvertedInner(r,Math.min(s,l),i,o)===!1)return!1},e.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var i=this.left.length;return s<=i?this.left.slice(r,s):r>=i?this.right.slice(r-i,s-i):this.left.slice(r,i).append(this.right.slice(0,s-i))},e.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new e(this.left,s)},e.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new e(s,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Ne);const Xj=500;class Lt{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let s,i;n&&(s=this.remapping(r,this.items.length),i=s.maps.length);let o=e.tr,l,a,u=[],c=[];return this.items.forEach((d,f)=>{if(!d.step){s||(s=this.remapping(r,f+1),i=s.maps.length),i--,c.push(d);return}if(s){c.push(new Zt(d.map));let h=d.step.map(s.slice(i)),p;h&&o.maybeStep(h).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],u.push(new Zt(p,void 0,void 0,u.length+c.length))),i--,p&&s.appendMap(p,i)}else o.maybeStep(d.step);if(d.selection)return l=s?d.selection.map(s.slice(i)):d.selection,a=new Lt(this.items.slice(0,r).append(c.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:a,transform:o,selection:l}}addTransform(e,n,r,s){let i=[],o=this.eventCount,l=this.items,a=!s&&l.length?l.get(l.length-1):null;for(let c=0;c<e.steps.length;c++){let d=e.steps[c].invert(e.docs[c]),f=new Zt(e.mapping.maps[c],d,n),h;(h=a&&a.merge(f))&&(f=h,c?i.pop():l=l.slice(0,l.length-1)),i.push(f),n&&(o++,n=void 0),s||(a=f)}let u=o-r.depth;return u>eD&&(l=Zj(l,u),o-=u),new Lt(l.append(i),o)}remapping(e,n){let r=new zo;return this.items.forEach((s,i)=>{let o=s.mirrorOffset!=null&&i-s.mirrorOffset>=e?r.maps.length-s.mirrorOffset:void 0;r.appendMap(s.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new Lt(this.items.append(e.map(n=>new Zt(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],s=Math.max(0,this.items.length-n),i=e.mapping,o=e.steps.length,l=this.eventCount;this.items.forEach(f=>{f.selection&&l--},s);let a=n;this.items.forEach(f=>{let h=i.getMirror(--a);if(h==null)return;o=Math.min(o,h);let p=i.maps[h];if(f.step){let y=e.steps[h].invert(e.docs[h]),w=f.selection&&f.selection.map(i.slice(a+1,h));w&&l++,r.push(new Zt(p,y,w))}else r.push(new Zt(p))},s);let u=[];for(let f=n;f<o;f++)u.push(new Zt(i.maps[f]));let c=this.items.slice(0,s).append(u).append(r),d=new Lt(c,l);return d.emptyItemCount()>Xj&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,s=[],i=0;return this.items.forEach((o,l)=>{if(l>=e)s.push(o),o.selection&&i++;else if(o.step){let a=o.step.map(n.slice(r)),u=a&&a.getMap();if(r--,u&&n.appendMap(u,r),a){let c=o.selection&&o.selection.map(n.slice(r));c&&i++;let d=new Zt(u.invert(),a,c),f,h=s.length-1;(f=s.length&&s[h].merge(d))?s[h]=f:s.push(d)}}else o.map&&r--},this.items.length,0),new Lt(Ne.from(s.reverse()),i)}}Lt.empty=new Lt(Ne.empty,0);function Zj(t,e){let n;return t.forEach((r,s)=>{if(r.selection&&e--==0)return n=s,!1}),t.slice(n)}class Zt{constructor(e,n,r,s){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Zt(n.getMap().invert(),n,this.selection)}}}class Hn{constructor(e,n,r,s,i){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=s,this.prevComposition=i}}const eD=20;function tD(t,e,n,r){let s=n.getMeta(qr),i;if(s)return s.historyState;n.getMeta(sD)&&(t=new Hn(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(qr))return o.getMeta(qr).redo?new Hn(t.done.addTransform(n,void 0,r,ua(e)),t.undone,l0(n.mapping.maps),t.prevTime,t.prevComposition):new Hn(t.done,t.undone.addTransform(n,void 0,r,ua(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),a=t.prevTime==0||!o&&t.prevComposition!=l&&(t.prevTime<(n.time||0)-r.newGroupDelay||!nD(n,t.prevRanges)),u=o?Td(t.prevRanges,n.mapping):l0(n.mapping.maps);return new Hn(t.done.addTransform(n,a?e.selection.getBookmark():void 0,r,ua(e)),Lt.empty,u,n.time,l??t.prevComposition)}else return(i=n.getMeta("rebased"))?new Hn(t.done.rebased(n,i),t.undone.rebased(n,i),Td(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Hn(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Td(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function nD(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,s)=>{for(let i=0;i<e.length;i+=2)r<=e[i+1]&&s>=e[i]&&(n=!0)}),n}function l0(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,s,i,o)=>e.push(i,o));return e}function Td(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let s=e.map(t[r],1),i=e.map(t[r+1],-1);s<=i&&n.push(s,i)}return n}function rD(t,e,n){let r=ua(e),s=qr.get(e).spec.config,i=(n?t.undone:t.done).popEvent(e,r);if(!i)return null;let o=i.selection.resolve(i.transform.doc),l=(n?t.done:t.undone).addTransform(i.transform,e.selection.getBookmark(),s,r),a=new Hn(n?l:i.remaining,n?i.remaining:l,null,0,-1);return i.transform.setSelection(o).setMeta(qr,{redo:n,historyState:a})}let _d=!1,a0=null;function ua(t){let e=t.plugins;if(a0!=e){_d=!1,a0=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){_d=!0;break}}return _d}const qr=new Oe("history"),sD=new Oe("closeHistory");function iD(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new ce({key:qr,state:{init(){return new Hn(Lt.empty,Lt.empty,null,0,-1)},apply(e,n,r){return tD(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,s=r=="historyUndo"?Jk:r=="historyRedo"?Gk:null;return s?(n.preventDefault(),s(e.state,e.dispatch)):!1}}}})}function qk(t,e){return(n,r)=>{let s=qr.getState(n);if(!s||(t?s.undone:s.done).eventCount==0)return!1;if(r){let i=rD(s,n,t);i&&r(e?i.scrollIntoView():i)}return!0}}const Jk=qk(!1,!0),Gk=qk(!0,!0);ye.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new ce({key:new Oe("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const s=this.options.limit;if(s==null||s===0){t=!0;return}const i=this.storage.characters({node:r.doc});if(i>s){const o=i-s,l=0,a=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${s} characters. Content was automatically trimmed.`);const u=r.tr.deleteRange(l,a);return t=!0,u}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const s=this.storage.characters({node:n.doc}),i=this.storage.characters({node:e.doc});if(i<=r||s>r&&i>r&&i<=s)return!0;if(s>r&&i>r&&i>s||!e.getMeta("paste"))return!1;const l=e.selection.$head.pos,a=i-r,u=l-a,c=l;return e.deleteRange(u,c),!(this.storage.characters({node:e.doc})>r)}})]}});var oD=ye.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Uj(this.options)]}});ye.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new ce({key:new Oe("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:s}=e,i=[];if(!n||!r)return se.create(t,[]);let o=0;this.options.mode==="deepest"&&t.descendants((a,u)=>{if(a.isText)return;if(!(s>=u&&s<=u+a.nodeSize-1))return!1;o+=1});let l=0;return t.descendants((a,u)=>{if(a.isText||!(s>=u&&s<=u+a.nodeSize-1))return!1;if(l+=1,this.options.mode==="deepest"&&o-l>0||this.options.mode==="shallowest"&&l>1)return this.options.mode==="deepest";i.push(Ke.node(u,u+a.nodeSize,{class:this.options.className}))}),se.create(t,i)}}})]}});var lD=ye.create({name:"gapCursor",addProseMirrorPlugins(){return[Kj()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=K(j(t,"allowGapCursor",n)))!=null?e:null}}});ye.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new ce({key:new Oe("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,s=[];if(!n)return null;const i=this.editor.isEmpty;return t.descendants((o,l)=>{const a=r>=l&&r<=l+o.nodeSize,u=!o.isLeaf&&cc(o);if((a||!this.options.showOnlyCurrent)&&u){const c=[this.options.emptyNodeClass];i&&c.push(this.options.emptyEditorClass);const d=Ke.node(l,l+o.nodeSize,{class:c.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:l,hasAnchor:a}):this.options.placeholder});s.push(d)}return this.options.includeChildren}),se.create(t,s)}}})]}});ye.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new ce({key:new Oe("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||sk(n.selection)||t.view.dragging?null:se.create(n.doc,[Ke.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function u0({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}var aD=ye.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:[]}},addProseMirrorPlugins(){const t=new Oe(this.name),e=Object.entries(this.editor.schema.nodes).map(([,n])=>n).filter(n=>(this.options.notAfter||[]).concat(this.options.node).includes(n.name));return[new ce({key:t,appendTransaction:(n,r,s)=>{const{doc:i,tr:o,schema:l}=s,a=t.getState(s),u=i.content.size,c=l.nodes[this.options.node];if(a)return o.insert(u,c.create())},state:{init:(n,r)=>{const s=r.tr.doc.lastChild;return!u0({node:s,types:e})},apply:(n,r)=>{if(!n.docChanged)return r;const s=n.doc.lastChild;return!u0({node:s,types:e})}}})]}}),uD=ye.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>Jk(t,e),redo:()=>({state:t,dispatch:e})=>Gk(t,e)}},addProseMirrorPlugins(){return[iD(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),cD=ye.create({name:"starterKit",addExtensions(){var t,e,n,r;const s=[];return this.options.bold!==!1&&s.push(BI.configure(this.options.bold)),this.options.blockquote!==!1&&s.push(jI.configure(this.options.blockquote)),this.options.bulletList!==!1&&s.push(Lk.configure(this.options.bulletList)),this.options.code!==!1&&s.push(HI.configure(this.options.code)),this.options.codeBlock!==!1&&s.push(KI.configure(this.options.codeBlock)),this.options.document!==!1&&s.push(qI.configure(this.options.document)),this.options.dropcursor!==!1&&s.push(oD.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&s.push(lD.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&s.push(JI.configure(this.options.hardBreak)),this.options.heading!==!1&&s.push(GI.configure(this.options.heading)),this.options.undoRedo!==!1&&s.push(uD.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&s.push(QI.configure(this.options.horizontalRule)),this.options.italic!==!1&&s.push(tj.configure(this.options.italic)),this.options.listItem!==!1&&s.push($k.configure(this.options.listItem)),this.options.listKeymap!==!1&&s.push(Vk.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&s.push(Dk.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&s.push(Wk.configure(this.options.orderedList)),this.options.paragraph!==!1&&s.push(Dj.configure(this.options.paragraph)),this.options.strike!==!1&&s.push(zj.configure(this.options.strike)),this.options.text!==!1&&s.push(Bj.configure(this.options.text)),this.options.underline!==!1&&s.push(Fj.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&s.push(aD.configure((r=this.options)==null?void 0:r.trailingNode)),s}}),dD=cD,fD=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,hD=at.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:t}){return["img",he(this.options.HTMLAttributes,t)]},addCommands(){return{setImage:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}},addInputRules(){return[Sk({find:fD,type:this.type,getAttributes:t=>{const[,,e,n,r]=t;return{src:n,alt:e,title:r}}})]}}),pD=hD;function Qk({content:t,onChange:e}){const n=MI({extensions:[dD,Tj.configure({openOnClick:!1}),pD],content:t,onUpdate:({editor:i})=>{e(i.getHTML())}});if(!n)return null;const r=()=>{const i=window.prompt("URL do link:");i&&n.chain().focus().setLink({href:i}).run()},s=()=>{const i=window.prompt("URL da imagem:");i&&n.chain().focus().setImage({src:i}).run()};return g.jsxs("div",{className:"border border-stone-200 rounded-lg overflow-hidden",children:[g.jsx("div",{className:"border-b border-stone-200 p-3 bg-stone-50",children:g.jsxs("div",{className:"flex items-center space-x-2 flex-wrap gap-2",children:[g.jsx("button",{onClick:()=>n.chain().focus().toggleHeading({level:2}).run(),className:`p-2 rounded hover:bg-stone-200 transition-colors ${n.isActive("heading",{level:2})?"bg-stone-200":""}`,children:g.jsx(rO,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>n.chain().focus().setParagraph().run(),className:`p-2 rounded hover:bg-stone-200 transition-colors ${n.isActive("paragraph")?"bg-stone-200":""}`,children:g.jsx(DO,{className:"w-4 h-4"})}),g.jsx("div",{className:"w-px h-6 bg-stone-300"}),g.jsx("button",{onClick:()=>n.chain().focus().toggleBold().run(),className:`p-2 rounded hover:bg-stone-200 transition-colors ${n.isActive("bold")?"bg-stone-200":""}`,children:g.jsx(GN,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>n.chain().focus().toggleItalic().run(),className:`p-2 rounded hover:bg-stone-200 transition-colors ${n.isActive("italic")?"bg-stone-200":""}`,children:g.jsx(uO,{className:"w-4 h-4"})}),g.jsx("div",{className:"w-px h-6 bg-stone-300"}),g.jsx("button",{onClick:()=>n.chain().focus().toggleBulletList().run(),className:`p-2 rounded hover:bg-stone-200 transition-colors ${n.isActive("bulletList")?"bg-stone-200":""}`,children:g.jsx(mO,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>n.chain().focus().toggleOrderedList().run(),className:`p-2 rounded hover:bg-stone-200 transition-colors ${n.isActive("orderedList")?"bg-stone-200":""}`,children:g.jsx(hO,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>n.chain().focus().toggleBlockquote().run(),className:`p-2 rounded hover:bg-stone-200 transition-colors ${n.isActive("blockquote")?"bg-stone-200":""}`,children:g.jsx(NO,{className:"w-4 h-4"})}),g.jsx("div",{className:"w-px h-6 bg-stone-300"}),g.jsx("button",{onClick:r,className:"p-2 rounded hover:bg-stone-200 transition-colors",children:g.jsx(dO,{className:"w-4 h-4"})}),g.jsx("button",{onClick:s,className:"p-2 rounded hover:bg-stone-200 transition-colors",children:g.jsx(lO,{className:"w-4 h-4"})})]})}),g.jsx(bI,{editor:n,className:"min-h-[400px] p-4 prose prose-stone max-w-none focus:outline-none"})]})}function mD(){const[t,e]=k.useState(""),[n,r]=k.useState(""),[s,i]=k.useState(null),[o,l]=k.useState(!1),[a,u]=k.useState(""),c=ki(),{createPost:d}=Xu(),f=y=>{y.target.files&&y.target.files[0]&&i(y.target.files[0])},h=async(y,w,m)=>{try{const v=WO(y),x=await d({title:y,slug:v,content:w,image_url:m,author_id:"",upvotes:0});c(`/post/${x.slug}`)}catch(v){throw console.error("Erro ao salvar:",v),v}},p=async y=>{y.preventDefault(),l(!0),u("");try{let w=null;if(s&&(w=await qO(s),!w)){u("Erro ao fazer upload da imagem"),l(!1);return}await h(t,n,w)}catch{u("Erro inesperado ao salvar a publicao")}l(!1)};return g.jsxs(g.Fragment,{children:[g.jsx(ls,{children:g.jsx("title",{children:"Nova Publicao - Filosofia & Reflexes"})}),g.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[g.jsxs("button",{onClick:()=>c("/painel"),className:"text-stone-600 hover:text-stone-800 inline-flex items-center mb-8 transition-colors",children:[g.jsx(Do,{className:"w-4 h-4 mr-1"}),"Voltar ao painel"]}),g.jsxs("div",{className:"mb-8",children:[g.jsx("h1",{className:"text-3xl font-serif text-stone-800 mb-2",children:"Nova Publicao"}),g.jsx("p",{className:"text-stone-600",children:"Compartilhe suas reflexes filosficas com o mundo."})]}),g.jsxs("form",{onSubmit:p,className:"space-y-8",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-stone-700 mb-2",children:"Ttulo da publicao"}),g.jsx("input",{type:"text",id:"title",value:t,onChange:y=>e(y.target.value),required:!0,className:"w-full px-4 py-3 border border-stone-300 rounded-lg focus:ring-2 focus:ring-stone-500 focus:border-transparent text-lg",placeholder:"Digite o ttulo da sua reflexo..."})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"image",className:"block text-sm font-medium text-stone-700 mb-2",children:"Imagem de capa (opcional)"}),g.jsxs("div",{className:"flex items-center",children:[g.jsxs("label",{className:"flex items-center space-x-2 px-4 py-2 border border-stone-300 rounded-lg cursor-pointer hover:bg-stone-50 transition-colors",children:[g.jsx($O,{className:"w-4 h-4"}),g.jsx("span",{children:"Escolher imagem"}),g.jsx("input",{type:"file",accept:"image/*",onChange:f,className:"hidden"})]}),s&&g.jsx("span",{className:"ml-3 text-sm text-stone-600",children:s.name})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-2",children:"Contedo"}),g.jsx(Qk,{content:n,onChange:r})]}),a&&g.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-600 text-sm",children:a}),g.jsx("div",{className:"flex justify-end",children:g.jsxs("button",{type:"submit",disabled:o||!t.trim()||!n.trim(),className:"inline-flex items-center px-6 py-3 bg-stone-800 text-white rounded-lg hover:bg-stone-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:[g.jsx(MO,{className:"w-4 h-4 mr-2"}),o?"Salvando...":"Publicar"]})})]})]})]})}function gD(){const{id:t}=A1(),e=ki(),[n,r]=k.useState(null),[s,i]=k.useState(!0),{updatePost:o}=Xu();k.useEffect(()=>{t&&l()},[t]);const l=async()=>{try{const{supabase:u}=await as(async()=>{const{supabase:f}=await Promise.resolve().then(()=>mw);return{supabase:f}},void 0),{data:c,error:d}=await u.from("posts").select(`
          *,
          profiles(id, name, email)
        `).eq("id",t).single();if(d)throw d;r(c)}catch(u){console.error("Erro ao carregar post:",u),e("/painel")}finally{i(!1)}},a=async(u,c,d)=>{if(n)try{await o(n.id,{title:u,content:c,image_url:d}),e("/painel")}catch(f){throw console.error("Erro ao atualizar post:",f),f}};return s?g.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:g.jsxs("div",{className:"animate-pulse space-y-4",children:[g.jsx("div",{className:"h-8 bg-stone-200 rounded w-1/3"}),g.jsx("div",{className:"h-64 bg-stone-200 rounded"})]})}):n?g.jsxs(g.Fragment,{children:[g.jsx(ls,{children:g.jsxs("title",{children:["Editar: ",n.title," - Filosofia & Reflexes"]})}),g.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[g.jsxs("button",{onClick:()=>e("/painel"),className:"text-stone-600 hover:text-stone-800 inline-flex items-center mb-8 transition-colors",children:[g.jsx(Do,{className:"w-4 h-4 mr-1"}),"Voltar ao painel"]}),g.jsxs("div",{className:"mb-8",children:[g.jsx("h1",{className:"text-3xl font-serif text-stone-800 mb-2",children:"Editar Publicao"}),g.jsx("p",{className:"text-stone-600",children:"Faa as alteraes necessrias em sua reflexo"})]}),g.jsx(Qk,{initialTitle:n.title,initialContent:n.content,initialImageUrl:n.image_url,onSave:a,submitText:"Salvar Alteraes"})]})]}):g.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8 text-center",children:[g.jsx("h1",{className:"text-2xl font-serif text-stone-600 mb-4",children:"Post no encontrado"}),g.jsxs("button",{onClick:()=>e("/painel"),className:"text-stone-600 hover:text-stone-800 inline-flex items-center",children:[g.jsx(Do,{className:"w-4 h-4 mr-1"}),"Voltar ao painel"]})]})}function yD(){const{posts:t,loading:e,deletePost:n}=Xu(),{signOut:r}=Qu(),s=async(i,o)=>{if(window.confirm(`Tem certeza que deseja deletar "${o}"?`))try{await n(i)}catch(l){console.error("Erro ao deletar post:",l),alert("Erro ao deletar o post. Tente novamente.")}};return e?g.jsx("div",{className:"max-w-6xl mx-auto px-4 py-8",children:g.jsxs("div",{className:"animate-pulse space-y-4",children:[g.jsx("div",{className:"h-8 bg-stone-200 rounded w-1/3"}),g.jsx("div",{className:"space-y-3",children:[...Array(5)].map((i,o)=>g.jsx("div",{className:"h-20 bg-stone-200 rounded"},o))})]})}):g.jsxs(g.Fragment,{children:[g.jsx(ls,{children:g.jsx("title",{children:"Painel de Controle - Filosofia & Reflexes"})}),g.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[g.jsxs("div",{className:"flex items-center justify-between mb-8",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-serif text-stone-800 mb-2",children:"Painel de Controle"}),g.jsx("p",{className:"text-stone-600",children:"Gerencie suas publicaes e contedo"})]}),g.jsxs("div",{className:"flex items-center space-x-4",children:[g.jsxs(ft,{to:"/nova-publicacao",className:"inline-flex items-center space-x-2 bg-stone-800 text-white px-6 py-3 rounded-lg hover:bg-stone-700 transition-colors",children:[g.jsx(Hg,{className:"w-5 h-5"}),g.jsx("span",{children:"Nova Publicao"})]}),g.jsxs("button",{onClick:r,className:"inline-flex items-center space-x-2 bg-red-600 text-white px-4 py-3 rounded-lg hover:bg-red-700 transition-colors",children:[g.jsx(wO,{className:"w-4 h-4"}),g.jsx("span",{children:"Sair"})]})]})]}),g.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-stone-200 overflow-hidden",children:[g.jsx("div",{className:"px-6 py-4 border-b border-stone-200",children:g.jsxs("h2",{className:"text-lg font-semibold text-stone-800",children:["Suas Publicaes (",t.length,")"]})}),t.length===0?g.jsxs("div",{className:"p-12 text-center",children:[g.jsx("div",{className:"w-16 h-16 bg-stone-100 rounded-full flex items-center justify-center mx-auto mb-4",children:g.jsx(zf,{className:"w-8 h-8 text-stone-400"})}),g.jsx("h3",{className:"text-lg font-medium text-stone-600 mb-2",children:"Nenhuma publicao ainda"}),g.jsx("p",{className:"text-stone-500 mb-6",children:"Comece criando sua primeira reflexo filosfica"}),g.jsxs(ft,{to:"/nova-publicacao",className:"inline-flex items-center space-x-2 bg-stone-800 text-white px-6 py-3 rounded-lg hover:bg-stone-700 transition-colors",children:[g.jsx(Hg,{className:"w-5 h-5"}),g.jsx("span",{children:"Criar Primeira Publicao"})]})]}):g.jsx("div",{className:"divide-y divide-stone-200",children:t.map(i=>g.jsx("div",{className:"p-6 hover:bg-stone-50 transition-colors",children:g.jsxs("div",{className:"flex items-start justify-between",children:[g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[g.jsx("h3",{className:"text-lg font-medium text-stone-800 truncate",children:i.title}),g.jsxs("div",{className:"flex items-center space-x-1 text-sm text-stone-500",children:[g.jsx(Sp,{className:"w-4 h-4"}),g.jsx("span",{children:i.upvotes})]})]}),g.jsxs("p",{className:"text-stone-600 text-sm mb-3",children:[i.content.replace(/<[^>]*>/g,"").substring(0,150),"..."]}),g.jsxs("div",{className:"flex items-center space-x-4 text-sm text-stone-500",children:[g.jsxs("span",{children:["Publicado em ",bp(i.created_at)]}),g.jsx("span",{children:""}),g.jsxs("span",{children:["Slug: /",i.slug]})]})]}),g.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[g.jsx(ft,{to:`/post/${i.slug}`,className:"p-2 text-stone-600 hover:text-stone-800 hover:bg-stone-200 rounded-lg transition-colors",title:"Visualizar",children:g.jsx(vw,{className:"w-4 h-4"})}),g.jsx(ft,{to:`/editar/${i.id}`,className:"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-100 rounded-lg transition-colors",title:"Editar",children:g.jsx(zf,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>s(i.id,i.title),className:"p-2 text-red-600 hover:text-red-800 hover:bg-red-100 rounded-lg transition-colors",title:"Deletar",children:g.jsx(xw,{className:"w-4 h-4"})})]})]})},i.id))})]})]})]})}function vD(){return g.jsxs(g.Fragment,{children:[g.jsxs(ls,{children:[g.jsx("title",{children:"Sobre - Filosofia & Reflexes"}),g.jsx("meta",{name:"description",content:"Conhea mais sobre o Filosofia & Reflexes, um espao dedicado ao pensamento profundo e dilogo intelectual."})]}),g.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8",children:[g.jsxs("div",{className:"text-center mb-12",children:[g.jsx("h1",{className:"text-4xl font-serif text-stone-800 mb-4",children:"Sobre este espao"}),g.jsx("p",{className:"text-xl text-stone-600 leading-relaxed",children:"Um lugar para contemplao, reflexo e dilogo sobre os grandes temas da existncia humana."})]}),g.jsx("div",{className:"mb-12",children:g.jsx(Sw,{})}),g.jsxs("div",{className:"prose prose-stone prose-lg max-w-none text-center",children:[g.jsxs("div",{className:"grid md:grid-cols-3 gap-8 mb-12",children:[g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"w-16 h-16 bg-stone-100 rounded-full flex items-center justify-center mx-auto mb-4",children:g.jsx(Yu,{className:"w-8 h-8 text-stone-600"})}),g.jsx("h3",{className:"font-serif text-xl text-stone-800 mb-2",children:"Conhecimento"}),g.jsx("p",{className:"text-stone-600",children:"Exploramos ideias que moldaram o pensamento humano ao longo da histria."})]}),g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"w-16 h-16 bg-stone-100 rounded-full flex items-center justify-center mx-auto mb-4",children:g.jsx(iO,{className:"w-8 h-8 text-stone-600"})}),g.jsx("h3",{className:"font-serif text-xl text-stone-800 mb-2",children:"Reflexo"}),g.jsx("p",{className:"text-stone-600",children:"Um espao para contemplar os significados profundos da vida e da experincia humana."})]}),g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"w-16 h-16 bg-stone-100 rounded-full flex items-center justify-center mx-auto mb-4",children:g.jsx(UO,{className:"w-8 h-8 text-stone-600"})}),g.jsx("h3",{className:"font-serif text-xl text-stone-800 mb-2",children:"Dilogo"}),g.jsx("p",{className:"text-stone-600",children:"Promovemos o intercmbio respeitoso de ideias e perspectivas diferentes."})]})]}),g.jsxs("div",{className:"bg-stone-50 rounded-xl p-8 mb-8",children:[g.jsx("h2",{className:"font-serif text-2xl text-stone-800 mb-4",children:"Nossa misso"}),g.jsxs("p",{className:"text-stone-700 leading-relaxed mb-4",children:["O ",g.jsx("strong",{children:"Filosofia & Reflexes"})," nasce da convico de que o pensamento crtico e a reflexo profunda so fundamentais para uma vida plena e consciente. Em um mundo acelerado, criamos um espao de pausa e contemplao."]}),g.jsx("p",{className:"text-stone-700 leading-relaxed",children:"Aqui, exploramos questes fundamentais sobre a existncia, a tica, a natureza da realidade e o significado da vida humana. Cada artigo  um convite  reflexo pessoal e ao dilogo construtivo."})]}),g.jsxs("div",{children:[g.jsx("h2",{className:"font-serif text-2xl text-stone-800 mb-4",children:"O que voc encontrar"}),g.jsxs("ul",{className:"space-y-2 text-stone-700",children:[g.jsxs("li",{children:[g.jsx("strong",{children:"Reflexes originais"})," sobre temas universais da filosofia"]}),g.jsxs("li",{children:[g.jsx("strong",{children:"Anlises contemporneas"})," de questes ticas e morais"]}),g.jsxs("li",{children:[g.jsx("strong",{children:"Exploraes"})," sobre conscincia, identidade e propsito"]}),g.jsxs("li",{children:[g.jsx("strong",{children:"Dilogos"})," sobre filosofia aplicada ao cotidiano"]}),g.jsxs("li",{children:[g.jsx("strong",{children:"Pensamentos"})," sobre arte, beleza e expresso humana"]})]})]})]}),g.jsx("div",{className:"mt-12 text-center",children:g.jsx("blockquote",{className:"text-xl font-serif text-stone-700 italic border-l-4 border-stone-300 pl-6",children:'"A filosofia no  um luxo do pensamento, mas uma necessidade da alma humana em busca de compreenso e significado."'})})]})]})}function wD(){return g.jsx(FN,{children:g.jsx(W1,{children:g.jsx(zC,{children:g.jsxs("div",{className:"min-h-screen bg-stone-50 flex flex-col",children:[g.jsx(HO,{}),g.jsx("main",{className:"flex-1",children:g.jsxs(gC,{children:[g.jsx(Dn,{path:"/",element:g.jsx(QO,{})}),g.jsx(Dn,{path:"/post/:slug",element:g.jsx(YO,{})}),g.jsx(Dn,{path:"/login",element:g.jsx(ZO,{})}),g.jsx(Dn,{path:"/nova-publicacao",element:g.jsx(ed,{children:g.jsx(mD,{})})}),g.jsx(Dn,{path:"/editar/:id",element:g.jsx(ed,{children:g.jsx(gD,{})})}),g.jsx(Dn,{path:"/painel",element:g.jsx(ed,{children:g.jsx(yD,{})})}),g.jsx(Dn,{path:"/sobre",element:g.jsx(vD,{})})]})}),g.jsx(VO,{})]})})})})}b1(document.getElementById("root")).render(g.jsx(k.StrictMode,{children:g.jsx(wD,{})}));
